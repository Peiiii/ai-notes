(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))o(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const s of i.addedNodes)s.tagName==="LINK"&&s.rel==="modulepreload"&&o(s)}).observe(document,{childList:!0,subtree:!0});function n(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function o(r){if(r.ep)return;r.ep=!0;const i=n(r);fetch(r.href,i)}})();function Ud(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Fd={exports:{}},Yr={},Vd={exports:{}},V={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Mo=Symbol.for("react.element"),Pp=Symbol.for("react.portal"),Rp=Symbol.for("react.fragment"),Mp=Symbol.for("react.strict_mode"),Dp=Symbol.for("react.profiler"),Lp=Symbol.for("react.provider"),Up=Symbol.for("react.context"),Fp=Symbol.for("react.forward_ref"),Vp=Symbol.for("react.suspense"),Hp=Symbol.for("react.memo"),Gp=Symbol.for("react.lazy"),jl=Symbol.iterator;function Bp(t){return t===null||typeof t!="object"?null:(t=jl&&t[jl]||t["@@iterator"],typeof t=="function"?t:null)}var Hd={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Gd=Object.assign,Bd={};function Fn(t,e,n){this.props=t,this.context=e,this.refs=Bd,this.updater=n||Hd}Fn.prototype.isReactComponent={};Fn.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Fn.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function qd(){}qd.prototype=Fn.prototype;function Qs(t,e,n){this.props=t,this.context=e,this.refs=Bd,this.updater=n||Hd}var Xs=Qs.prototype=new qd;Xs.constructor=Qs;Gd(Xs,Fn.prototype);Xs.isPureReactComponent=!0;var ea=Array.isArray,$d=Object.prototype.hasOwnProperty,Zs={current:null},zd={key:!0,ref:!0,__self:!0,__source:!0};function Jd(t,e,n){var o,r={},i=null,s=null;if(e!=null)for(o in e.ref!==void 0&&(s=e.ref),e.key!==void 0&&(i=""+e.key),e)$d.call(e,o)&&!zd.hasOwnProperty(o)&&(r[o]=e[o]);var u=arguments.length-2;if(u===1)r.children=n;else if(1<u){for(var c=Array(u),d=0;d<u;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(o in u=t.defaultProps,u)r[o]===void 0&&(r[o]=u[o]);return{$$typeof:Mo,type:t,key:i,ref:s,props:r,_owner:Zs.current}}function qp(t,e){return{$$typeof:Mo,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function js(t){return typeof t=="object"&&t!==null&&t.$$typeof===Mo}function $p(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var ta=/\/+/g;function yi(t,e){return typeof t=="object"&&t!==null&&t.key!=null?$p(""+t.key):e.toString(36)}function sr(t,e,n,o,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var s=!1;if(t===null)s=!0;else switch(i){case"string":case"number":s=!0;break;case"object":switch(t.$$typeof){case Mo:case Pp:s=!0}}if(s)return s=t,r=r(s),t=o===""?"."+yi(s,0):o,ea(r)?(n="",t!=null&&(n=t.replace(ta,"$&/")+"/"),sr(r,e,n,"",function(d){return d})):r!=null&&(js(r)&&(r=qp(r,n+(!r.key||s&&s.key===r.key?"":(""+r.key).replace(ta,"$&/")+"/")+t)),e.push(r)),1;if(s=0,o=o===""?".":o+":",ea(t))for(var u=0;u<t.length;u++){i=t[u];var c=o+yi(i,u);s+=sr(i,e,n,c,r)}else if(c=Bp(t),typeof c=="function")for(t=c.call(t),u=0;!(i=t.next()).done;)i=i.value,c=o+yi(i,u++),s+=sr(i,e,n,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return s}function zo(t,e,n){if(t==null)return t;var o=[],r=0;return sr(t,o,"","",function(i){return e.call(n,i,r++)}),o}function zp(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var xe={current:null},lr={transition:null},Jp={ReactCurrentDispatcher:xe,ReactCurrentBatchConfig:lr,ReactCurrentOwner:Zs};function Wd(){throw Error("act(...) is not supported in production builds of React.")}V.Children={map:zo,forEach:function(t,e,n){zo(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return zo(t,function(){e++}),e},toArray:function(t){return zo(t,function(e){return e})||[]},only:function(t){if(!js(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};V.Component=Fn;V.Fragment=Rp;V.Profiler=Dp;V.PureComponent=Qs;V.StrictMode=Mp;V.Suspense=Vp;V.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Jp;V.act=Wd;V.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var o=Gd({},t.props),r=t.key,i=t.ref,s=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,s=Zs.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var u=t.type.defaultProps;for(c in e)$d.call(e,c)&&!zd.hasOwnProperty(c)&&(o[c]=e[c]===void 0&&u!==void 0?u[c]:e[c])}var c=arguments.length-2;if(c===1)o.children=n;else if(1<c){u=Array(c);for(var d=0;d<c;d++)u[d]=arguments[d+2];o.children=u}return{$$typeof:Mo,type:t.type,key:r,ref:i,props:o,_owner:s}};V.createContext=function(t){return t={$$typeof:Up,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Lp,_context:t},t.Consumer=t};V.createElement=Jd;V.createFactory=function(t){var e=Jd.bind(null,t);return e.type=t,e};V.createRef=function(){return{current:null}};V.forwardRef=function(t){return{$$typeof:Fp,render:t}};V.isValidElement=js;V.lazy=function(t){return{$$typeof:Gp,_payload:{_status:-1,_result:t},_init:zp}};V.memo=function(t,e){return{$$typeof:Hp,type:t,compare:e===void 0?null:e}};V.startTransition=function(t){var e=lr.transition;lr.transition={};try{t()}finally{lr.transition=e}};V.unstable_act=Wd;V.useCallback=function(t,e){return xe.current.useCallback(t,e)};V.useContext=function(t){return xe.current.useContext(t)};V.useDebugValue=function(){};V.useDeferredValue=function(t){return xe.current.useDeferredValue(t)};V.useEffect=function(t,e){return xe.current.useEffect(t,e)};V.useId=function(){return xe.current.useId()};V.useImperativeHandle=function(t,e,n){return xe.current.useImperativeHandle(t,e,n)};V.useInsertionEffect=function(t,e){return xe.current.useInsertionEffect(t,e)};V.useLayoutEffect=function(t,e){return xe.current.useLayoutEffect(t,e)};V.useMemo=function(t,e){return xe.current.useMemo(t,e)};V.useReducer=function(t,e,n){return xe.current.useReducer(t,e,n)};V.useRef=function(t){return xe.current.useRef(t)};V.useState=function(t){return xe.current.useState(t)};V.useSyncExternalStore=function(t,e,n){return xe.current.useSyncExternalStore(t,e,n)};V.useTransition=function(){return xe.current.useTransition()};V.version="18.3.1";Vd.exports=V;var F=Vd.exports;const Or=Ud(F);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wp=F,bp=Symbol.for("react.element"),Yp=Symbol.for("react.fragment"),Op=Object.prototype.hasOwnProperty,Kp=Wp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Qp={key:!0,ref:!0,__self:!0,__source:!0};function bd(t,e,n){var o,r={},i=null,s=null;n!==void 0&&(i=""+n),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(s=e.ref);for(o in e)Op.call(e,o)&&!Qp.hasOwnProperty(o)&&(r[o]=e[o]);if(t&&t.defaultProps)for(o in e=t.defaultProps,e)r[o]===void 0&&(r[o]=e[o]);return{$$typeof:bp,type:t,key:i,ref:s,props:r,_owner:Kp.current}}Yr.Fragment=Yp;Yr.jsx=bd;Yr.jsxs=bd;Fd.exports=Yr;var h=Fd.exports,Yi={},Yd={exports:{}},De={},Od={exports:{}},Kd={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,L){var U=M.length;M.push(L);e:for(;0<U;){var j=U-1>>>1,re=M[j];if(0<r(re,L))M[j]=L,M[U]=re,U=j;else break e}}function n(M){return M.length===0?null:M[0]}function o(M){if(M.length===0)return null;var L=M[0],U=M.pop();if(U!==L){M[0]=U;e:for(var j=0,re=M.length,qo=re>>>1;j<qo;){var Vt=2*(j+1)-1,gi=M[Vt],Ht=Vt+1,$o=M[Ht];if(0>r(gi,U))Ht<re&&0>r($o,gi)?(M[j]=$o,M[Ht]=U,j=Ht):(M[j]=gi,M[Vt]=U,j=Vt);else if(Ht<re&&0>r($o,U))M[j]=$o,M[Ht]=U,j=Ht;else break e}}return L}function r(M,L){var U=M.sortIndex-L.sortIndex;return U!==0?U:M.id-L.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var s=Date,u=s.now();t.unstable_now=function(){return s.now()-u}}var c=[],d=[],f=1,p=null,m=3,y=!1,x=!1,S=!1,w=typeof setTimeout=="function"?setTimeout:null,v=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function T(M){for(var L=n(d);L!==null;){if(L.callback===null)o(d);else if(L.startTime<=M)o(d),L.sortIndex=L.expirationTime,e(c,L);else break;L=n(d)}}function C(M){if(S=!1,T(M),!x)if(n(c)!==null)x=!0,Ie(E);else{var L=n(d);L!==null&&Ft(C,L.startTime-M)}}function E(M,L){x=!1,S&&(S=!1,v(N),N=-1),y=!0;var U=m;try{for(T(L),p=n(c);p!==null&&(!(p.expirationTime>L)||M&&!z());){var j=p.callback;if(typeof j=="function"){p.callback=null,m=p.priorityLevel;var re=j(p.expirationTime<=L);L=t.unstable_now(),typeof re=="function"?p.callback=re:p===n(c)&&o(c),T(L)}else o(c);p=n(c)}if(p!==null)var qo=!0;else{var Vt=n(d);Vt!==null&&Ft(C,Vt.startTime-L),qo=!1}return qo}finally{p=null,m=U,y=!1}}var k=!1,_=null,N=-1,A=5,R=-1;function z(){return!(t.unstable_now()-R<A)}function $(){if(_!==null){var M=t.unstable_now();R=M;var L=!0;try{L=_(!0,M)}finally{L?ce():(k=!1,_=null)}}else k=!1}var ce;if(typeof g=="function")ce=function(){g($)};else if(typeof MessageChannel<"u"){var zn=new MessageChannel,Bo=zn.port2;zn.port1.onmessage=$,ce=function(){Bo.postMessage(null)}}else ce=function(){w($,0)};function Ie(M){_=M,k||(k=!0,ce())}function Ft(M,L){N=w(function(){M(t.unstable_now())},L)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){x||y||(x=!0,Ie(E))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):A=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return m},t.unstable_getFirstCallbackNode=function(){return n(c)},t.unstable_next=function(M){switch(m){case 1:case 2:case 3:var L=3;break;default:L=m}var U=m;m=L;try{return M()}finally{m=U}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,L){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var U=m;m=M;try{return L()}finally{m=U}},t.unstable_scheduleCallback=function(M,L,U){var j=t.unstable_now();switch(typeof U=="object"&&U!==null?(U=U.delay,U=typeof U=="number"&&0<U?j+U:j):U=j,M){case 1:var re=-1;break;case 2:re=250;break;case 5:re=1073741823;break;case 4:re=1e4;break;default:re=5e3}return re=U+re,M={id:f++,callback:L,priorityLevel:M,startTime:U,expirationTime:re,sortIndex:-1},U>j?(M.sortIndex=U,e(d,M),n(c)===null&&M===n(d)&&(S?(v(N),N=-1):S=!0,Ft(C,U-j))):(M.sortIndex=re,e(c,M),x||y||(x=!0,Ie(E))),M},t.unstable_shouldYield=z,t.unstable_wrapCallback=function(M){var L=m;return function(){var U=m;m=L;try{return M.apply(this,arguments)}finally{m=U}}}})(Kd);Od.exports=Kd;var Xp=Od.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zp=F,Me=Xp;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Qd=new Set,mo={};function jt(t,e){Nn(t,e),Nn(t+"Capture",e)}function Nn(t,e){for(mo[t]=e,t=0;t<e.length;t++)Qd.add(e[t])}var ut=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Oi=Object.prototype.hasOwnProperty,jp=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,na={},oa={};function em(t){return Oi.call(oa,t)?!0:Oi.call(na,t)?!1:jp.test(t)?oa[t]=!0:(na[t]=!0,!1)}function tm(t,e,n,o){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return o?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function nm(t,e,n,o){if(e===null||typeof e>"u"||tm(t,e,n,o))return!0;if(o)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Se(t,e,n,o,r,i,s){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=o,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=s}var de={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){de[t]=new Se(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];de[e]=new Se(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){de[t]=new Se(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){de[t]=new Se(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){de[t]=new Se(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){de[t]=new Se(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){de[t]=new Se(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){de[t]=new Se(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){de[t]=new Se(t,5,!1,t.toLowerCase(),null,!1,!1)});var el=/[\-:]([a-z])/g;function tl(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(el,tl);de[e]=new Se(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(el,tl);de[e]=new Se(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(el,tl);de[e]=new Se(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){de[t]=new Se(t,1,!1,t.toLowerCase(),null,!1,!1)});de.xlinkHref=new Se("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){de[t]=new Se(t,1,!1,t.toLowerCase(),null,!0,!0)});function nl(t,e,n,o){var r=de.hasOwnProperty(e)?de[e]:null;(r!==null?r.type!==0:o||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(nm(e,n,r,o)&&(n=null),o||r===null?em(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,o=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,o?t.setAttributeNS(o,e,n):t.setAttribute(e,n))))}var pt=Zp.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Jo=Symbol.for("react.element"),rn=Symbol.for("react.portal"),sn=Symbol.for("react.fragment"),ol=Symbol.for("react.strict_mode"),Ki=Symbol.for("react.profiler"),Xd=Symbol.for("react.provider"),Zd=Symbol.for("react.context"),rl=Symbol.for("react.forward_ref"),Qi=Symbol.for("react.suspense"),Xi=Symbol.for("react.suspense_list"),il=Symbol.for("react.memo"),gt=Symbol.for("react.lazy"),jd=Symbol.for("react.offscreen"),ra=Symbol.iterator;function Jn(t){return t===null||typeof t!="object"?null:(t=ra&&t[ra]||t["@@iterator"],typeof t=="function"?t:null)}var X=Object.assign,vi;function jn(t){if(vi===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);vi=e&&e[1]||""}return`
`+vi+t}var Ti=!1;function xi(t,e){if(!t||Ti)return"";Ti=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var o=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){o=d}t.call(e.prototype)}else{try{throw Error()}catch(d){o=d}t()}}catch(d){if(d&&o&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=o.stack.split(`
`),s=r.length-1,u=i.length-1;1<=s&&0<=u&&r[s]!==i[u];)u--;for(;1<=s&&0<=u;s--,u--)if(r[s]!==i[u]){if(s!==1||u!==1)do if(s--,u--,0>u||r[s]!==i[u]){var c=`
`+r[s].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=s&&0<=u);break}}}finally{Ti=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?jn(t):""}function om(t){switch(t.tag){case 5:return jn(t.type);case 16:return jn("Lazy");case 13:return jn("Suspense");case 19:return jn("SuspenseList");case 0:case 2:case 15:return t=xi(t.type,!1),t;case 11:return t=xi(t.type.render,!1),t;case 1:return t=xi(t.type,!0),t;default:return""}}function Zi(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case sn:return"Fragment";case rn:return"Portal";case Ki:return"Profiler";case ol:return"StrictMode";case Qi:return"Suspense";case Xi:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Zd:return(t.displayName||"Context")+".Consumer";case Xd:return(t._context.displayName||"Context")+".Provider";case rl:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case il:return e=t.displayName||null,e!==null?e:Zi(t.type)||"Memo";case gt:e=t._payload,t=t._init;try{return Zi(t(e))}catch{}}return null}function rm(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Zi(e);case 8:return e===ol?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Pt(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function ec(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function im(t){var e=ec(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),o=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,i=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(s){o=""+s,i.call(this,s)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return o},setValue:function(s){o=""+s},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Wo(t){t._valueTracker||(t._valueTracker=im(t))}function tc(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),o="";return t&&(o=ec(t)?t.checked?"true":"false":t.value),t=o,t!==n?(e.setValue(t),!0):!1}function xr(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function ji(t,e){var n=e.checked;return X({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function ia(t,e){var n=e.defaultValue==null?"":e.defaultValue,o=e.checked!=null?e.checked:e.defaultChecked;n=Pt(e.value!=null?e.value:n),t._wrapperState={initialChecked:o,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function nc(t,e){e=e.checked,e!=null&&nl(t,"checked",e,!1)}function es(t,e){nc(t,e);var n=Pt(e.value),o=e.type;if(n!=null)o==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(o==="submit"||o==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ts(t,e.type,n):e.hasOwnProperty("defaultValue")&&ts(t,e.type,Pt(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function sa(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var o=e.type;if(!(o!=="submit"&&o!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ts(t,e,n){(e!=="number"||xr(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Tn(t,e,n,o){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&o&&(t[n].defaultSelected=!0)}else{for(n=""+Pt(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,o&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ns(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return X({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function la(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(I(92));if(eo(n)){if(1<n.length)throw Error(I(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Pt(n)}}function oc(t,e){var n=Pt(e.value),o=Pt(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),o!=null&&(t.defaultValue=""+o)}function aa(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function rc(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function os(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?rc(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var bo,ic=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,o,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,o,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(bo=bo||document.createElement("div"),bo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=bo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ho(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var oo={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sm=["Webkit","ms","Moz","O"];Object.keys(oo).forEach(function(t){sm.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),oo[e]=oo[t]})});function sc(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||oo.hasOwnProperty(t)&&oo[t]?(""+e).trim():e+"px"}function lc(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var o=n.indexOf("--")===0,r=sc(n,e[n],o);n==="float"&&(n="cssFloat"),o?t.setProperty(n,r):t[n]=r}}var lm=X({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function rs(t,e){if(e){if(lm[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function is(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var ss=null;function sl(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var ls=null,xn=null,Sn=null;function ua(t){if(t=Uo(t)){if(typeof ls!="function")throw Error(I(280));var e=t.stateNode;e&&(e=jr(e),ls(t.stateNode,t.type,e))}}function ac(t){xn?Sn?Sn.push(t):Sn=[t]:xn=t}function uc(){if(xn){var t=xn,e=Sn;if(Sn=xn=null,ua(t),e)for(t=0;t<e.length;t++)ua(e[t])}}function dc(t,e){return t(e)}function cc(){}var Si=!1;function fc(t,e,n){if(Si)return t(e,n);Si=!0;try{return dc(t,e,n)}finally{Si=!1,(xn!==null||Sn!==null)&&(cc(),uc())}}function go(t,e){var n=t.stateNode;if(n===null)return null;var o=jr(n);if(o===null)return null;n=o[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(o=!o.disabled)||(t=t.type,o=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!o;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(I(231,e,typeof n));return n}var as=!1;if(ut)try{var Wn={};Object.defineProperty(Wn,"passive",{get:function(){as=!0}}),window.addEventListener("test",Wn,Wn),window.removeEventListener("test",Wn,Wn)}catch{as=!1}function am(t,e,n,o,r,i,s,u,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(n,d)}catch(f){this.onError(f)}}var ro=!1,Sr=null,Cr=!1,us=null,um={onError:function(t){ro=!0,Sr=t}};function dm(t,e,n,o,r,i,s,u,c){ro=!1,Sr=null,am.apply(um,arguments)}function cm(t,e,n,o,r,i,s,u,c){if(dm.apply(this,arguments),ro){if(ro){var d=Sr;ro=!1,Sr=null}else throw Error(I(198));Cr||(Cr=!0,us=d)}}function en(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function pc(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function da(t){if(en(t)!==t)throw Error(I(188))}function fm(t){var e=t.alternate;if(!e){if(e=en(t),e===null)throw Error(I(188));return e!==t?null:t}for(var n=t,o=e;;){var r=n.return;if(r===null)break;var i=r.alternate;if(i===null){if(o=r.return,o!==null){n=o;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===n)return da(r),t;if(i===o)return da(r),e;i=i.sibling}throw Error(I(188))}if(n.return!==o.return)n=r,o=i;else{for(var s=!1,u=r.child;u;){if(u===n){s=!0,n=r,o=i;break}if(u===o){s=!0,o=r,n=i;break}u=u.sibling}if(!s){for(u=i.child;u;){if(u===n){s=!0,n=i,o=r;break}if(u===o){s=!0,o=i,n=r;break}u=u.sibling}if(!s)throw Error(I(189))}}if(n.alternate!==o)throw Error(I(190))}if(n.tag!==3)throw Error(I(188));return n.stateNode.current===n?t:e}function mc(t){return t=fm(t),t!==null?hc(t):null}function hc(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=hc(t);if(e!==null)return e;t=t.sibling}return null}var gc=Me.unstable_scheduleCallback,ca=Me.unstable_cancelCallback,pm=Me.unstable_shouldYield,mm=Me.unstable_requestPaint,ee=Me.unstable_now,hm=Me.unstable_getCurrentPriorityLevel,ll=Me.unstable_ImmediatePriority,yc=Me.unstable_UserBlockingPriority,Er=Me.unstable_NormalPriority,gm=Me.unstable_LowPriority,vc=Me.unstable_IdlePriority,Kr=null,tt=null;function ym(t){if(tt&&typeof tt.onCommitFiberRoot=="function")try{tt.onCommitFiberRoot(Kr,t,void 0,(t.current.flags&128)===128)}catch{}}var Oe=Math.clz32?Math.clz32:xm,vm=Math.log,Tm=Math.LN2;function xm(t){return t>>>=0,t===0?32:31-(vm(t)/Tm|0)|0}var Yo=64,Oo=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function wr(t,e){var n=t.pendingLanes;if(n===0)return 0;var o=0,r=t.suspendedLanes,i=t.pingedLanes,s=n&268435455;if(s!==0){var u=s&~r;u!==0?o=to(u):(i&=s,i!==0&&(o=to(i)))}else s=n&~r,s!==0?o=to(s):i!==0&&(o=to(i));if(o===0)return 0;if(e!==0&&e!==o&&!(e&r)&&(r=o&-o,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(o&4&&(o|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=o;0<e;)n=31-Oe(e),r=1<<n,o|=t[n],e&=~r;return o}function Sm(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function Cm(t,e){for(var n=t.suspendedLanes,o=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var s=31-Oe(i),u=1<<s,c=r[s];c===-1?(!(u&n)||u&o)&&(r[s]=Sm(u,e)):c<=e&&(t.expiredLanes|=u),i&=~u}}function ds(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Tc(){var t=Yo;return Yo<<=1,!(Yo&4194240)&&(Yo=64),t}function Ci(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function Do(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-Oe(e),t[e]=n}function Em(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-Oe(n),i=1<<r;e[r]=0,o[r]=-1,t[r]=-1,n&=~i}}function al(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var o=31-Oe(n),r=1<<o;r&e|t[o]&e&&(t[o]|=e),n&=~r}}var q=0;function xc(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Sc,ul,Cc,Ec,wc,cs=!1,Ko=[],Ct=null,Et=null,wt=null,yo=new Map,vo=new Map,vt=[],wm="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function fa(t,e){switch(t){case"focusin":case"focusout":Ct=null;break;case"dragenter":case"dragleave":Et=null;break;case"mouseover":case"mouseout":wt=null;break;case"pointerover":case"pointerout":yo.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":vo.delete(e.pointerId)}}function bn(t,e,n,o,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:n,eventSystemFlags:o,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Uo(e),e!==null&&ul(e)),t):(t.eventSystemFlags|=o,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function _m(t,e,n,o,r){switch(e){case"focusin":return Ct=bn(Ct,t,e,n,o,r),!0;case"dragenter":return Et=bn(Et,t,e,n,o,r),!0;case"mouseover":return wt=bn(wt,t,e,n,o,r),!0;case"pointerover":var i=r.pointerId;return yo.set(i,bn(yo.get(i)||null,t,e,n,o,r)),!0;case"gotpointercapture":return i=r.pointerId,vo.set(i,bn(vo.get(i)||null,t,e,n,o,r)),!0}return!1}function _c(t){var e=qt(t.target);if(e!==null){var n=en(e);if(n!==null){if(e=n.tag,e===13){if(e=pc(n),e!==null){t.blockedOn=e,wc(t.priority,function(){Cc(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function ar(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=fs(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var o=new n.constructor(n.type,n);ss=o,n.target.dispatchEvent(o),ss=null}else return e=Uo(n),e!==null&&ul(e),t.blockedOn=n,!1;e.shift()}return!0}function pa(t,e,n){ar(t)&&n.delete(e)}function km(){cs=!1,Ct!==null&&ar(Ct)&&(Ct=null),Et!==null&&ar(Et)&&(Et=null),wt!==null&&ar(wt)&&(wt=null),yo.forEach(pa),vo.forEach(pa)}function Yn(t,e){t.blockedOn===e&&(t.blockedOn=null,cs||(cs=!0,Me.unstable_scheduleCallback(Me.unstable_NormalPriority,km)))}function To(t){function e(r){return Yn(r,t)}if(0<Ko.length){Yn(Ko[0],t);for(var n=1;n<Ko.length;n++){var o=Ko[n];o.blockedOn===t&&(o.blockedOn=null)}}for(Ct!==null&&Yn(Ct,t),Et!==null&&Yn(Et,t),wt!==null&&Yn(wt,t),yo.forEach(e),vo.forEach(e),n=0;n<vt.length;n++)o=vt[n],o.blockedOn===t&&(o.blockedOn=null);for(;0<vt.length&&(n=vt[0],n.blockedOn===null);)_c(n),n.blockedOn===null&&vt.shift()}var Cn=pt.ReactCurrentBatchConfig,_r=!0;function Im(t,e,n,o){var r=q,i=Cn.transition;Cn.transition=null;try{q=1,dl(t,e,n,o)}finally{q=r,Cn.transition=i}}function Nm(t,e,n,o){var r=q,i=Cn.transition;Cn.transition=null;try{q=4,dl(t,e,n,o)}finally{q=r,Cn.transition=i}}function dl(t,e,n,o){if(_r){var r=fs(t,e,n,o);if(r===null)Mi(t,e,o,kr,n),fa(t,o);else if(_m(r,t,e,n,o))o.stopPropagation();else if(fa(t,o),e&4&&-1<wm.indexOf(t)){for(;r!==null;){var i=Uo(r);if(i!==null&&Sc(i),i=fs(t,e,n,o),i===null&&Mi(t,e,o,kr,n),i===r)break;r=i}r!==null&&o.stopPropagation()}else Mi(t,e,o,null,n)}}var kr=null;function fs(t,e,n,o){if(kr=null,t=sl(o),t=qt(t),t!==null)if(e=en(t),e===null)t=null;else if(n=e.tag,n===13){if(t=pc(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return kr=t,null}function kc(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(hm()){case ll:return 1;case yc:return 4;case Er:case gm:return 16;case vc:return 536870912;default:return 16}default:return 16}}var xt=null,cl=null,ur=null;function Ic(){if(ur)return ur;var t,e=cl,n=e.length,o,r="value"in xt?xt.value:xt.textContent,i=r.length;for(t=0;t<n&&e[t]===r[t];t++);var s=n-t;for(o=1;o<=s&&e[n-o]===r[i-o];o++);return ur=r.slice(t,1<o?1-o:void 0)}function dr(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Qo(){return!0}function ma(){return!1}function Le(t){function e(n,o,r,i,s){this._reactName=n,this._targetInst=r,this.type=o,this.nativeEvent=i,this.target=s,this.currentTarget=null;for(var u in t)t.hasOwnProperty(u)&&(n=t[u],this[u]=n?n(i):i[u]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Qo:ma,this.isPropagationStopped=ma,this}return X(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Qo)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Qo)},persist:function(){},isPersistent:Qo}),e}var Vn={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},fl=Le(Vn),Lo=X({},Vn,{view:0,detail:0}),Am=Le(Lo),Ei,wi,On,Qr=X({},Lo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:pl,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==On&&(On&&t.type==="mousemove"?(Ei=t.screenX-On.screenX,wi=t.screenY-On.screenY):wi=Ei=0,On=t),Ei)},movementY:function(t){return"movementY"in t?t.movementY:wi}}),ha=Le(Qr),Pm=X({},Qr,{dataTransfer:0}),Rm=Le(Pm),Mm=X({},Lo,{relatedTarget:0}),_i=Le(Mm),Dm=X({},Vn,{animationName:0,elapsedTime:0,pseudoElement:0}),Lm=Le(Dm),Um=X({},Vn,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Fm=Le(Um),Vm=X({},Vn,{data:0}),ga=Le(Vm),Hm={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Gm={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Bm={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function qm(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Bm[t])?!!e[t]:!1}function pl(){return qm}var $m=X({},Lo,{key:function(t){if(t.key){var e=Hm[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=dr(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Gm[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:pl,charCode:function(t){return t.type==="keypress"?dr(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?dr(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),zm=Le($m),Jm=X({},Qr,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),ya=Le(Jm),Wm=X({},Lo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:pl}),bm=Le(Wm),Ym=X({},Vn,{propertyName:0,elapsedTime:0,pseudoElement:0}),Om=Le(Ym),Km=X({},Qr,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Qm=Le(Km),Xm=[9,13,27,32],ml=ut&&"CompositionEvent"in window,io=null;ut&&"documentMode"in document&&(io=document.documentMode);var Zm=ut&&"TextEvent"in window&&!io,Nc=ut&&(!ml||io&&8<io&&11>=io),va=" ",Ta=!1;function Ac(t,e){switch(t){case"keyup":return Xm.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Pc(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var ln=!1;function jm(t,e){switch(t){case"compositionend":return Pc(e);case"keypress":return e.which!==32?null:(Ta=!0,va);case"textInput":return t=e.data,t===va&&Ta?null:t;default:return null}}function eh(t,e){if(ln)return t==="compositionend"||!ml&&Ac(t,e)?(t=Ic(),ur=cl=xt=null,ln=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Nc&&e.locale!=="ko"?null:e.data;default:return null}}var th={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function xa(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!th[t.type]:e==="textarea"}function Rc(t,e,n,o){ac(o),e=Ir(e,"onChange"),0<e.length&&(n=new fl("onChange","change",null,n,o),t.push({event:n,listeners:e}))}var so=null,xo=null;function nh(t){$c(t,0)}function Xr(t){var e=dn(t);if(tc(e))return t}function oh(t,e){if(t==="change")return e}var Mc=!1;if(ut){var ki;if(ut){var Ii="oninput"in document;if(!Ii){var Sa=document.createElement("div");Sa.setAttribute("oninput","return;"),Ii=typeof Sa.oninput=="function"}ki=Ii}else ki=!1;Mc=ki&&(!document.documentMode||9<document.documentMode)}function Ca(){so&&(so.detachEvent("onpropertychange",Dc),xo=so=null)}function Dc(t){if(t.propertyName==="value"&&Xr(xo)){var e=[];Rc(e,xo,t,sl(t)),fc(nh,e)}}function rh(t,e,n){t==="focusin"?(Ca(),so=e,xo=n,so.attachEvent("onpropertychange",Dc)):t==="focusout"&&Ca()}function ih(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Xr(xo)}function sh(t,e){if(t==="click")return Xr(e)}function lh(t,e){if(t==="input"||t==="change")return Xr(e)}function ah(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var Qe=typeof Object.is=="function"?Object.is:ah;function So(t,e){if(Qe(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),o=Object.keys(e);if(n.length!==o.length)return!1;for(o=0;o<n.length;o++){var r=n[o];if(!Oi.call(e,r)||!Qe(t[r],e[r]))return!1}return!0}function Ea(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function wa(t,e){var n=Ea(t);t=0;for(var o;n;){if(n.nodeType===3){if(o=t+n.textContent.length,t<=e&&o>=e)return{node:n,offset:e-t};t=o}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Ea(n)}}function Lc(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Lc(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Uc(){for(var t=window,e=xr();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=xr(t.document)}return e}function hl(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function uh(t){var e=Uc(),n=t.focusedElem,o=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&Lc(n.ownerDocument.documentElement,n)){if(o!==null&&hl(n)){if(e=o.start,t=o.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,i=Math.min(o.start,r);o=o.end===void 0?i:Math.min(o.end,r),!t.extend&&i>o&&(r=o,o=i,i=r),r=wa(n,i);var s=wa(n,o);r&&s&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==s.node||t.focusOffset!==s.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>o?(t.addRange(e),t.extend(s.node,s.offset)):(e.setEnd(s.node,s.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var dh=ut&&"documentMode"in document&&11>=document.documentMode,an=null,ps=null,lo=null,ms=!1;function _a(t,e,n){var o=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;ms||an==null||an!==xr(o)||(o=an,"selectionStart"in o&&hl(o)?o={start:o.selectionStart,end:o.selectionEnd}:(o=(o.ownerDocument&&o.ownerDocument.defaultView||window).getSelection(),o={anchorNode:o.anchorNode,anchorOffset:o.anchorOffset,focusNode:o.focusNode,focusOffset:o.focusOffset}),lo&&So(lo,o)||(lo=o,o=Ir(ps,"onSelect"),0<o.length&&(e=new fl("onSelect","select",null,e,n),t.push({event:e,listeners:o}),e.target=an)))}function Xo(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var un={animationend:Xo("Animation","AnimationEnd"),animationiteration:Xo("Animation","AnimationIteration"),animationstart:Xo("Animation","AnimationStart"),transitionend:Xo("Transition","TransitionEnd")},Ni={},Fc={};ut&&(Fc=document.createElement("div").style,"AnimationEvent"in window||(delete un.animationend.animation,delete un.animationiteration.animation,delete un.animationstart.animation),"TransitionEvent"in window||delete un.transitionend.transition);function Zr(t){if(Ni[t])return Ni[t];if(!un[t])return t;var e=un[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in Fc)return Ni[t]=e[n];return t}var Vc=Zr("animationend"),Hc=Zr("animationiteration"),Gc=Zr("animationstart"),Bc=Zr("transitionend"),qc=new Map,ka="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Mt(t,e){qc.set(t,e),jt(e,[t])}for(var Ai=0;Ai<ka.length;Ai++){var Pi=ka[Ai],ch=Pi.toLowerCase(),fh=Pi[0].toUpperCase()+Pi.slice(1);Mt(ch,"on"+fh)}Mt(Vc,"onAnimationEnd");Mt(Hc,"onAnimationIteration");Mt(Gc,"onAnimationStart");Mt("dblclick","onDoubleClick");Mt("focusin","onFocus");Mt("focusout","onBlur");Mt(Bc,"onTransitionEnd");Nn("onMouseEnter",["mouseout","mouseover"]);Nn("onMouseLeave",["mouseout","mouseover"]);Nn("onPointerEnter",["pointerout","pointerover"]);Nn("onPointerLeave",["pointerout","pointerover"]);jt("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));jt("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));jt("onBeforeInput",["compositionend","keypress","textInput","paste"]);jt("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));jt("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));jt("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),ph=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function Ia(t,e,n){var o=t.type||"unknown-event";t.currentTarget=n,cm(o,e,void 0,t),t.currentTarget=null}function $c(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var o=t[n],r=o.event;o=o.listeners;e:{var i=void 0;if(e)for(var s=o.length-1;0<=s;s--){var u=o[s],c=u.instance,d=u.currentTarget;if(u=u.listener,c!==i&&r.isPropagationStopped())break e;Ia(r,u,d),i=c}else for(s=0;s<o.length;s++){if(u=o[s],c=u.instance,d=u.currentTarget,u=u.listener,c!==i&&r.isPropagationStopped())break e;Ia(r,u,d),i=c}}}if(Cr)throw t=us,Cr=!1,us=null,t}function W(t,e){var n=e[Ts];n===void 0&&(n=e[Ts]=new Set);var o=t+"__bubble";n.has(o)||(zc(e,t,2,!1),n.add(o))}function Ri(t,e,n){var o=0;e&&(o|=4),zc(n,t,o,e)}var Zo="_reactListening"+Math.random().toString(36).slice(2);function Co(t){if(!t[Zo]){t[Zo]=!0,Qd.forEach(function(n){n!=="selectionchange"&&(ph.has(n)||Ri(n,!1,t),Ri(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Zo]||(e[Zo]=!0,Ri("selectionchange",!1,e))}}function zc(t,e,n,o){switch(kc(e)){case 1:var r=Im;break;case 4:r=Nm;break;default:r=dl}n=r.bind(null,e,n,t),r=void 0,!as||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),o?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Mi(t,e,n,o,r){var i=o;if(!(e&1)&&!(e&2)&&o!==null)e:for(;;){if(o===null)return;var s=o.tag;if(s===3||s===4){var u=o.stateNode.containerInfo;if(u===r||u.nodeType===8&&u.parentNode===r)break;if(s===4)for(s=o.return;s!==null;){var c=s.tag;if((c===3||c===4)&&(c=s.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;s=s.return}for(;u!==null;){if(s=qt(u),s===null)return;if(c=s.tag,c===5||c===6){o=i=s;continue e}u=u.parentNode}}o=o.return}fc(function(){var d=i,f=sl(n),p=[];e:{var m=qc.get(t);if(m!==void 0){var y=fl,x=t;switch(t){case"keypress":if(dr(n)===0)break e;case"keydown":case"keyup":y=zm;break;case"focusin":x="focus",y=_i;break;case"focusout":x="blur",y=_i;break;case"beforeblur":case"afterblur":y=_i;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":y=ha;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":y=Rm;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":y=bm;break;case Vc:case Hc:case Gc:y=Lm;break;case Bc:y=Om;break;case"scroll":y=Am;break;case"wheel":y=Qm;break;case"copy":case"cut":case"paste":y=Fm;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":y=ya}var S=(e&4)!==0,w=!S&&t==="scroll",v=S?m!==null?m+"Capture":null:m;S=[];for(var g=d,T;g!==null;){T=g;var C=T.stateNode;if(T.tag===5&&C!==null&&(T=C,v!==null&&(C=go(g,v),C!=null&&S.push(Eo(g,C,T)))),w)break;g=g.return}0<S.length&&(m=new y(m,x,null,n,f),p.push({event:m,listeners:S}))}}if(!(e&7)){e:{if(m=t==="mouseover"||t==="pointerover",y=t==="mouseout"||t==="pointerout",m&&n!==ss&&(x=n.relatedTarget||n.fromElement)&&(qt(x)||x[dt]))break e;if((y||m)&&(m=f.window===f?f:(m=f.ownerDocument)?m.defaultView||m.parentWindow:window,y?(x=n.relatedTarget||n.toElement,y=d,x=x?qt(x):null,x!==null&&(w=en(x),x!==w||x.tag!==5&&x.tag!==6)&&(x=null)):(y=null,x=d),y!==x)){if(S=ha,C="onMouseLeave",v="onMouseEnter",g="mouse",(t==="pointerout"||t==="pointerover")&&(S=ya,C="onPointerLeave",v="onPointerEnter",g="pointer"),w=y==null?m:dn(y),T=x==null?m:dn(x),m=new S(C,g+"leave",y,n,f),m.target=w,m.relatedTarget=T,C=null,qt(f)===d&&(S=new S(v,g+"enter",x,n,f),S.target=T,S.relatedTarget=w,C=S),w=C,y&&x)t:{for(S=y,v=x,g=0,T=S;T;T=nn(T))g++;for(T=0,C=v;C;C=nn(C))T++;for(;0<g-T;)S=nn(S),g--;for(;0<T-g;)v=nn(v),T--;for(;g--;){if(S===v||v!==null&&S===v.alternate)break t;S=nn(S),v=nn(v)}S=null}else S=null;y!==null&&Na(p,m,y,S,!1),x!==null&&w!==null&&Na(p,w,x,S,!0)}}e:{if(m=d?dn(d):window,y=m.nodeName&&m.nodeName.toLowerCase(),y==="select"||y==="input"&&m.type==="file")var E=oh;else if(xa(m))if(Mc)E=lh;else{E=ih;var k=rh}else(y=m.nodeName)&&y.toLowerCase()==="input"&&(m.type==="checkbox"||m.type==="radio")&&(E=sh);if(E&&(E=E(t,d))){Rc(p,E,n,f);break e}k&&k(t,m,d),t==="focusout"&&(k=m._wrapperState)&&k.controlled&&m.type==="number"&&ts(m,"number",m.value)}switch(k=d?dn(d):window,t){case"focusin":(xa(k)||k.contentEditable==="true")&&(an=k,ps=d,lo=null);break;case"focusout":lo=ps=an=null;break;case"mousedown":ms=!0;break;case"contextmenu":case"mouseup":case"dragend":ms=!1,_a(p,n,f);break;case"selectionchange":if(dh)break;case"keydown":case"keyup":_a(p,n,f)}var _;if(ml)e:{switch(t){case"compositionstart":var N="onCompositionStart";break e;case"compositionend":N="onCompositionEnd";break e;case"compositionupdate":N="onCompositionUpdate";break e}N=void 0}else ln?Ac(t,n)&&(N="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(N="onCompositionStart");N&&(Nc&&n.locale!=="ko"&&(ln||N!=="onCompositionStart"?N==="onCompositionEnd"&&ln&&(_=Ic()):(xt=f,cl="value"in xt?xt.value:xt.textContent,ln=!0)),k=Ir(d,N),0<k.length&&(N=new ga(N,t,null,n,f),p.push({event:N,listeners:k}),_?N.data=_:(_=Pc(n),_!==null&&(N.data=_)))),(_=Zm?jm(t,n):eh(t,n))&&(d=Ir(d,"onBeforeInput"),0<d.length&&(f=new ga("onBeforeInput","beforeinput",null,n,f),p.push({event:f,listeners:d}),f.data=_))}$c(p,e)})}function Eo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Ir(t,e){for(var n=e+"Capture",o=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=go(t,n),i!=null&&o.unshift(Eo(t,i,r)),i=go(t,e),i!=null&&o.push(Eo(t,i,r))),t=t.return}return o}function nn(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Na(t,e,n,o,r){for(var i=e._reactName,s=[];n!==null&&n!==o;){var u=n,c=u.alternate,d=u.stateNode;if(c!==null&&c===o)break;u.tag===5&&d!==null&&(u=d,r?(c=go(n,i),c!=null&&s.unshift(Eo(n,c,u))):r||(c=go(n,i),c!=null&&s.push(Eo(n,c,u)))),n=n.return}s.length!==0&&t.push({event:e,listeners:s})}var mh=/\r\n?/g,hh=/\u0000|\uFFFD/g;function Aa(t){return(typeof t=="string"?t:""+t).replace(mh,`
`).replace(hh,"")}function jo(t,e,n){if(e=Aa(e),Aa(t)!==e&&n)throw Error(I(425))}function Nr(){}var hs=null,gs=null;function ys(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var vs=typeof setTimeout=="function"?setTimeout:void 0,gh=typeof clearTimeout=="function"?clearTimeout:void 0,Pa=typeof Promise=="function"?Promise:void 0,yh=typeof queueMicrotask=="function"?queueMicrotask:typeof Pa<"u"?function(t){return Pa.resolve(null).then(t).catch(vh)}:vs;function vh(t){setTimeout(function(){throw t})}function Di(t,e){var n=e,o=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(o===0){t.removeChild(r),To(e);return}o--}else n!=="$"&&n!=="$?"&&n!=="$!"||o++;n=r}while(n);To(e)}function _t(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Ra(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Hn=Math.random().toString(36).slice(2),et="__reactFiber$"+Hn,wo="__reactProps$"+Hn,dt="__reactContainer$"+Hn,Ts="__reactEvents$"+Hn,Th="__reactListeners$"+Hn,xh="__reactHandles$"+Hn;function qt(t){var e=t[et];if(e)return e;for(var n=t.parentNode;n;){if(e=n[dt]||n[et]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Ra(t);t!==null;){if(n=t[et])return n;t=Ra(t)}return e}t=n,n=t.parentNode}return null}function Uo(t){return t=t[et]||t[dt],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function dn(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function jr(t){return t[wo]||null}var xs=[],cn=-1;function Dt(t){return{current:t}}function Y(t){0>cn||(t.current=xs[cn],xs[cn]=null,cn--)}function J(t,e){cn++,xs[cn]=t.current,t.current=e}var Rt={},ye=Dt(Rt),we=Dt(!1),Yt=Rt;function An(t,e){var n=t.type.contextTypes;if(!n)return Rt;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===e)return o.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in n)r[i]=e[i];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _e(t){return t=t.childContextTypes,t!=null}function Ar(){Y(we),Y(ye)}function Ma(t,e,n){if(ye.current!==Rt)throw Error(I(168));J(ye,e),J(we,n)}function Jc(t,e,n){var o=t.stateNode;if(e=e.childContextTypes,typeof o.getChildContext!="function")return n;o=o.getChildContext();for(var r in o)if(!(r in e))throw Error(I(108,rm(t)||"Unknown",r));return X({},n,o)}function Pr(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Rt,Yt=ye.current,J(ye,t),J(we,we.current),!0}function Da(t,e,n){var o=t.stateNode;if(!o)throw Error(I(169));n?(t=Jc(t,e,Yt),o.__reactInternalMemoizedMergedChildContext=t,Y(we),Y(ye),J(ye,t)):Y(we),J(we,n)}var rt=null,ei=!1,Li=!1;function Wc(t){rt===null?rt=[t]:rt.push(t)}function Sh(t){ei=!0,Wc(t)}function Lt(){if(!Li&&rt!==null){Li=!0;var t=0,e=q;try{var n=rt;for(q=1;t<n.length;t++){var o=n[t];do o=o(!0);while(o!==null)}rt=null,ei=!1}catch(r){throw rt!==null&&(rt=rt.slice(t+1)),gc(ll,Lt),r}finally{q=e,Li=!1}}return null}var fn=[],pn=0,Rr=null,Mr=0,Ue=[],Fe=0,Ot=null,st=1,lt="";function Gt(t,e){fn[pn++]=Mr,fn[pn++]=Rr,Rr=t,Mr=e}function bc(t,e,n){Ue[Fe++]=st,Ue[Fe++]=lt,Ue[Fe++]=Ot,Ot=t;var o=st;t=lt;var r=32-Oe(o)-1;o&=~(1<<r),n+=1;var i=32-Oe(e)+r;if(30<i){var s=r-r%5;i=(o&(1<<s)-1).toString(32),o>>=s,r-=s,st=1<<32-Oe(e)+r|n<<r|o,lt=i+t}else st=1<<i|n<<r|o,lt=t}function gl(t){t.return!==null&&(Gt(t,1),bc(t,1,0))}function yl(t){for(;t===Rr;)Rr=fn[--pn],fn[pn]=null,Mr=fn[--pn],fn[pn]=null;for(;t===Ot;)Ot=Ue[--Fe],Ue[Fe]=null,lt=Ue[--Fe],Ue[Fe]=null,st=Ue[--Fe],Ue[Fe]=null}var Re=null,Pe=null,O=!1,Ye=null;function Yc(t,e){var n=Ve(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function La(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Re=t,Pe=_t(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Re=t,Pe=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=Ot!==null?{id:st,overflow:lt}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Ve(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Re=t,Pe=null,!0):!1;default:return!1}}function Ss(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Cs(t){if(O){var e=Pe;if(e){var n=e;if(!La(t,e)){if(Ss(t))throw Error(I(418));e=_t(n.nextSibling);var o=Re;e&&La(t,e)?Yc(o,n):(t.flags=t.flags&-4097|2,O=!1,Re=t)}}else{if(Ss(t))throw Error(I(418));t.flags=t.flags&-4097|2,O=!1,Re=t}}}function Ua(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Re=t}function er(t){if(t!==Re)return!1;if(!O)return Ua(t),O=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ys(t.type,t.memoizedProps)),e&&(e=Pe)){if(Ss(t))throw Oc(),Error(I(418));for(;e;)Yc(t,e),e=_t(e.nextSibling)}if(Ua(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Pe=_t(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Pe=null}}else Pe=Re?_t(t.stateNode.nextSibling):null;return!0}function Oc(){for(var t=Pe;t;)t=_t(t.nextSibling)}function Pn(){Pe=Re=null,O=!1}function vl(t){Ye===null?Ye=[t]:Ye.push(t)}var Ch=pt.ReactCurrentBatchConfig;function Kn(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(I(309));var o=n.stateNode}if(!o)throw Error(I(147,t));var r=o,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(s){var u=r.refs;s===null?delete u[i]:u[i]=s},e._stringRef=i,e)}if(typeof t!="string")throw Error(I(284));if(!n._owner)throw Error(I(290,t))}return t}function tr(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Fa(t){var e=t._init;return e(t._payload)}function Kc(t){function e(v,g){if(t){var T=v.deletions;T===null?(v.deletions=[g],v.flags|=16):T.push(g)}}function n(v,g){if(!t)return null;for(;g!==null;)e(v,g),g=g.sibling;return null}function o(v,g){for(v=new Map;g!==null;)g.key!==null?v.set(g.key,g):v.set(g.index,g),g=g.sibling;return v}function r(v,g){return v=At(v,g),v.index=0,v.sibling=null,v}function i(v,g,T){return v.index=T,t?(T=v.alternate,T!==null?(T=T.index,T<g?(v.flags|=2,g):T):(v.flags|=2,g)):(v.flags|=1048576,g)}function s(v){return t&&v.alternate===null&&(v.flags|=2),v}function u(v,g,T,C){return g===null||g.tag!==6?(g=qi(T,v.mode,C),g.return=v,g):(g=r(g,T),g.return=v,g)}function c(v,g,T,C){var E=T.type;return E===sn?f(v,g,T.props.children,C,T.key):g!==null&&(g.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===gt&&Fa(E)===g.type)?(C=r(g,T.props),C.ref=Kn(v,g,T),C.return=v,C):(C=yr(T.type,T.key,T.props,null,v.mode,C),C.ref=Kn(v,g,T),C.return=v,C)}function d(v,g,T,C){return g===null||g.tag!==4||g.stateNode.containerInfo!==T.containerInfo||g.stateNode.implementation!==T.implementation?(g=$i(T,v.mode,C),g.return=v,g):(g=r(g,T.children||[]),g.return=v,g)}function f(v,g,T,C,E){return g===null||g.tag!==7?(g=Wt(T,v.mode,C,E),g.return=v,g):(g=r(g,T),g.return=v,g)}function p(v,g,T){if(typeof g=="string"&&g!==""||typeof g=="number")return g=qi(""+g,v.mode,T),g.return=v,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Jo:return T=yr(g.type,g.key,g.props,null,v.mode,T),T.ref=Kn(v,null,g),T.return=v,T;case rn:return g=$i(g,v.mode,T),g.return=v,g;case gt:var C=g._init;return p(v,C(g._payload),T)}if(eo(g)||Jn(g))return g=Wt(g,v.mode,T,null),g.return=v,g;tr(v,g)}return null}function m(v,g,T,C){var E=g!==null?g.key:null;if(typeof T=="string"&&T!==""||typeof T=="number")return E!==null?null:u(v,g,""+T,C);if(typeof T=="object"&&T!==null){switch(T.$$typeof){case Jo:return T.key===E?c(v,g,T,C):null;case rn:return T.key===E?d(v,g,T,C):null;case gt:return E=T._init,m(v,g,E(T._payload),C)}if(eo(T)||Jn(T))return E!==null?null:f(v,g,T,C,null);tr(v,T)}return null}function y(v,g,T,C,E){if(typeof C=="string"&&C!==""||typeof C=="number")return v=v.get(T)||null,u(g,v,""+C,E);if(typeof C=="object"&&C!==null){switch(C.$$typeof){case Jo:return v=v.get(C.key===null?T:C.key)||null,c(g,v,C,E);case rn:return v=v.get(C.key===null?T:C.key)||null,d(g,v,C,E);case gt:var k=C._init;return y(v,g,T,k(C._payload),E)}if(eo(C)||Jn(C))return v=v.get(T)||null,f(g,v,C,E,null);tr(g,C)}return null}function x(v,g,T,C){for(var E=null,k=null,_=g,N=g=0,A=null;_!==null&&N<T.length;N++){_.index>N?(A=_,_=null):A=_.sibling;var R=m(v,_,T[N],C);if(R===null){_===null&&(_=A);break}t&&_&&R.alternate===null&&e(v,_),g=i(R,g,N),k===null?E=R:k.sibling=R,k=R,_=A}if(N===T.length)return n(v,_),O&&Gt(v,N),E;if(_===null){for(;N<T.length;N++)_=p(v,T[N],C),_!==null&&(g=i(_,g,N),k===null?E=_:k.sibling=_,k=_);return O&&Gt(v,N),E}for(_=o(v,_);N<T.length;N++)A=y(_,v,N,T[N],C),A!==null&&(t&&A.alternate!==null&&_.delete(A.key===null?N:A.key),g=i(A,g,N),k===null?E=A:k.sibling=A,k=A);return t&&_.forEach(function(z){return e(v,z)}),O&&Gt(v,N),E}function S(v,g,T,C){var E=Jn(T);if(typeof E!="function")throw Error(I(150));if(T=E.call(T),T==null)throw Error(I(151));for(var k=E=null,_=g,N=g=0,A=null,R=T.next();_!==null&&!R.done;N++,R=T.next()){_.index>N?(A=_,_=null):A=_.sibling;var z=m(v,_,R.value,C);if(z===null){_===null&&(_=A);break}t&&_&&z.alternate===null&&e(v,_),g=i(z,g,N),k===null?E=z:k.sibling=z,k=z,_=A}if(R.done)return n(v,_),O&&Gt(v,N),E;if(_===null){for(;!R.done;N++,R=T.next())R=p(v,R.value,C),R!==null&&(g=i(R,g,N),k===null?E=R:k.sibling=R,k=R);return O&&Gt(v,N),E}for(_=o(v,_);!R.done;N++,R=T.next())R=y(_,v,N,R.value,C),R!==null&&(t&&R.alternate!==null&&_.delete(R.key===null?N:R.key),g=i(R,g,N),k===null?E=R:k.sibling=R,k=R);return t&&_.forEach(function($){return e(v,$)}),O&&Gt(v,N),E}function w(v,g,T,C){if(typeof T=="object"&&T!==null&&T.type===sn&&T.key===null&&(T=T.props.children),typeof T=="object"&&T!==null){switch(T.$$typeof){case Jo:e:{for(var E=T.key,k=g;k!==null;){if(k.key===E){if(E=T.type,E===sn){if(k.tag===7){n(v,k.sibling),g=r(k,T.props.children),g.return=v,v=g;break e}}else if(k.elementType===E||typeof E=="object"&&E!==null&&E.$$typeof===gt&&Fa(E)===k.type){n(v,k.sibling),g=r(k,T.props),g.ref=Kn(v,k,T),g.return=v,v=g;break e}n(v,k);break}else e(v,k);k=k.sibling}T.type===sn?(g=Wt(T.props.children,v.mode,C,T.key),g.return=v,v=g):(C=yr(T.type,T.key,T.props,null,v.mode,C),C.ref=Kn(v,g,T),C.return=v,v=C)}return s(v);case rn:e:{for(k=T.key;g!==null;){if(g.key===k)if(g.tag===4&&g.stateNode.containerInfo===T.containerInfo&&g.stateNode.implementation===T.implementation){n(v,g.sibling),g=r(g,T.children||[]),g.return=v,v=g;break e}else{n(v,g);break}else e(v,g);g=g.sibling}g=$i(T,v.mode,C),g.return=v,v=g}return s(v);case gt:return k=T._init,w(v,g,k(T._payload),C)}if(eo(T))return x(v,g,T,C);if(Jn(T))return S(v,g,T,C);tr(v,T)}return typeof T=="string"&&T!==""||typeof T=="number"?(T=""+T,g!==null&&g.tag===6?(n(v,g.sibling),g=r(g,T),g.return=v,v=g):(n(v,g),g=qi(T,v.mode,C),g.return=v,v=g),s(v)):n(v,g)}return w}var Rn=Kc(!0),Qc=Kc(!1),Dr=Dt(null),Lr=null,mn=null,Tl=null;function xl(){Tl=mn=Lr=null}function Sl(t){var e=Dr.current;Y(Dr),t._currentValue=e}function Es(t,e,n){for(;t!==null;){var o=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,o!==null&&(o.childLanes|=e)):o!==null&&(o.childLanes&e)!==e&&(o.childLanes|=e),t===n)break;t=t.return}}function En(t,e){Lr=t,Tl=mn=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ee=!0),t.firstContext=null)}function Be(t){var e=t._currentValue;if(Tl!==t)if(t={context:t,memoizedValue:e,next:null},mn===null){if(Lr===null)throw Error(I(308));mn=t,Lr.dependencies={lanes:0,firstContext:t}}else mn=mn.next=t;return e}var $t=null;function Cl(t){$t===null?$t=[t]:$t.push(t)}function Xc(t,e,n,o){var r=e.interleaved;return r===null?(n.next=n,Cl(e)):(n.next=r.next,r.next=n),e.interleaved=n,ct(t,o)}function ct(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var yt=!1;function El(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Zc(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function at(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function kt(t,e,n){var o=t.updateQueue;if(o===null)return null;if(o=o.shared,G&2){var r=o.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),o.pending=e,ct(t,n)}return r=o.interleaved,r===null?(e.next=e,Cl(o)):(e.next=r.next,r.next=e),o.interleaved=e,ct(t,n)}function cr(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,al(t,n)}}function Va(t,e){var n=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,n===o)){var r=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var s={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?r=i=s:i=i.next=s,n=n.next}while(n!==null);i===null?r=i=e:i=i.next=e}else r=i=e;n={baseState:o.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:o.shared,effects:o.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function Ur(t,e,n,o){var r=t.updateQueue;yt=!1;var i=r.firstBaseUpdate,s=r.lastBaseUpdate,u=r.shared.pending;if(u!==null){r.shared.pending=null;var c=u,d=c.next;c.next=null,s===null?i=d:s.next=d,s=c;var f=t.alternate;f!==null&&(f=f.updateQueue,u=f.lastBaseUpdate,u!==s&&(u===null?f.firstBaseUpdate=d:u.next=d,f.lastBaseUpdate=c))}if(i!==null){var p=r.baseState;s=0,f=d=c=null,u=i;do{var m=u.lane,y=u.eventTime;if((o&m)===m){f!==null&&(f=f.next={eventTime:y,lane:0,tag:u.tag,payload:u.payload,callback:u.callback,next:null});e:{var x=t,S=u;switch(m=e,y=n,S.tag){case 1:if(x=S.payload,typeof x=="function"){p=x.call(y,p,m);break e}p=x;break e;case 3:x.flags=x.flags&-65537|128;case 0:if(x=S.payload,m=typeof x=="function"?x.call(y,p,m):x,m==null)break e;p=X({},p,m);break e;case 2:yt=!0}}u.callback!==null&&u.lane!==0&&(t.flags|=64,m=r.effects,m===null?r.effects=[u]:m.push(u))}else y={eventTime:y,lane:m,tag:u.tag,payload:u.payload,callback:u.callback,next:null},f===null?(d=f=y,c=p):f=f.next=y,s|=m;if(u=u.next,u===null){if(u=r.shared.pending,u===null)break;m=u,u=m.next,m.next=null,r.lastBaseUpdate=m,r.shared.pending=null}}while(!0);if(f===null&&(c=p),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=f,e=r.shared.interleaved,e!==null){r=e;do s|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Qt|=s,t.lanes=s,t.memoizedState=p}}function Ha(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var o=t[e],r=o.callback;if(r!==null){if(o.callback=null,o=n,typeof r!="function")throw Error(I(191,r));r.call(o)}}}var Fo={},nt=Dt(Fo),_o=Dt(Fo),ko=Dt(Fo);function zt(t){if(t===Fo)throw Error(I(174));return t}function wl(t,e){switch(J(ko,e),J(_o,t),J(nt,Fo),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:os(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=os(e,t)}Y(nt),J(nt,e)}function Mn(){Y(nt),Y(_o),Y(ko)}function jc(t){zt(ko.current);var e=zt(nt.current),n=os(e,t.type);e!==n&&(J(_o,t),J(nt,n))}function _l(t){_o.current===t&&(Y(nt),Y(_o))}var K=Dt(0);function Fr(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ui=[];function kl(){for(var t=0;t<Ui.length;t++)Ui[t]._workInProgressVersionPrimary=null;Ui.length=0}var fr=pt.ReactCurrentDispatcher,Fi=pt.ReactCurrentBatchConfig,Kt=0,Q=null,ne=null,se=null,Vr=!1,ao=!1,Io=0,Eh=0;function fe(){throw Error(I(321))}function Il(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!Qe(t[n],e[n]))return!1;return!0}function Nl(t,e,n,o,r,i){if(Kt=i,Q=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,fr.current=t===null||t.memoizedState===null?Ih:Nh,t=n(o,r),ao){i=0;do{if(ao=!1,Io=0,25<=i)throw Error(I(301));i+=1,se=ne=null,e.updateQueue=null,fr.current=Ah,t=n(o,r)}while(ao)}if(fr.current=Hr,e=ne!==null&&ne.next!==null,Kt=0,se=ne=Q=null,Vr=!1,e)throw Error(I(300));return t}function Al(){var t=Io!==0;return Io=0,t}function je(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return se===null?Q.memoizedState=se=t:se=se.next=t,se}function qe(){if(ne===null){var t=Q.alternate;t=t!==null?t.memoizedState:null}else t=ne.next;var e=se===null?Q.memoizedState:se.next;if(e!==null)se=e,ne=t;else{if(t===null)throw Error(I(310));ne=t,t={memoizedState:ne.memoizedState,baseState:ne.baseState,baseQueue:ne.baseQueue,queue:ne.queue,next:null},se===null?Q.memoizedState=se=t:se=se.next=t}return se}function No(t,e){return typeof e=="function"?e(t):e}function Vi(t){var e=qe(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var o=ne,r=o.baseQueue,i=n.pending;if(i!==null){if(r!==null){var s=r.next;r.next=i.next,i.next=s}o.baseQueue=r=i,n.pending=null}if(r!==null){i=r.next,o=o.baseState;var u=s=null,c=null,d=i;do{var f=d.lane;if((Kt&f)===f)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),o=d.hasEagerState?d.eagerState:t(o,d.action);else{var p={lane:f,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(u=c=p,s=o):c=c.next=p,Q.lanes|=f,Qt|=f}d=d.next}while(d!==null&&d!==i);c===null?s=o:c.next=u,Qe(o,e.memoizedState)||(Ee=!0),e.memoizedState=o,e.baseState=s,e.baseQueue=c,n.lastRenderedState=o}if(t=n.interleaved,t!==null){r=t;do i=r.lane,Q.lanes|=i,Qt|=i,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function Hi(t){var e=qe(),n=e.queue;if(n===null)throw Error(I(311));n.lastRenderedReducer=t;var o=n.dispatch,r=n.pending,i=e.memoizedState;if(r!==null){n.pending=null;var s=r=r.next;do i=t(i,s.action),s=s.next;while(s!==r);Qe(i,e.memoizedState)||(Ee=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),n.lastRenderedState=i}return[i,o]}function ef(){}function tf(t,e){var n=Q,o=qe(),r=e(),i=!Qe(o.memoizedState,r);if(i&&(o.memoizedState=r,Ee=!0),o=o.queue,Pl(rf.bind(null,n,o,t),[t]),o.getSnapshot!==e||i||se!==null&&se.memoizedState.tag&1){if(n.flags|=2048,Ao(9,of.bind(null,n,o,r,e),void 0,null),le===null)throw Error(I(349));Kt&30||nf(n,e,r)}return r}function nf(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Q.updateQueue,e===null?(e={lastEffect:null,stores:null},Q.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function of(t,e,n,o){e.value=n,e.getSnapshot=o,sf(e)&&lf(t)}function rf(t,e,n){return n(function(){sf(e)&&lf(t)})}function sf(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!Qe(t,n)}catch{return!0}}function lf(t){var e=ct(t,1);e!==null&&Ke(e,t,1,-1)}function Ga(t){var e=je();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:No,lastRenderedState:t},e.queue=t,t=t.dispatch=kh.bind(null,Q,t),[e.memoizedState,t]}function Ao(t,e,n,o){return t={tag:t,create:e,destroy:n,deps:o,next:null},e=Q.updateQueue,e===null?(e={lastEffect:null,stores:null},Q.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(o=n.next,n.next=t,t.next=o,e.lastEffect=t)),t}function af(){return qe().memoizedState}function pr(t,e,n,o){var r=je();Q.flags|=t,r.memoizedState=Ao(1|e,n,void 0,o===void 0?null:o)}function ti(t,e,n,o){var r=qe();o=o===void 0?null:o;var i=void 0;if(ne!==null){var s=ne.memoizedState;if(i=s.destroy,o!==null&&Il(o,s.deps)){r.memoizedState=Ao(e,n,i,o);return}}Q.flags|=t,r.memoizedState=Ao(1|e,n,i,o)}function Ba(t,e){return pr(8390656,8,t,e)}function Pl(t,e){return ti(2048,8,t,e)}function uf(t,e){return ti(4,2,t,e)}function df(t,e){return ti(4,4,t,e)}function cf(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function ff(t,e,n){return n=n!=null?n.concat([t]):null,ti(4,4,cf.bind(null,e,t),n)}function Rl(){}function pf(t,e){var n=qe();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Il(e,o[1])?o[0]:(n.memoizedState=[t,e],t)}function mf(t,e){var n=qe();e=e===void 0?null:e;var o=n.memoizedState;return o!==null&&e!==null&&Il(e,o[1])?o[0]:(t=t(),n.memoizedState=[t,e],t)}function hf(t,e,n){return Kt&21?(Qe(n,e)||(n=Tc(),Q.lanes|=n,Qt|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ee=!0),t.memoizedState=n)}function wh(t,e){var n=q;q=n!==0&&4>n?n:4,t(!0);var o=Fi.transition;Fi.transition={};try{t(!1),e()}finally{q=n,Fi.transition=o}}function gf(){return qe().memoizedState}function _h(t,e,n){var o=Nt(t);if(n={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null},yf(t))vf(e,n);else if(n=Xc(t,e,n,o),n!==null){var r=Te();Ke(n,t,o,r),Tf(n,e,o)}}function kh(t,e,n){var o=Nt(t),r={lane:o,action:n,hasEagerState:!1,eagerState:null,next:null};if(yf(t))vf(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var s=e.lastRenderedState,u=i(s,n);if(r.hasEagerState=!0,r.eagerState=u,Qe(u,s)){var c=e.interleaved;c===null?(r.next=r,Cl(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}n=Xc(t,e,r,o),n!==null&&(r=Te(),Ke(n,t,o,r),Tf(n,e,o))}}function yf(t){var e=t.alternate;return t===Q||e!==null&&e===Q}function vf(t,e){ao=Vr=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Tf(t,e,n){if(n&4194240){var o=e.lanes;o&=t.pendingLanes,n|=o,e.lanes=n,al(t,n)}}var Hr={readContext:Be,useCallback:fe,useContext:fe,useEffect:fe,useImperativeHandle:fe,useInsertionEffect:fe,useLayoutEffect:fe,useMemo:fe,useReducer:fe,useRef:fe,useState:fe,useDebugValue:fe,useDeferredValue:fe,useTransition:fe,useMutableSource:fe,useSyncExternalStore:fe,useId:fe,unstable_isNewReconciler:!1},Ih={readContext:Be,useCallback:function(t,e){return je().memoizedState=[t,e===void 0?null:e],t},useContext:Be,useEffect:Ba,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,pr(4194308,4,cf.bind(null,e,t),n)},useLayoutEffect:function(t,e){return pr(4194308,4,t,e)},useInsertionEffect:function(t,e){return pr(4,2,t,e)},useMemo:function(t,e){var n=je();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var o=je();return e=n!==void 0?n(e):e,o.memoizedState=o.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},o.queue=t,t=t.dispatch=_h.bind(null,Q,t),[o.memoizedState,t]},useRef:function(t){var e=je();return t={current:t},e.memoizedState=t},useState:Ga,useDebugValue:Rl,useDeferredValue:function(t){return je().memoizedState=t},useTransition:function(){var t=Ga(!1),e=t[0];return t=wh.bind(null,t[1]),je().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var o=Q,r=je();if(O){if(n===void 0)throw Error(I(407));n=n()}else{if(n=e(),le===null)throw Error(I(349));Kt&30||nf(o,e,n)}r.memoizedState=n;var i={value:n,getSnapshot:e};return r.queue=i,Ba(rf.bind(null,o,i,t),[t]),o.flags|=2048,Ao(9,of.bind(null,o,i,n,e),void 0,null),n},useId:function(){var t=je(),e=le.identifierPrefix;if(O){var n=lt,o=st;n=(o&~(1<<32-Oe(o)-1)).toString(32)+n,e=":"+e+"R"+n,n=Io++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=Eh++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},Nh={readContext:Be,useCallback:pf,useContext:Be,useEffect:Pl,useImperativeHandle:ff,useInsertionEffect:uf,useLayoutEffect:df,useMemo:mf,useReducer:Vi,useRef:af,useState:function(){return Vi(No)},useDebugValue:Rl,useDeferredValue:function(t){var e=qe();return hf(e,ne.memoizedState,t)},useTransition:function(){var t=Vi(No)[0],e=qe().memoizedState;return[t,e]},useMutableSource:ef,useSyncExternalStore:tf,useId:gf,unstable_isNewReconciler:!1},Ah={readContext:Be,useCallback:pf,useContext:Be,useEffect:Pl,useImperativeHandle:ff,useInsertionEffect:uf,useLayoutEffect:df,useMemo:mf,useReducer:Hi,useRef:af,useState:function(){return Hi(No)},useDebugValue:Rl,useDeferredValue:function(t){var e=qe();return ne===null?e.memoizedState=t:hf(e,ne.memoizedState,t)},useTransition:function(){var t=Hi(No)[0],e=qe().memoizedState;return[t,e]},useMutableSource:ef,useSyncExternalStore:tf,useId:gf,unstable_isNewReconciler:!1};function We(t,e){if(t&&t.defaultProps){e=X({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}function ws(t,e,n,o){e=t.memoizedState,n=n(o,e),n=n==null?e:X({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var ni={isMounted:function(t){return(t=t._reactInternals)?en(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var o=Te(),r=Nt(t),i=at(o,r);i.payload=e,n!=null&&(i.callback=n),e=kt(t,i,r),e!==null&&(Ke(e,t,r,o),cr(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var o=Te(),r=Nt(t),i=at(o,r);i.tag=1,i.payload=e,n!=null&&(i.callback=n),e=kt(t,i,r),e!==null&&(Ke(e,t,r,o),cr(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=Te(),o=Nt(t),r=at(n,o);r.tag=2,e!=null&&(r.callback=e),e=kt(t,r,o),e!==null&&(Ke(e,t,o,n),cr(e,t,o))}};function qa(t,e,n,o,r,i,s){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,i,s):e.prototype&&e.prototype.isPureReactComponent?!So(n,o)||!So(r,i):!0}function xf(t,e,n){var o=!1,r=Rt,i=e.contextType;return typeof i=="object"&&i!==null?i=Be(i):(r=_e(e)?Yt:ye.current,o=e.contextTypes,i=(o=o!=null)?An(t,r):Rt),e=new e(n,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ni,t.stateNode=e,e._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function $a(t,e,n,o){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,o),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,o),e.state!==t&&ni.enqueueReplaceState(e,e.state,null)}function _s(t,e,n,o){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs={},El(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Be(i):(i=_e(e)?Yt:ye.current,r.context=An(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ws(t,e,i,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ni.enqueueReplaceState(r,r.state,null),Ur(t,n,r,o),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Dn(t,e){try{var n="",o=e;do n+=om(o),o=o.return;while(o);var r=n}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Gi(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function ks(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var Ph=typeof WeakMap=="function"?WeakMap:Map;function Sf(t,e,n){n=at(-1,n),n.tag=3,n.payload={element:null};var o=e.value;return n.callback=function(){Br||(Br=!0,Fs=o),ks(t,e)},n}function Cf(t,e,n){n=at(-1,n),n.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var r=e.value;n.payload=function(){return o(r)},n.callback=function(){ks(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){ks(t,e),typeof o!="function"&&(It===null?It=new Set([this]):It.add(this));var s=e.stack;this.componentDidCatch(e.value,{componentStack:s!==null?s:""})}),n}function za(t,e,n){var o=t.pingCache;if(o===null){o=t.pingCache=new Ph;var r=new Set;o.set(e,r)}else r=o.get(e),r===void 0&&(r=new Set,o.set(e,r));r.has(n)||(r.add(n),t=Jh.bind(null,t,e,n),e.then(t,t))}function Ja(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Wa(t,e,n,o,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=at(-1,1),e.tag=2,kt(n,e,1))),n.lanes|=1),t)}var Rh=pt.ReactCurrentOwner,Ee=!1;function ve(t,e,n,o){e.child=t===null?Qc(e,null,n,o):Rn(e,t.child,n,o)}function ba(t,e,n,o,r){n=n.render;var i=e.ref;return En(e,r),o=Nl(t,e,n,o,i,r),n=Al(),t!==null&&!Ee?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ft(t,e,r)):(O&&n&&gl(e),e.flags|=1,ve(t,e,o,r),e.child)}function Ya(t,e,n,o,r){if(t===null){var i=n.type;return typeof i=="function"&&!Gl(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=i,Ef(t,e,i,o,r)):(t=yr(n.type,null,o,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var s=i.memoizedProps;if(n=n.compare,n=n!==null?n:So,n(s,o)&&t.ref===e.ref)return ft(t,e,r)}return e.flags|=1,t=At(i,o),t.ref=e.ref,t.return=e,e.child=t}function Ef(t,e,n,o,r){if(t!==null){var i=t.memoizedProps;if(So(i,o)&&t.ref===e.ref)if(Ee=!1,e.pendingProps=o=i,(t.lanes&r)!==0)t.flags&131072&&(Ee=!0);else return e.lanes=t.lanes,ft(t,e,r)}return Is(t,e,n,o,r)}function wf(t,e,n){var o=e.pendingProps,r=o.children,i=t!==null?t.memoizedState:null;if(o.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},J(gn,Ae),Ae|=n;else{if(!(n&1073741824))return t=i!==null?i.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,J(gn,Ae),Ae|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=i!==null?i.baseLanes:n,J(gn,Ae),Ae|=o}else i!==null?(o=i.baseLanes|n,e.memoizedState=null):o=n,J(gn,Ae),Ae|=o;return ve(t,e,r,n),e.child}function _f(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function Is(t,e,n,o,r){var i=_e(n)?Yt:ye.current;return i=An(e,i),En(e,r),n=Nl(t,e,n,o,i,r),o=Al(),t!==null&&!Ee?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ft(t,e,r)):(O&&o&&gl(e),e.flags|=1,ve(t,e,n,r),e.child)}function Oa(t,e,n,o,r){if(_e(n)){var i=!0;Pr(e)}else i=!1;if(En(e,r),e.stateNode===null)mr(t,e),xf(e,n,o),_s(e,n,o,r),o=!0;else if(t===null){var s=e.stateNode,u=e.memoizedProps;s.props=u;var c=s.context,d=n.contextType;typeof d=="object"&&d!==null?d=Be(d):(d=_e(n)?Yt:ye.current,d=An(e,d));var f=n.getDerivedStateFromProps,p=typeof f=="function"||typeof s.getSnapshotBeforeUpdate=="function";p||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==o||c!==d)&&$a(e,s,o,d),yt=!1;var m=e.memoizedState;s.state=m,Ur(e,o,s,r),c=e.memoizedState,u!==o||m!==c||we.current||yt?(typeof f=="function"&&(ws(e,n,f,o),c=e.memoizedState),(u=yt||qa(e,n,u,o,m,c,d))?(p||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount()),typeof s.componentDidMount=="function"&&(e.flags|=4194308)):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=o,e.memoizedState=c),s.props=o,s.state=c,s.context=d,o=u):(typeof s.componentDidMount=="function"&&(e.flags|=4194308),o=!1)}else{s=e.stateNode,Zc(t,e),u=e.memoizedProps,d=e.type===e.elementType?u:We(e.type,u),s.props=d,p=e.pendingProps,m=s.context,c=n.contextType,typeof c=="object"&&c!==null?c=Be(c):(c=_e(n)?Yt:ye.current,c=An(e,c));var y=n.getDerivedStateFromProps;(f=typeof y=="function"||typeof s.getSnapshotBeforeUpdate=="function")||typeof s.UNSAFE_componentWillReceiveProps!="function"&&typeof s.componentWillReceiveProps!="function"||(u!==p||m!==c)&&$a(e,s,o,c),yt=!1,m=e.memoizedState,s.state=m,Ur(e,o,s,r);var x=e.memoizedState;u!==p||m!==x||we.current||yt?(typeof y=="function"&&(ws(e,n,y,o),x=e.memoizedState),(d=yt||qa(e,n,d,o,m,x,c)||!1)?(f||typeof s.UNSAFE_componentWillUpdate!="function"&&typeof s.componentWillUpdate!="function"||(typeof s.componentWillUpdate=="function"&&s.componentWillUpdate(o,x,c),typeof s.UNSAFE_componentWillUpdate=="function"&&s.UNSAFE_componentWillUpdate(o,x,c)),typeof s.componentDidUpdate=="function"&&(e.flags|=4),typeof s.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),e.memoizedProps=o,e.memoizedState=x),s.props=o,s.state=x,s.context=c,o=d):(typeof s.componentDidUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=4),typeof s.getSnapshotBeforeUpdate!="function"||u===t.memoizedProps&&m===t.memoizedState||(e.flags|=1024),o=!1)}return Ns(t,e,n,o,i,r)}function Ns(t,e,n,o,r,i){_f(t,e);var s=(e.flags&128)!==0;if(!o&&!s)return r&&Da(e,n,!1),ft(t,e,i);o=e.stateNode,Rh.current=e;var u=s&&typeof n.getDerivedStateFromError!="function"?null:o.render();return e.flags|=1,t!==null&&s?(e.child=Rn(e,t.child,null,i),e.child=Rn(e,null,u,i)):ve(t,e,u,i),e.memoizedState=o.state,r&&Da(e,n,!0),e.child}function kf(t){var e=t.stateNode;e.pendingContext?Ma(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Ma(t,e.context,!1),wl(t,e.containerInfo)}function Ka(t,e,n,o,r){return Pn(),vl(r),e.flags|=256,ve(t,e,n,o),e.child}var As={dehydrated:null,treeContext:null,retryLane:0};function Ps(t){return{baseLanes:t,cachePool:null,transitions:null}}function If(t,e,n){var o=e.pendingProps,r=K.current,i=!1,s=(e.flags&128)!==0,u;if((u=s)||(u=t!==null&&t.memoizedState===null?!1:(r&2)!==0),u?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),J(K,r&1),t===null)return Cs(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(s=o.children,t=o.fallback,i?(o=e.mode,i=e.child,s={mode:"hidden",children:s},!(o&1)&&i!==null?(i.childLanes=0,i.pendingProps=s):i=ii(s,o,0,null),t=Wt(t,o,n,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Ps(n),e.memoizedState=As,t):Ml(e,s));if(r=t.memoizedState,r!==null&&(u=r.dehydrated,u!==null))return Mh(t,e,s,o,u,r,n);if(i){i=o.fallback,s=e.mode,r=t.child,u=r.sibling;var c={mode:"hidden",children:o.children};return!(s&1)&&e.child!==r?(o=e.child,o.childLanes=0,o.pendingProps=c,e.deletions=null):(o=At(r,c),o.subtreeFlags=r.subtreeFlags&14680064),u!==null?i=At(u,i):(i=Wt(i,s,n,null),i.flags|=2),i.return=e,o.return=e,o.sibling=i,e.child=o,o=i,i=e.child,s=t.child.memoizedState,s=s===null?Ps(n):{baseLanes:s.baseLanes|n,cachePool:null,transitions:s.transitions},i.memoizedState=s,i.childLanes=t.childLanes&~n,e.memoizedState=As,o}return i=t.child,t=i.sibling,o=At(i,{mode:"visible",children:o.children}),!(e.mode&1)&&(o.lanes=n),o.return=e,o.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=o,e.memoizedState=null,o}function Ml(t,e){return e=ii({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function nr(t,e,n,o){return o!==null&&vl(o),Rn(e,t.child,null,n),t=Ml(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function Mh(t,e,n,o,r,i,s){if(n)return e.flags&256?(e.flags&=-257,o=Gi(Error(I(422))),nr(t,e,s,o)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=o.fallback,r=e.mode,o=ii({mode:"visible",children:o.children},r,0,null),i=Wt(i,r,s,null),i.flags|=2,o.return=e,i.return=e,o.sibling=i,e.child=o,e.mode&1&&Rn(e,t.child,null,s),e.child.memoizedState=Ps(s),e.memoizedState=As,i);if(!(e.mode&1))return nr(t,e,s,null);if(r.data==="$!"){if(o=r.nextSibling&&r.nextSibling.dataset,o)var u=o.dgst;return o=u,i=Error(I(419)),o=Gi(i,o,void 0),nr(t,e,s,o)}if(u=(s&t.childLanes)!==0,Ee||u){if(o=le,o!==null){switch(s&-s){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(o.suspendedLanes|s)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,ct(t,r),Ke(o,t,r,-1))}return Hl(),o=Gi(Error(I(421))),nr(t,e,s,o)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Wh.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Pe=_t(r.nextSibling),Re=e,O=!0,Ye=null,t!==null&&(Ue[Fe++]=st,Ue[Fe++]=lt,Ue[Fe++]=Ot,st=t.id,lt=t.overflow,Ot=e),e=Ml(e,o.children),e.flags|=4096,e)}function Qa(t,e,n){t.lanes|=e;var o=t.alternate;o!==null&&(o.lanes|=e),Es(t.return,e,n)}function Bi(t,e,n,o,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:o,tail:n,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=o,i.tail=n,i.tailMode=r)}function Nf(t,e,n){var o=e.pendingProps,r=o.revealOrder,i=o.tail;if(ve(t,e,o.children,n),o=K.current,o&2)o=o&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Qa(t,n,e);else if(t.tag===19)Qa(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(J(K,o),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&Fr(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),Bi(e,!1,r,n,i);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Fr(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}Bi(e,!0,n,null,i);break;case"together":Bi(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function mr(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ft(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),Qt|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,n=At(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=At(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function Dh(t,e,n){switch(e.tag){case 3:kf(e),Pn();break;case 5:jc(e);break;case 1:_e(e.type)&&Pr(e);break;case 4:wl(e,e.stateNode.containerInfo);break;case 10:var o=e.type._context,r=e.memoizedProps.value;J(Dr,o._currentValue),o._currentValue=r;break;case 13:if(o=e.memoizedState,o!==null)return o.dehydrated!==null?(J(K,K.current&1),e.flags|=128,null):n&e.child.childLanes?If(t,e,n):(J(K,K.current&1),t=ft(t,e,n),t!==null?t.sibling:null);J(K,K.current&1);break;case 19:if(o=(n&e.childLanes)!==0,t.flags&128){if(o)return Nf(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),J(K,K.current),o)break;return null;case 22:case 23:return e.lanes=0,wf(t,e,n)}return ft(t,e,n)}var Af,Rs,Pf,Rf;Af=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Rs=function(){};Pf=function(t,e,n,o){var r=t.memoizedProps;if(r!==o){t=e.stateNode,zt(nt.current);var i=null;switch(n){case"input":r=ji(t,r),o=ji(t,o),i=[];break;case"select":r=X({},r,{value:void 0}),o=X({},o,{value:void 0}),i=[];break;case"textarea":r=ns(t,r),o=ns(t,o),i=[];break;default:typeof r.onClick!="function"&&typeof o.onClick=="function"&&(t.onclick=Nr)}rs(n,o);var s;n=null;for(d in r)if(!o.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var u=r[d];for(s in u)u.hasOwnProperty(s)&&(n||(n={}),n[s]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(mo.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in o){var c=o[d];if(u=r!=null?r[d]:void 0,o.hasOwnProperty(d)&&c!==u&&(c!=null||u!=null))if(d==="style")if(u){for(s in u)!u.hasOwnProperty(s)||c&&c.hasOwnProperty(s)||(n||(n={}),n[s]="");for(s in c)c.hasOwnProperty(s)&&u[s]!==c[s]&&(n||(n={}),n[s]=c[s])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,u=u?u.__html:void 0,c!=null&&u!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(mo.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&W("scroll",t),i||u===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Rf=function(t,e,n,o){n!==o&&(e.flags|=4)};function Qn(t,e){if(!O)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var o=null;n!==null;)n.alternate!==null&&(o=n),n=n.sibling;o===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function pe(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,o=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags&14680064,o|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,o|=r.subtreeFlags,o|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=o,t.childLanes=n,e}function Lh(t,e,n){var o=e.pendingProps;switch(yl(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return pe(e),null;case 1:return _e(e.type)&&Ar(),pe(e),null;case 3:return o=e.stateNode,Mn(),Y(we),Y(ye),kl(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&(er(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,Ye!==null&&(Gs(Ye),Ye=null))),Rs(t,e),pe(e),null;case 5:_l(e);var r=zt(ko.current);if(n=e.type,t!==null&&e.stateNode!=null)Pf(t,e,n,o,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!o){if(e.stateNode===null)throw Error(I(166));return pe(e),null}if(t=zt(nt.current),er(e)){o=e.stateNode,n=e.type;var i=e.memoizedProps;switch(o[et]=e,o[wo]=i,t=(e.mode&1)!==0,n){case"dialog":W("cancel",o),W("close",o);break;case"iframe":case"object":case"embed":W("load",o);break;case"video":case"audio":for(r=0;r<no.length;r++)W(no[r],o);break;case"source":W("error",o);break;case"img":case"image":case"link":W("error",o),W("load",o);break;case"details":W("toggle",o);break;case"input":ia(o,i),W("invalid",o);break;case"select":o._wrapperState={wasMultiple:!!i.multiple},W("invalid",o);break;case"textarea":la(o,i),W("invalid",o)}rs(n,i),r=null;for(var s in i)if(i.hasOwnProperty(s)){var u=i[s];s==="children"?typeof u=="string"?o.textContent!==u&&(i.suppressHydrationWarning!==!0&&jo(o.textContent,u,t),r=["children",u]):typeof u=="number"&&o.textContent!==""+u&&(i.suppressHydrationWarning!==!0&&jo(o.textContent,u,t),r=["children",""+u]):mo.hasOwnProperty(s)&&u!=null&&s==="onScroll"&&W("scroll",o)}switch(n){case"input":Wo(o),sa(o,i,!0);break;case"textarea":Wo(o),aa(o);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(o.onclick=Nr)}o=r,e.updateQueue=o,o!==null&&(e.flags|=4)}else{s=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=rc(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=s.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof o.is=="string"?t=s.createElement(n,{is:o.is}):(t=s.createElement(n),n==="select"&&(s=t,o.multiple?s.multiple=!0:o.size&&(s.size=o.size))):t=s.createElementNS(t,n),t[et]=e,t[wo]=o,Af(t,e,!1,!1),e.stateNode=t;e:{switch(s=is(n,o),n){case"dialog":W("cancel",t),W("close",t),r=o;break;case"iframe":case"object":case"embed":W("load",t),r=o;break;case"video":case"audio":for(r=0;r<no.length;r++)W(no[r],t);r=o;break;case"source":W("error",t),r=o;break;case"img":case"image":case"link":W("error",t),W("load",t),r=o;break;case"details":W("toggle",t),r=o;break;case"input":ia(t,o),r=ji(t,o),W("invalid",t);break;case"option":r=o;break;case"select":t._wrapperState={wasMultiple:!!o.multiple},r=X({},o,{value:void 0}),W("invalid",t);break;case"textarea":la(t,o),r=ns(t,o),W("invalid",t);break;default:r=o}rs(n,r),u=r;for(i in u)if(u.hasOwnProperty(i)){var c=u[i];i==="style"?lc(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&ic(t,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&ho(t,c):typeof c=="number"&&ho(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(mo.hasOwnProperty(i)?c!=null&&i==="onScroll"&&W("scroll",t):c!=null&&nl(t,i,c,s))}switch(n){case"input":Wo(t),sa(t,o,!1);break;case"textarea":Wo(t),aa(t);break;case"option":o.value!=null&&t.setAttribute("value",""+Pt(o.value));break;case"select":t.multiple=!!o.multiple,i=o.value,i!=null?Tn(t,!!o.multiple,i,!1):o.defaultValue!=null&&Tn(t,!!o.multiple,o.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Nr)}switch(n){case"button":case"input":case"select":case"textarea":o=!!o.autoFocus;break e;case"img":o=!0;break e;default:o=!1}}o&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return pe(e),null;case 6:if(t&&e.stateNode!=null)Rf(t,e,t.memoizedProps,o);else{if(typeof o!="string"&&e.stateNode===null)throw Error(I(166));if(n=zt(ko.current),zt(nt.current),er(e)){if(o=e.stateNode,n=e.memoizedProps,o[et]=e,(i=o.nodeValue!==n)&&(t=Re,t!==null))switch(t.tag){case 3:jo(o.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&jo(o.nodeValue,n,(t.mode&1)!==0)}i&&(e.flags|=4)}else o=(n.nodeType===9?n:n.ownerDocument).createTextNode(o),o[et]=e,e.stateNode=o}return pe(e),null;case 13:if(Y(K),o=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(O&&Pe!==null&&e.mode&1&&!(e.flags&128))Oc(),Pn(),e.flags|=98560,i=!1;else if(i=er(e),o!==null&&o.dehydrated!==null){if(t===null){if(!i)throw Error(I(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[et]=e}else Pn(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;pe(e),i=!1}else Ye!==null&&(Gs(Ye),Ye=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(o=o!==null,o!==(t!==null&&t.memoizedState!==null)&&o&&(e.child.flags|=8192,e.mode&1&&(t===null||K.current&1?oe===0&&(oe=3):Hl())),e.updateQueue!==null&&(e.flags|=4),pe(e),null);case 4:return Mn(),Rs(t,e),t===null&&Co(e.stateNode.containerInfo),pe(e),null;case 10:return Sl(e.type._context),pe(e),null;case 17:return _e(e.type)&&Ar(),pe(e),null;case 19:if(Y(K),i=e.memoizedState,i===null)return pe(e),null;if(o=(e.flags&128)!==0,s=i.rendering,s===null)if(o)Qn(i,!1);else{if(oe!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(s=Fr(t),s!==null){for(e.flags|=128,Qn(i,!1),o=s.updateQueue,o!==null&&(e.updateQueue=o,e.flags|=4),e.subtreeFlags=0,o=n,n=e.child;n!==null;)i=n,t=o,i.flags&=14680066,s=i.alternate,s===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=s.childLanes,i.lanes=s.lanes,i.child=s.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=s.memoizedProps,i.memoizedState=s.memoizedState,i.updateQueue=s.updateQueue,i.type=s.type,t=s.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return J(K,K.current&1|2),e.child}t=t.sibling}i.tail!==null&&ee()>Ln&&(e.flags|=128,o=!0,Qn(i,!1),e.lanes=4194304)}else{if(!o)if(t=Fr(s),t!==null){if(e.flags|=128,o=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),Qn(i,!0),i.tail===null&&i.tailMode==="hidden"&&!s.alternate&&!O)return pe(e),null}else 2*ee()-i.renderingStartTime>Ln&&n!==1073741824&&(e.flags|=128,o=!0,Qn(i,!1),e.lanes=4194304);i.isBackwards?(s.sibling=e.child,e.child=s):(n=i.last,n!==null?n.sibling=s:e.child=s,i.last=s)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ee(),e.sibling=null,n=K.current,J(K,o?n&1|2:n&1),e):(pe(e),null);case 22:case 23:return Vl(),o=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(e.flags|=8192),o&&e.mode&1?Ae&1073741824&&(pe(e),e.subtreeFlags&6&&(e.flags|=8192)):pe(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function Uh(t,e){switch(yl(e),e.tag){case 1:return _e(e.type)&&Ar(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return Mn(),Y(we),Y(ye),kl(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return _l(e),null;case 13:if(Y(K),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));Pn()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Y(K),null;case 4:return Mn(),null;case 10:return Sl(e.type._context),null;case 22:case 23:return Vl(),null;case 24:return null;default:return null}}var or=!1,me=!1,Fh=typeof WeakSet=="function"?WeakSet:Set,P=null;function hn(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(o){Z(t,e,o)}else n.current=null}function Ms(t,e,n){try{n()}catch(o){Z(t,e,o)}}var Xa=!1;function Vh(t,e){if(hs=_r,t=Uc(),hl(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var o=n.getSelection&&n.getSelection();if(o&&o.rangeCount!==0){n=o.anchorNode;var r=o.anchorOffset,i=o.focusNode;o=o.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var s=0,u=-1,c=-1,d=0,f=0,p=t,m=null;t:for(;;){for(var y;p!==n||r!==0&&p.nodeType!==3||(u=s+r),p!==i||o!==0&&p.nodeType!==3||(c=s+o),p.nodeType===3&&(s+=p.nodeValue.length),(y=p.firstChild)!==null;)m=p,p=y;for(;;){if(p===t)break t;if(m===n&&++d===r&&(u=s),m===i&&++f===o&&(c=s),(y=p.nextSibling)!==null)break;p=m,m=p.parentNode}p=y}n=u===-1||c===-1?null:{start:u,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(gs={focusedElem:t,selectionRange:n},_r=!1,P=e;P!==null;)if(e=P,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,P=t;else for(;P!==null;){e=P;try{var x=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(x!==null){var S=x.memoizedProps,w=x.memoizedState,v=e.stateNode,g=v.getSnapshotBeforeUpdate(e.elementType===e.type?S:We(e.type,S),w);v.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var T=e.stateNode.containerInfo;T.nodeType===1?T.textContent="":T.nodeType===9&&T.documentElement&&T.removeChild(T.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(C){Z(e,e.return,C)}if(t=e.sibling,t!==null){t.return=e.return,P=t;break}P=e.return}return x=Xa,Xa=!1,x}function uo(t,e,n){var o=e.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var r=o=o.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Ms(e,n,i)}r=r.next}while(r!==o)}}function oi(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var o=n.create;n.destroy=o()}n=n.next}while(n!==e)}}function Ds(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function Mf(t){var e=t.alternate;e!==null&&(t.alternate=null,Mf(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[et],delete e[wo],delete e[Ts],delete e[Th],delete e[xh])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Df(t){return t.tag===5||t.tag===3||t.tag===4}function Za(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Df(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Ls(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Nr));else if(o!==4&&(t=t.child,t!==null))for(Ls(t,e,n),t=t.sibling;t!==null;)Ls(t,e,n),t=t.sibling}function Us(t,e,n){var o=t.tag;if(o===5||o===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(o!==4&&(t=t.child,t!==null))for(Us(t,e,n),t=t.sibling;t!==null;)Us(t,e,n),t=t.sibling}var ae=null,be=!1;function ht(t,e,n){for(n=n.child;n!==null;)Lf(t,e,n),n=n.sibling}function Lf(t,e,n){if(tt&&typeof tt.onCommitFiberUnmount=="function")try{tt.onCommitFiberUnmount(Kr,n)}catch{}switch(n.tag){case 5:me||hn(n,e);case 6:var o=ae,r=be;ae=null,ht(t,e,n),ae=o,be=r,ae!==null&&(be?(t=ae,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):ae.removeChild(n.stateNode));break;case 18:ae!==null&&(be?(t=ae,n=n.stateNode,t.nodeType===8?Di(t.parentNode,n):t.nodeType===1&&Di(t,n),To(t)):Di(ae,n.stateNode));break;case 4:o=ae,r=be,ae=n.stateNode.containerInfo,be=!0,ht(t,e,n),ae=o,be=r;break;case 0:case 11:case 14:case 15:if(!me&&(o=n.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){r=o=o.next;do{var i=r,s=i.destroy;i=i.tag,s!==void 0&&(i&2||i&4)&&Ms(n,e,s),r=r.next}while(r!==o)}ht(t,e,n);break;case 1:if(!me&&(hn(n,e),o=n.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=n.memoizedProps,o.state=n.memoizedState,o.componentWillUnmount()}catch(u){Z(n,e,u)}ht(t,e,n);break;case 21:ht(t,e,n);break;case 22:n.mode&1?(me=(o=me)||n.memoizedState!==null,ht(t,e,n),me=o):ht(t,e,n);break;default:ht(t,e,n)}}function ja(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new Fh),e.forEach(function(o){var r=bh.bind(null,t,o);n.has(o)||(n.add(o),o.then(r,r))})}}function ze(t,e){var n=e.deletions;if(n!==null)for(var o=0;o<n.length;o++){var r=n[o];try{var i=t,s=e,u=s;e:for(;u!==null;){switch(u.tag){case 5:ae=u.stateNode,be=!1;break e;case 3:ae=u.stateNode.containerInfo,be=!0;break e;case 4:ae=u.stateNode.containerInfo,be=!0;break e}u=u.return}if(ae===null)throw Error(I(160));Lf(i,s,r),ae=null,be=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Z(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Uf(e,t),e=e.sibling}function Uf(t,e){var n=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(ze(e,t),Ze(t),o&4){try{uo(3,t,t.return),oi(3,t)}catch(S){Z(t,t.return,S)}try{uo(5,t,t.return)}catch(S){Z(t,t.return,S)}}break;case 1:ze(e,t),Ze(t),o&512&&n!==null&&hn(n,n.return);break;case 5:if(ze(e,t),Ze(t),o&512&&n!==null&&hn(n,n.return),t.flags&32){var r=t.stateNode;try{ho(r,"")}catch(S){Z(t,t.return,S)}}if(o&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,s=n!==null?n.memoizedProps:i,u=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{u==="input"&&i.type==="radio"&&i.name!=null&&nc(r,i),is(u,s);var d=is(u,i);for(s=0;s<c.length;s+=2){var f=c[s],p=c[s+1];f==="style"?lc(r,p):f==="dangerouslySetInnerHTML"?ic(r,p):f==="children"?ho(r,p):nl(r,f,p,d)}switch(u){case"input":es(r,i);break;case"textarea":oc(r,i);break;case"select":var m=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var y=i.value;y!=null?Tn(r,!!i.multiple,y,!1):m!==!!i.multiple&&(i.defaultValue!=null?Tn(r,!!i.multiple,i.defaultValue,!0):Tn(r,!!i.multiple,i.multiple?[]:"",!1))}r[wo]=i}catch(S){Z(t,t.return,S)}}break;case 6:if(ze(e,t),Ze(t),o&4){if(t.stateNode===null)throw Error(I(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(S){Z(t,t.return,S)}}break;case 3:if(ze(e,t),Ze(t),o&4&&n!==null&&n.memoizedState.isDehydrated)try{To(e.containerInfo)}catch(S){Z(t,t.return,S)}break;case 4:ze(e,t),Ze(t);break;case 13:ze(e,t),Ze(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Ul=ee())),o&4&&ja(t);break;case 22:if(f=n!==null&&n.memoizedState!==null,t.mode&1?(me=(d=me)||f,ze(e,t),me=d):ze(e,t),Ze(t),o&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!f&&t.mode&1)for(P=t,f=t.child;f!==null;){for(p=P=f;P!==null;){switch(m=P,y=m.child,m.tag){case 0:case 11:case 14:case 15:uo(4,m,m.return);break;case 1:hn(m,m.return);var x=m.stateNode;if(typeof x.componentWillUnmount=="function"){o=m,n=m.return;try{e=o,x.props=e.memoizedProps,x.state=e.memoizedState,x.componentWillUnmount()}catch(S){Z(o,n,S)}}break;case 5:hn(m,m.return);break;case 22:if(m.memoizedState!==null){tu(p);continue}}y!==null?(y.return=m,P=y):tu(p)}f=f.sibling}e:for(f=null,p=t;;){if(p.tag===5){if(f===null){f=p;try{r=p.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(u=p.stateNode,c=p.memoizedProps.style,s=c!=null&&c.hasOwnProperty("display")?c.display:null,u.style.display=sc("display",s))}catch(S){Z(t,t.return,S)}}}else if(p.tag===6){if(f===null)try{p.stateNode.nodeValue=d?"":p.memoizedProps}catch(S){Z(t,t.return,S)}}else if((p.tag!==22&&p.tag!==23||p.memoizedState===null||p===t)&&p.child!==null){p.child.return=p,p=p.child;continue}if(p===t)break e;for(;p.sibling===null;){if(p.return===null||p.return===t)break e;f===p&&(f=null),p=p.return}f===p&&(f=null),p.sibling.return=p.return,p=p.sibling}}break;case 19:ze(e,t),Ze(t),o&4&&ja(t);break;case 21:break;default:ze(e,t),Ze(t)}}function Ze(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Df(n)){var o=n;break e}n=n.return}throw Error(I(160))}switch(o.tag){case 5:var r=o.stateNode;o.flags&32&&(ho(r,""),o.flags&=-33);var i=Za(t);Us(t,i,r);break;case 3:case 4:var s=o.stateNode.containerInfo,u=Za(t);Ls(t,u,s);break;default:throw Error(I(161))}}catch(c){Z(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Hh(t,e,n){P=t,Ff(t)}function Ff(t,e,n){for(var o=(t.mode&1)!==0;P!==null;){var r=P,i=r.child;if(r.tag===22&&o){var s=r.memoizedState!==null||or;if(!s){var u=r.alternate,c=u!==null&&u.memoizedState!==null||me;u=or;var d=me;if(or=s,(me=c)&&!d)for(P=r;P!==null;)s=P,c=s.child,s.tag===22&&s.memoizedState!==null?nu(r):c!==null?(c.return=s,P=c):nu(r);for(;i!==null;)P=i,Ff(i),i=i.sibling;P=r,or=u,me=d}eu(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,P=i):eu(t)}}function eu(t){for(;P!==null;){var e=P;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:me||oi(5,e);break;case 1:var o=e.stateNode;if(e.flags&4&&!me)if(n===null)o.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:We(e.type,n.memoizedProps);o.componentDidUpdate(r,n.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Ha(e,i,o);break;case 3:var s=e.updateQueue;if(s!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Ha(e,s,n)}break;case 5:var u=e.stateNode;if(n===null&&e.flags&4){n=u;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var f=d.memoizedState;if(f!==null){var p=f.dehydrated;p!==null&&To(p)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}me||e.flags&512&&Ds(e)}catch(m){Z(e,e.return,m)}}if(e===t){P=null;break}if(n=e.sibling,n!==null){n.return=e.return,P=n;break}P=e.return}}function tu(t){for(;P!==null;){var e=P;if(e===t){P=null;break}var n=e.sibling;if(n!==null){n.return=e.return,P=n;break}P=e.return}}function nu(t){for(;P!==null;){var e=P;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{oi(4,e)}catch(c){Z(e,n,c)}break;case 1:var o=e.stateNode;if(typeof o.componentDidMount=="function"){var r=e.return;try{o.componentDidMount()}catch(c){Z(e,r,c)}}var i=e.return;try{Ds(e)}catch(c){Z(e,i,c)}break;case 5:var s=e.return;try{Ds(e)}catch(c){Z(e,s,c)}}}catch(c){Z(e,e.return,c)}if(e===t){P=null;break}var u=e.sibling;if(u!==null){u.return=e.return,P=u;break}P=e.return}}var Gh=Math.ceil,Gr=pt.ReactCurrentDispatcher,Dl=pt.ReactCurrentOwner,He=pt.ReactCurrentBatchConfig,G=0,le=null,te=null,ue=0,Ae=0,gn=Dt(0),oe=0,Po=null,Qt=0,ri=0,Ll=0,co=null,Ce=null,Ul=0,Ln=1/0,ot=null,Br=!1,Fs=null,It=null,rr=!1,St=null,qr=0,fo=0,Vs=null,hr=-1,gr=0;function Te(){return G&6?ee():hr!==-1?hr:hr=ee()}function Nt(t){return t.mode&1?G&2&&ue!==0?ue&-ue:Ch.transition!==null?(gr===0&&(gr=Tc()),gr):(t=q,t!==0||(t=window.event,t=t===void 0?16:kc(t.type)),t):1}function Ke(t,e,n,o){if(50<fo)throw fo=0,Vs=null,Error(I(185));Do(t,n,o),(!(G&2)||t!==le)&&(t===le&&(!(G&2)&&(ri|=n),oe===4&&Tt(t,ue)),ke(t,o),n===1&&G===0&&!(e.mode&1)&&(Ln=ee()+500,ei&&Lt()))}function ke(t,e){var n=t.callbackNode;Cm(t,e);var o=wr(t,t===le?ue:0);if(o===0)n!==null&&ca(n),t.callbackNode=null,t.callbackPriority=0;else if(e=o&-o,t.callbackPriority!==e){if(n!=null&&ca(n),e===1)t.tag===0?Sh(ou.bind(null,t)):Wc(ou.bind(null,t)),yh(function(){!(G&6)&&Lt()}),n=null;else{switch(xc(o)){case 1:n=ll;break;case 4:n=yc;break;case 16:n=Er;break;case 536870912:n=vc;break;default:n=Er}n=Jf(n,Vf.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Vf(t,e){if(hr=-1,gr=0,G&6)throw Error(I(327));var n=t.callbackNode;if(wn()&&t.callbackNode!==n)return null;var o=wr(t,t===le?ue:0);if(o===0)return null;if(o&30||o&t.expiredLanes||e)e=$r(t,o);else{e=o;var r=G;G|=2;var i=Gf();(le!==t||ue!==e)&&(ot=null,Ln=ee()+500,Jt(t,e));do try{$h();break}catch(u){Hf(t,u)}while(!0);xl(),Gr.current=i,G=r,te!==null?e=0:(le=null,ue=0,e=oe)}if(e!==0){if(e===2&&(r=ds(t),r!==0&&(o=r,e=Hs(t,r))),e===1)throw n=Po,Jt(t,0),Tt(t,o),ke(t,ee()),n;if(e===6)Tt(t,o);else{if(r=t.current.alternate,!(o&30)&&!Bh(r)&&(e=$r(t,o),e===2&&(i=ds(t),i!==0&&(o=i,e=Hs(t,i))),e===1))throw n=Po,Jt(t,0),Tt(t,o),ke(t,ee()),n;switch(t.finishedWork=r,t.finishedLanes=o,e){case 0:case 1:throw Error(I(345));case 2:Bt(t,Ce,ot);break;case 3:if(Tt(t,o),(o&130023424)===o&&(e=Ul+500-ee(),10<e)){if(wr(t,0)!==0)break;if(r=t.suspendedLanes,(r&o)!==o){Te(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=vs(Bt.bind(null,t,Ce,ot),e);break}Bt(t,Ce,ot);break;case 4:if(Tt(t,o),(o&4194240)===o)break;for(e=t.eventTimes,r=-1;0<o;){var s=31-Oe(o);i=1<<s,s=e[s],s>r&&(r=s),o&=~i}if(o=r,o=ee()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*Gh(o/1960))-o,10<o){t.timeoutHandle=vs(Bt.bind(null,t,Ce,ot),o);break}Bt(t,Ce,ot);break;case 5:Bt(t,Ce,ot);break;default:throw Error(I(329))}}}return ke(t,ee()),t.callbackNode===n?Vf.bind(null,t):null}function Hs(t,e){var n=co;return t.current.memoizedState.isDehydrated&&(Jt(t,e).flags|=256),t=$r(t,e),t!==2&&(e=Ce,Ce=n,e!==null&&Gs(e)),t}function Gs(t){Ce===null?Ce=t:Ce.push.apply(Ce,t)}function Bh(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var o=0;o<n.length;o++){var r=n[o],i=r.getSnapshot;r=r.value;try{if(!Qe(i(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function Tt(t,e){for(e&=~Ll,e&=~ri,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-Oe(e),o=1<<n;t[n]=-1,e&=~o}}function ou(t){if(G&6)throw Error(I(327));wn();var e=wr(t,0);if(!(e&1))return ke(t,ee()),null;var n=$r(t,e);if(t.tag!==0&&n===2){var o=ds(t);o!==0&&(e=o,n=Hs(t,o))}if(n===1)throw n=Po,Jt(t,0),Tt(t,e),ke(t,ee()),n;if(n===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Bt(t,Ce,ot),ke(t,ee()),null}function Fl(t,e){var n=G;G|=1;try{return t(e)}finally{G=n,G===0&&(Ln=ee()+500,ei&&Lt())}}function Xt(t){St!==null&&St.tag===0&&!(G&6)&&wn();var e=G;G|=1;var n=He.transition,o=q;try{if(He.transition=null,q=1,t)return t()}finally{q=o,He.transition=n,G=e,!(G&6)&&Lt()}}function Vl(){Ae=gn.current,Y(gn)}function Jt(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,gh(n)),te!==null)for(n=te.return;n!==null;){var o=n;switch(yl(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&Ar();break;case 3:Mn(),Y(we),Y(ye),kl();break;case 5:_l(o);break;case 4:Mn();break;case 13:Y(K);break;case 19:Y(K);break;case 10:Sl(o.type._context);break;case 22:case 23:Vl()}n=n.return}if(le=t,te=t=At(t.current,null),ue=Ae=e,oe=0,Po=null,Ll=ri=Qt=0,Ce=co=null,$t!==null){for(e=0;e<$t.length;e++)if(n=$t[e],o=n.interleaved,o!==null){n.interleaved=null;var r=o.next,i=n.pending;if(i!==null){var s=i.next;i.next=r,o.next=s}n.pending=o}$t=null}return t}function Hf(t,e){do{var n=te;try{if(xl(),fr.current=Hr,Vr){for(var o=Q.memoizedState;o!==null;){var r=o.queue;r!==null&&(r.pending=null),o=o.next}Vr=!1}if(Kt=0,se=ne=Q=null,ao=!1,Io=0,Dl.current=null,n===null||n.return===null){oe=1,Po=e,te=null;break}e:{var i=t,s=n.return,u=n,c=e;if(e=ue,u.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,f=u,p=f.tag;if(!(f.mode&1)&&(p===0||p===11||p===15)){var m=f.alternate;m?(f.updateQueue=m.updateQueue,f.memoizedState=m.memoizedState,f.lanes=m.lanes):(f.updateQueue=null,f.memoizedState=null)}var y=Ja(s);if(y!==null){y.flags&=-257,Wa(y,s,u,i,e),y.mode&1&&za(i,d,e),e=y,c=d;var x=e.updateQueue;if(x===null){var S=new Set;S.add(c),e.updateQueue=S}else x.add(c);break e}else{if(!(e&1)){za(i,d,e),Hl();break e}c=Error(I(426))}}else if(O&&u.mode&1){var w=Ja(s);if(w!==null){!(w.flags&65536)&&(w.flags|=256),Wa(w,s,u,i,e),vl(Dn(c,u));break e}}i=c=Dn(c,u),oe!==4&&(oe=2),co===null?co=[i]:co.push(i),i=s;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var v=Sf(i,c,e);Va(i,v);break e;case 1:u=c;var g=i.type,T=i.stateNode;if(!(i.flags&128)&&(typeof g.getDerivedStateFromError=="function"||T!==null&&typeof T.componentDidCatch=="function"&&(It===null||!It.has(T)))){i.flags|=65536,e&=-e,i.lanes|=e;var C=Cf(i,u,e);Va(i,C);break e}}i=i.return}while(i!==null)}qf(n)}catch(E){e=E,te===n&&n!==null&&(te=n=n.return);continue}break}while(!0)}function Gf(){var t=Gr.current;return Gr.current=Hr,t===null?Hr:t}function Hl(){(oe===0||oe===3||oe===2)&&(oe=4),le===null||!(Qt&268435455)&&!(ri&268435455)||Tt(le,ue)}function $r(t,e){var n=G;G|=2;var o=Gf();(le!==t||ue!==e)&&(ot=null,Jt(t,e));do try{qh();break}catch(r){Hf(t,r)}while(!0);if(xl(),G=n,Gr.current=o,te!==null)throw Error(I(261));return le=null,ue=0,oe}function qh(){for(;te!==null;)Bf(te)}function $h(){for(;te!==null&&!pm();)Bf(te)}function Bf(t){var e=zf(t.alternate,t,Ae);t.memoizedProps=t.pendingProps,e===null?qf(t):te=e,Dl.current=null}function qf(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=Uh(n,e),n!==null){n.flags&=32767,te=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{oe=6,te=null;return}}else if(n=Lh(n,e,Ae),n!==null){te=n;return}if(e=e.sibling,e!==null){te=e;return}te=e=t}while(e!==null);oe===0&&(oe=5)}function Bt(t,e,n){var o=q,r=He.transition;try{He.transition=null,q=1,zh(t,e,n,o)}finally{He.transition=r,q=o}return null}function zh(t,e,n,o){do wn();while(St!==null);if(G&6)throw Error(I(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var i=n.lanes|n.childLanes;if(Em(t,i),t===le&&(te=le=null,ue=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||rr||(rr=!0,Jf(Er,function(){return wn(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=He.transition,He.transition=null;var s=q;q=1;var u=G;G|=4,Dl.current=null,Vh(t,n),Uf(n,t),uh(gs),_r=!!hs,gs=hs=null,t.current=n,Hh(n),mm(),G=u,q=s,He.transition=i}else t.current=n;if(rr&&(rr=!1,St=t,qr=r),i=t.pendingLanes,i===0&&(It=null),ym(n.stateNode),ke(t,ee()),e!==null)for(o=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],o(r.value,{componentStack:r.stack,digest:r.digest});if(Br)throw Br=!1,t=Fs,Fs=null,t;return qr&1&&t.tag!==0&&wn(),i=t.pendingLanes,i&1?t===Vs?fo++:(fo=0,Vs=t):fo=0,Lt(),null}function wn(){if(St!==null){var t=xc(qr),e=He.transition,n=q;try{if(He.transition=null,q=16>t?16:t,St===null)var o=!1;else{if(t=St,St=null,qr=0,G&6)throw Error(I(331));var r=G;for(G|=4,P=t.current;P!==null;){var i=P,s=i.child;if(P.flags&16){var u=i.deletions;if(u!==null){for(var c=0;c<u.length;c++){var d=u[c];for(P=d;P!==null;){var f=P;switch(f.tag){case 0:case 11:case 15:uo(8,f,i)}var p=f.child;if(p!==null)p.return=f,P=p;else for(;P!==null;){f=P;var m=f.sibling,y=f.return;if(Mf(f),f===d){P=null;break}if(m!==null){m.return=y,P=m;break}P=y}}}var x=i.alternate;if(x!==null){var S=x.child;if(S!==null){x.child=null;do{var w=S.sibling;S.sibling=null,S=w}while(S!==null)}}P=i}}if(i.subtreeFlags&2064&&s!==null)s.return=i,P=s;else e:for(;P!==null;){if(i=P,i.flags&2048)switch(i.tag){case 0:case 11:case 15:uo(9,i,i.return)}var v=i.sibling;if(v!==null){v.return=i.return,P=v;break e}P=i.return}}var g=t.current;for(P=g;P!==null;){s=P;var T=s.child;if(s.subtreeFlags&2064&&T!==null)T.return=s,P=T;else e:for(s=g;P!==null;){if(u=P,u.flags&2048)try{switch(u.tag){case 0:case 11:case 15:oi(9,u)}}catch(E){Z(u,u.return,E)}if(u===s){P=null;break e}var C=u.sibling;if(C!==null){C.return=u.return,P=C;break e}P=u.return}}if(G=r,Lt(),tt&&typeof tt.onPostCommitFiberRoot=="function")try{tt.onPostCommitFiberRoot(Kr,t)}catch{}o=!0}return o}finally{q=n,He.transition=e}}return!1}function ru(t,e,n){e=Dn(n,e),e=Sf(t,e,1),t=kt(t,e,1),e=Te(),t!==null&&(Do(t,1,e),ke(t,e))}function Z(t,e,n){if(t.tag===3)ru(t,t,n);else for(;e!==null;){if(e.tag===3){ru(e,t,n);break}else if(e.tag===1){var o=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(It===null||!It.has(o))){t=Dn(n,t),t=Cf(e,t,1),e=kt(e,t,1),t=Te(),e!==null&&(Do(e,1,t),ke(e,t));break}}e=e.return}}function Jh(t,e,n){var o=t.pingCache;o!==null&&o.delete(e),e=Te(),t.pingedLanes|=t.suspendedLanes&n,le===t&&(ue&n)===n&&(oe===4||oe===3&&(ue&130023424)===ue&&500>ee()-Ul?Jt(t,0):Ll|=n),ke(t,e)}function $f(t,e){e===0&&(t.mode&1?(e=Oo,Oo<<=1,!(Oo&130023424)&&(Oo=4194304)):e=1);var n=Te();t=ct(t,e),t!==null&&(Do(t,e,n),ke(t,n))}function Wh(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),$f(t,n)}function bh(t,e){var n=0;switch(t.tag){case 13:var o=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(I(314))}o!==null&&o.delete(e),$f(t,n)}var zf;zf=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||we.current)Ee=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Ee=!1,Dh(t,e,n);Ee=!!(t.flags&131072)}else Ee=!1,O&&e.flags&1048576&&bc(e,Mr,e.index);switch(e.lanes=0,e.tag){case 2:var o=e.type;mr(t,e),t=e.pendingProps;var r=An(e,ye.current);En(e,n),r=Nl(null,e,o,t,r,n);var i=Al();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_e(o)?(i=!0,Pr(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,El(e),r.updater=ni,e.stateNode=r,r._reactInternals=e,_s(e,o,t,n),e=Ns(null,e,o,!0,i,n)):(e.tag=0,O&&i&&gl(e),ve(null,e,r,n),e=e.child),e;case 16:o=e.elementType;e:{switch(mr(t,e),t=e.pendingProps,r=o._init,o=r(o._payload),e.type=o,r=e.tag=Oh(o),t=We(o,t),r){case 0:e=Is(null,e,o,t,n);break e;case 1:e=Oa(null,e,o,t,n);break e;case 11:e=ba(null,e,o,t,n);break e;case 14:e=Ya(null,e,o,We(o.type,t),n);break e}throw Error(I(306,o,""))}return e;case 0:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:We(o,r),Is(t,e,o,r,n);case 1:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:We(o,r),Oa(t,e,o,r,n);case 3:e:{if(kf(e),t===null)throw Error(I(387));o=e.pendingProps,i=e.memoizedState,r=i.element,Zc(t,e),Ur(e,o,null,n);var s=e.memoizedState;if(o=s.element,i.isDehydrated)if(i={element:o,isDehydrated:!1,cache:s.cache,pendingSuspenseBoundaries:s.pendingSuspenseBoundaries,transitions:s.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Dn(Error(I(423)),e),e=Ka(t,e,o,n,r);break e}else if(o!==r){r=Dn(Error(I(424)),e),e=Ka(t,e,o,n,r);break e}else for(Pe=_t(e.stateNode.containerInfo.firstChild),Re=e,O=!0,Ye=null,n=Qc(e,null,o,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Pn(),o===r){e=ft(t,e,n);break e}ve(t,e,o,n)}e=e.child}return e;case 5:return jc(e),t===null&&Cs(e),o=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,s=r.children,ys(o,r)?s=null:i!==null&&ys(o,i)&&(e.flags|=32),_f(t,e),ve(t,e,s,n),e.child;case 6:return t===null&&Cs(e),null;case 13:return If(t,e,n);case 4:return wl(e,e.stateNode.containerInfo),o=e.pendingProps,t===null?e.child=Rn(e,null,o,n):ve(t,e,o,n),e.child;case 11:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:We(o,r),ba(t,e,o,r,n);case 7:return ve(t,e,e.pendingProps,n),e.child;case 8:return ve(t,e,e.pendingProps.children,n),e.child;case 12:return ve(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(o=e.type._context,r=e.pendingProps,i=e.memoizedProps,s=r.value,J(Dr,o._currentValue),o._currentValue=s,i!==null)if(Qe(i.value,s)){if(i.children===r.children&&!we.current){e=ft(t,e,n);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var u=i.dependencies;if(u!==null){s=i.child;for(var c=u.firstContext;c!==null;){if(c.context===o){if(i.tag===1){c=at(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var f=d.pending;f===null?c.next=c:(c.next=f.next,f.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),Es(i.return,n,e),u.lanes|=n;break}c=c.next}}else if(i.tag===10)s=i.type===e.type?null:i.child;else if(i.tag===18){if(s=i.return,s===null)throw Error(I(341));s.lanes|=n,u=s.alternate,u!==null&&(u.lanes|=n),Es(s,n,e),s=i.sibling}else s=i.child;if(s!==null)s.return=i;else for(s=i;s!==null;){if(s===e){s=null;break}if(i=s.sibling,i!==null){i.return=s.return,s=i;break}s=s.return}i=s}ve(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,o=e.pendingProps.children,En(e,n),r=Be(r),o=o(r),e.flags|=1,ve(t,e,o,n),e.child;case 14:return o=e.type,r=We(o,e.pendingProps),r=We(o.type,r),Ya(t,e,o,r,n);case 15:return Ef(t,e,e.type,e.pendingProps,n);case 17:return o=e.type,r=e.pendingProps,r=e.elementType===o?r:We(o,r),mr(t,e),e.tag=1,_e(o)?(t=!0,Pr(e)):t=!1,En(e,n),xf(e,o,r),_s(e,o,r,n),Ns(null,e,o,!0,t,n);case 19:return Nf(t,e,n);case 22:return wf(t,e,n)}throw Error(I(156,e.tag))};function Jf(t,e){return gc(t,e)}function Yh(t,e,n,o){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ve(t,e,n,o){return new Yh(t,e,n,o)}function Gl(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Oh(t){if(typeof t=="function")return Gl(t)?1:0;if(t!=null){if(t=t.$$typeof,t===rl)return 11;if(t===il)return 14}return 2}function At(t,e){var n=t.alternate;return n===null?(n=Ve(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function yr(t,e,n,o,r,i){var s=2;if(o=t,typeof t=="function")Gl(t)&&(s=1);else if(typeof t=="string")s=5;else e:switch(t){case sn:return Wt(n.children,r,i,e);case ol:s=8,r|=8;break;case Ki:return t=Ve(12,n,e,r|2),t.elementType=Ki,t.lanes=i,t;case Qi:return t=Ve(13,n,e,r),t.elementType=Qi,t.lanes=i,t;case Xi:return t=Ve(19,n,e,r),t.elementType=Xi,t.lanes=i,t;case jd:return ii(n,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Xd:s=10;break e;case Zd:s=9;break e;case rl:s=11;break e;case il:s=14;break e;case gt:s=16,o=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Ve(s,n,e,r),e.elementType=t,e.type=o,e.lanes=i,e}function Wt(t,e,n,o){return t=Ve(7,t,o,e),t.lanes=n,t}function ii(t,e,n,o){return t=Ve(22,t,o,e),t.elementType=jd,t.lanes=n,t.stateNode={isHidden:!1},t}function qi(t,e,n){return t=Ve(6,t,null,e),t.lanes=n,t}function $i(t,e,n){return e=Ve(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Kh(t,e,n,o,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ci(0),this.expirationTimes=Ci(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ci(0),this.identifierPrefix=o,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bl(t,e,n,o,r,i,s,u,c){return t=new Kh(t,e,n,u,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Ve(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:o,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},El(i),t}function Qh(t,e,n){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:rn,key:o==null?null:""+o,children:t,containerInfo:e,implementation:n}}function Wf(t){if(!t)return Rt;t=t._reactInternals;e:{if(en(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_e(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var n=t.type;if(_e(n))return Jc(t,n,e)}return e}function bf(t,e,n,o,r,i,s,u,c){return t=Bl(n,o,!0,t,r,i,s,u,c),t.context=Wf(null),n=t.current,o=Te(),r=Nt(n),i=at(o,r),i.callback=e??null,kt(n,i,r),t.current.lanes=r,Do(t,r,o),ke(t,o),t}function si(t,e,n,o){var r=e.current,i=Te(),s=Nt(r);return n=Wf(n),e.context===null?e.context=n:e.pendingContext=n,e=at(i,s),e.payload={element:t},o=o===void 0?null:o,o!==null&&(e.callback=o),t=kt(r,e,s),t!==null&&(Ke(t,r,s,i),cr(t,r,s)),s}function zr(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function iu(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function ql(t,e){iu(t,e),(t=t.alternate)&&iu(t,e)}function Xh(){return null}var Yf=typeof reportError=="function"?reportError:function(t){console.error(t)};function $l(t){this._internalRoot=t}li.prototype.render=$l.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));si(t,e,null,null)};li.prototype.unmount=$l.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Xt(function(){si(null,t,null,null)}),e[dt]=null}};function li(t){this._internalRoot=t}li.prototype.unstable_scheduleHydration=function(t){if(t){var e=Ec();t={blockedOn:null,target:t,priority:e};for(var n=0;n<vt.length&&e!==0&&e<vt[n].priority;n++);vt.splice(n,0,t),n===0&&_c(t)}};function zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ai(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function su(){}function Zh(t,e,n,o,r){if(r){if(typeof o=="function"){var i=o;o=function(){var d=zr(s);i.call(d)}}var s=bf(e,o,t,0,null,!1,!1,"",su);return t._reactRootContainer=s,t[dt]=s.current,Co(t.nodeType===8?t.parentNode:t),Xt(),s}for(;r=t.lastChild;)t.removeChild(r);if(typeof o=="function"){var u=o;o=function(){var d=zr(c);u.call(d)}}var c=Bl(t,0,!1,null,null,!1,!1,"",su);return t._reactRootContainer=c,t[dt]=c.current,Co(t.nodeType===8?t.parentNode:t),Xt(function(){si(e,c,n,o)}),c}function ui(t,e,n,o,r){var i=n._reactRootContainer;if(i){var s=i;if(typeof r=="function"){var u=r;r=function(){var c=zr(s);u.call(c)}}si(e,s,t,r)}else s=Zh(n,e,t,r,o);return zr(s)}Sc=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(al(e,n|1),ke(e,ee()),!(G&6)&&(Ln=ee()+500,Lt()))}break;case 13:Xt(function(){var o=ct(t,1);if(o!==null){var r=Te();Ke(o,t,1,r)}}),ql(t,1)}};ul=function(t){if(t.tag===13){var e=ct(t,134217728);if(e!==null){var n=Te();Ke(e,t,134217728,n)}ql(t,134217728)}};Cc=function(t){if(t.tag===13){var e=Nt(t),n=ct(t,e);if(n!==null){var o=Te();Ke(n,t,e,o)}ql(t,e)}};Ec=function(){return q};wc=function(t,e){var n=q;try{return q=t,e()}finally{q=n}};ls=function(t,e,n){switch(e){case"input":if(es(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var o=n[e];if(o!==t&&o.form===t.form){var r=jr(o);if(!r)throw Error(I(90));tc(o),es(o,r)}}}break;case"textarea":oc(t,n);break;case"select":e=n.value,e!=null&&Tn(t,!!n.multiple,e,!1)}};dc=Fl;cc=Xt;var jh={usingClientEntryPoint:!1,Events:[Uo,dn,jr,ac,uc,Fl]},Xn={findFiberByHostInstance:qt,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},eg={bundleType:Xn.bundleType,version:Xn.version,rendererPackageName:Xn.rendererPackageName,rendererConfig:Xn.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:pt.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=mc(t),t===null?null:t.stateNode},findFiberByHostInstance:Xn.findFiberByHostInstance||Xh,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var ir=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!ir.isDisabled&&ir.supportsFiber)try{Kr=ir.inject(eg),tt=ir}catch{}}De.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jh;De.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!zl(e))throw Error(I(200));return Qh(t,e,null,n)};De.createRoot=function(t,e){if(!zl(t))throw Error(I(299));var n=!1,o="",r=Yf;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(o=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Bl(t,1,!1,null,null,n,!1,o,r),t[dt]=e.current,Co(t.nodeType===8?t.parentNode:t),new $l(e)};De.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=mc(e),t=t===null?null:t.stateNode,t};De.flushSync=function(t){return Xt(t)};De.hydrate=function(t,e,n){if(!ai(e))throw Error(I(200));return ui(null,t,e,!0,n)};De.hydrateRoot=function(t,e,n){if(!zl(t))throw Error(I(405));var o=n!=null&&n.hydratedSources||null,r=!1,i="",s=Yf;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(s=n.onRecoverableError)),e=bf(e,null,t,1,n??null,r,!1,i,s),t[dt]=e.current,Co(t),o)for(t=0;t<o.length;t++)n=o[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new li(e)};De.render=function(t,e,n){if(!ai(e))throw Error(I(200));return ui(null,t,e,!1,n)};De.unmountComponentAtNode=function(t){if(!ai(t))throw Error(I(40));return t._reactRootContainer?(Xt(function(){ui(null,null,t,!1,function(){t._reactRootContainer=null,t[dt]=null})}),!0):!1};De.unstable_batchedUpdates=Fl;De.unstable_renderSubtreeIntoContainer=function(t,e,n,o){if(!ai(n))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return ui(t,e,n,!1,o)};De.version="18.3.1-next-f1338f8080-20240426";function Of(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Of)}catch(t){console.error(t)}}Of(),Yd.exports=De;var tg=Yd.exports,lu=tg;Yi.createRoot=lu.createRoot,Yi.hydrateRoot=lu.hydrateRoot;const ng={},au=t=>{let e;const n=new Set,o=(f,p)=>{const m=typeof f=="function"?f(e):f;if(!Object.is(m,e)){const y=e;e=p??(typeof m!="object"||m===null)?m:Object.assign({},e,m),n.forEach(x=>x(e,y))}},r=()=>e,c={setState:o,getState:r,getInitialState:()=>d,subscribe:f=>(n.add(f),()=>n.delete(f)),destroy:()=>{(ng?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},d=e=t(o,r,c);return c},og=t=>t?au(t):au;var Kf={exports:{}},Qf={},Xf={exports:{}},Zf={};/**
 * @license React
 * use-sync-external-store-shim.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Un=F;function rg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ig=typeof Object.is=="function"?Object.is:rg,sg=Un.useState,lg=Un.useEffect,ag=Un.useLayoutEffect,ug=Un.useDebugValue;function dg(t,e){var n=e(),o=sg({inst:{value:n,getSnapshot:e}}),r=o[0].inst,i=o[1];return ag(function(){r.value=n,r.getSnapshot=e,zi(r)&&i({inst:r})},[t,n,e]),lg(function(){return zi(r)&&i({inst:r}),t(function(){zi(r)&&i({inst:r})})},[t]),ug(n),n}function zi(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!ig(t,n)}catch{return!0}}function cg(t,e){return e()}var fg=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?cg:dg;Zf.useSyncExternalStore=Un.useSyncExternalStore!==void 0?Un.useSyncExternalStore:fg;Xf.exports=Zf;var pg=Xf.exports;/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var di=F,mg=pg;function hg(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var gg=typeof Object.is=="function"?Object.is:hg,yg=mg.useSyncExternalStore,vg=di.useRef,Tg=di.useEffect,xg=di.useMemo,Sg=di.useDebugValue;Qf.useSyncExternalStoreWithSelector=function(t,e,n,o,r){var i=vg(null);if(i.current===null){var s={hasValue:!1,value:null};i.current=s}else s=i.current;i=xg(function(){function c(y){if(!d){if(d=!0,f=y,y=o(y),r!==void 0&&s.hasValue){var x=s.value;if(r(x,y))return p=x}return p=y}if(x=p,gg(f,y))return x;var S=o(y);return r!==void 0&&r(x,S)?(f=y,x):(f=y,p=S)}var d=!1,f,p,m=n===void 0?null:n;return[function(){return c(e())},m===null?void 0:function(){return c(m())}]},[e,n,o,r]);var u=yg(t,i[0],i[1]);return Tg(function(){s.hasValue=!0,s.value=u},[u]),Sg(u),u};Kf.exports=Qf;var Cg=Kf.exports;const Eg=Ud(Cg),jf={},{useDebugValue:wg}=Or,{useSyncExternalStoreWithSelector:_g}=Eg;let uu=!1;const kg=t=>t;function Ig(t,e=kg,n){(jf?"production":void 0)!=="production"&&n&&!uu&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),uu=!0);const o=_g(t.subscribe,t.getState,t.getServerState||t.getInitialState,e,n);return wg(o),o}const du=t=>{(jf?"production":void 0)!=="production"&&typeof t!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const e=typeof t=="function"?og(t):t,n=(o,r)=>Ig(e,o,r);return Object.assign(n,e),n},Gn=t=>t?du(t):du,yn=Gn(()=>({viewMode:"editor",activeNoteId:null,initialWikiHistory:null,viewingPulseReport:null})),Ng={};function Ag(t,e){let n;try{n=t()}catch{return}return{getItem:r=>{var i;const s=c=>c===null?null:JSON.parse(c,void 0),u=(i=n.getItem(r))!=null?i:null;return u instanceof Promise?u.then(s):s(u)},setItem:(r,i)=>n.setItem(r,JSON.stringify(i,void 0)),removeItem:r=>n.removeItem(r)}}const Ro=t=>e=>{try{const n=t(e);return n instanceof Promise?n:{then(o){return Ro(o)(n)},catch(o){return this}}}catch(n){return{then(o){return this},catch(o){return Ro(o)(n)}}}},Pg=(t,e)=>(n,o,r)=>{let i={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:w=>w,version:0,merge:(w,v)=>({...v,...w}),...e},s=!1;const u=new Set,c=new Set;let d;try{d=i.getStorage()}catch{}if(!d)return t((...w)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...w)},o,r);const f=Ro(i.serialize),p=()=>{const w=i.partialize({...o()});let v;const g=f({state:w,version:i.version}).then(T=>d.setItem(i.name,T)).catch(T=>{v=T});if(v)throw v;return g},m=r.setState;r.setState=(w,v)=>{m(w,v),p()};const y=t((...w)=>{n(...w),p()},o,r);let x;const S=()=>{var w;if(!d)return;s=!1,u.forEach(g=>g(o()));const v=((w=i.onRehydrateStorage)==null?void 0:w.call(i,o()))||void 0;return Ro(d.getItem.bind(d))(i.name).then(g=>{if(g)return i.deserialize(g)}).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==i.version){if(i.migrate)return i.migrate(g.state,g.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return g.state}).then(g=>{var T;return x=i.merge(g,(T=o())!=null?T:y),n(x,!0),p()}).then(()=>{v==null||v(x,void 0),s=!0,c.forEach(g=>g(x))}).catch(g=>{v==null||v(void 0,g)})};return r.persist={setOptions:w=>{i={...i,...w},w.getStorage&&(d=w.getStorage())},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>S(),hasHydrated:()=>s,onHydrate:w=>(u.add(w),()=>{u.delete(w)}),onFinishHydration:w=>(c.add(w),()=>{c.delete(w)})},S(),x||y},Rg=(t,e)=>(n,o,r)=>{let i={storage:Ag(()=>localStorage),partialize:S=>S,version:0,merge:(S,w)=>({...w,...S}),...e},s=!1;const u=new Set,c=new Set;let d=i.storage;if(!d)return t((...S)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...S)},o,r);const f=()=>{const S=i.partialize({...o()});return d.setItem(i.name,{state:S,version:i.version})},p=r.setState;r.setState=(S,w)=>{p(S,w),f()};const m=t((...S)=>{n(...S),f()},o,r);r.getInitialState=()=>m;let y;const x=()=>{var S,w;if(!d)return;s=!1,u.forEach(g=>{var T;return g((T=o())!=null?T:m)});const v=((w=i.onRehydrateStorage)==null?void 0:w.call(i,(S=o())!=null?S:m))||void 0;return Ro(d.getItem.bind(d))(i.name).then(g=>{if(g)if(typeof g.version=="number"&&g.version!==i.version){if(i.migrate)return[!0,i.migrate(g.state,g.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,g.state];return[!1,void 0]}).then(g=>{var T;const[C,E]=g;if(y=i.merge(E,(T=o())!=null?T:m),n(y,!0),C)return f()}).then(()=>{v==null||v(y,void 0),y=o(),s=!0,c.forEach(g=>g(y))}).catch(g=>{v==null||v(void 0,g)})};return r.persist={setOptions:S=>{i={...i,...S},S.storage&&(d=S.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>x(),hasHydrated:()=>s,onHydrate:S=>(u.add(S),()=>{u.delete(S)}),onFinishHydration:S=>(c.add(S),()=>{c.delete(S)})},i.skipHydration||x(),y||m},Mg=(t,e)=>"getStorage"in e||"serialize"in e||"deserialize"in e?((Ng?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),Pg(t,e)):Rg(t,e),Vo=Mg,Ne=Gn()(Vo(()=>({wikis:[],wikiTopics:[],isLoadingWikiTopics:!1}),{name:"ai-notes-wiki-storage",partialize:t=>({wikis:t.wikis,wikiTopics:t.wikiTopics})}));class Dg{constructor(){this.setViewMode=e=>{yn.setState({viewMode:e})},this.setActiveNoteId=e=>{yn.setState({activeNoteId:e})},this.setInitialWikiHistory=e=>{yn.setState({initialWikiHistory:e})},this.setViewingPulseReport=e=>{yn.setState({viewingPulseReport:e})}}}const he=Gn()(Vo(()=>({notes:[],generatingTitleIds:new Set}),{name:"ai-notes-app",storage:{getItem:t=>{var r;const e=localStorage.getItem(t);if(!e)return null;const{state:n}=JSON.parse(e),o=((r=n.notes)==null?void 0:r.map(i=>({...i,type:i.type||"text"})))||[];return{state:{...n,notes:o,generatingTitleIds:new Set(n.generatingTitleIds||[])}}},setItem:(t,e)=>{const n=JSON.stringify({state:{...e.state,generatingTitleIds:Array.from(e.state.generatingTitleIds)}});localStorage.setItem(t,n)},removeItem:t=>localStorage.removeItem(t)}}));/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */let Lg,Ug;function Fg(){return{geminiUrl:Lg,vertexUrl:Ug}}function Vg(t,e,n,o){var r,i;if(!(t!=null&&t.baseUrl)){const s=Fg();return e?(r=s.vertexUrl)!==null&&r!==void 0?r:n:(i=s.geminiUrl)!==null&&i!==void 0?i:o}return t.baseUrl}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class tn{}function D(t,e){const n=/\{([^}]+)\}/g;return t.replace(n,(o,r)=>{if(Object.prototype.hasOwnProperty.call(e,r)){const i=e[r];return i!=null?String(i):""}else throw new Error(`Key '${r}' not found in valueMap.`)})}function a(t,e,n){for(let i=0;i<e.length-1;i++){const s=e[i];if(s.endsWith("[]")){const u=s.slice(0,-2);if(!(u in t))if(Array.isArray(n))t[u]=Array.from({length:n.length},()=>({}));else throw new Error(`Value must be a list given an array path ${s}`);if(Array.isArray(t[u])){const c=t[u];if(Array.isArray(n))for(let d=0;d<c.length;d++){const f=c[d];a(f,e.slice(i+1),n[d])}else for(const d of c)a(d,e.slice(i+1),n)}return}else if(s.endsWith("[0]")){const u=s.slice(0,-3);u in t||(t[u]=[{}]);const c=t[u];a(c[0],e.slice(i+1),n);return}(!t[s]||typeof t[s]!="object")&&(t[s]={}),t=t[s]}const o=e[e.length-1],r=t[o];if(r!==void 0){if(!n||typeof n=="object"&&Object.keys(n).length===0||n===r)return;if(typeof r=="object"&&typeof n=="object"&&r!==null&&n!==null)Object.assign(r,n);else throw new Error(`Cannot set value for an existing key. Key: ${o}`)}else o==="_self"&&typeof n=="object"&&n!==null&&!Array.isArray(n)?Object.assign(t,n):t[o]=n}function l(t,e,n=void 0){try{if(e.length===1&&e[0]==="_self")return t;for(let o=0;o<e.length;o++){if(typeof t!="object"||t===null)return n;const r=e[o];if(r.endsWith("[]")){const i=r.slice(0,-2);if(i in t){const s=t[i];return Array.isArray(s)?s.map(u=>l(u,e.slice(o+1),n)):n}else return n}else t=t[r]}return t}catch(o){if(o instanceof TypeError)return n;throw o}}function Hg(t,e){for(const[n,o]of Object.entries(e)){const r=n.split("."),i=o.split("."),s=new Set;let u=-1;for(let c=0;c<r.length;c++)if(r[c]==="*"){u=c;break}if(u!==-1&&i.length>u)for(let c=u;c<i.length;c++){const d=i[c];d!=="*"&&!d.endsWith("[]")&&!d.endsWith("[0]")&&s.add(d)}Bs(t,r,i,0,s)}}function Bs(t,e,n,o,r){if(o>=e.length||typeof t!="object"||t===null)return;const i=e[o];if(i.endsWith("[]")){const s=i.slice(0,-2),u=t;if(s in u&&Array.isArray(u[s]))for(const c of u[s])Bs(c,e,n,o+1,r)}else if(i==="*"){if(typeof t=="object"&&t!==null&&!Array.isArray(t)){const s=t,u=Object.keys(s).filter(d=>!d.startsWith("_")&&!r.has(d)),c={};for(const d of u)c[d]=s[d];for(const[d,f]of Object.entries(c)){const p=[];for(const m of n.slice(o))m==="*"?p.push(d):p.push(m);a(s,p,f)}for(const d of u)delete s[d]}}else{const s=t;i in s&&Bs(s[i],e,n,o+1,r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Jl(t){if(typeof t!="string")throw new Error("fromImageBytes must be a string");return t}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Gg(t){const e={},n=l(t,["operationName"]);n!=null&&a(e,["operationName"],n);const o=l(t,["resourceName"]);return o!=null&&a(e,["_url","resourceName"],o),e}function Bg(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],$g(s)),e}function qg(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],zg(s)),e}function $g(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Jg(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function zg(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>Wg(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function Jg(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],Og(n)),e}function Wg(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],Kg(n)),e}function bg(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function Yg(t){const e={},n=l(t,["operationName"]);return n!=null&&a(e,["_url","operationName"],n),e}function Og(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],Jl(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function Kg(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],Jl(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var cu;(function(t){t.OUTCOME_UNSPECIFIED="OUTCOME_UNSPECIFIED",t.OUTCOME_OK="OUTCOME_OK",t.OUTCOME_FAILED="OUTCOME_FAILED",t.OUTCOME_DEADLINE_EXCEEDED="OUTCOME_DEADLINE_EXCEEDED"})(cu||(cu={}));var fu;(function(t){t.LANGUAGE_UNSPECIFIED="LANGUAGE_UNSPECIFIED",t.PYTHON="PYTHON"})(fu||(fu={}));var pu;(function(t){t.SCHEDULING_UNSPECIFIED="SCHEDULING_UNSPECIFIED",t.SILENT="SILENT",t.WHEN_IDLE="WHEN_IDLE",t.INTERRUPT="INTERRUPT"})(pu||(pu={}));var H;(function(t){t.TYPE_UNSPECIFIED="TYPE_UNSPECIFIED",t.STRING="STRING",t.NUMBER="NUMBER",t.INTEGER="INTEGER",t.BOOLEAN="BOOLEAN",t.ARRAY="ARRAY",t.OBJECT="OBJECT",t.NULL="NULL"})(H||(H={}));var mu;(function(t){t.HARM_CATEGORY_UNSPECIFIED="HARM_CATEGORY_UNSPECIFIED",t.HARM_CATEGORY_HARASSMENT="HARM_CATEGORY_HARASSMENT",t.HARM_CATEGORY_HATE_SPEECH="HARM_CATEGORY_HATE_SPEECH",t.HARM_CATEGORY_SEXUALLY_EXPLICIT="HARM_CATEGORY_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_DANGEROUS_CONTENT="HARM_CATEGORY_DANGEROUS_CONTENT",t.HARM_CATEGORY_CIVIC_INTEGRITY="HARM_CATEGORY_CIVIC_INTEGRITY",t.HARM_CATEGORY_IMAGE_HATE="HARM_CATEGORY_IMAGE_HATE",t.HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT="HARM_CATEGORY_IMAGE_DANGEROUS_CONTENT",t.HARM_CATEGORY_IMAGE_HARASSMENT="HARM_CATEGORY_IMAGE_HARASSMENT",t.HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT="HARM_CATEGORY_IMAGE_SEXUALLY_EXPLICIT",t.HARM_CATEGORY_JAILBREAK="HARM_CATEGORY_JAILBREAK"})(mu||(mu={}));var hu;(function(t){t.HARM_BLOCK_METHOD_UNSPECIFIED="HARM_BLOCK_METHOD_UNSPECIFIED",t.SEVERITY="SEVERITY",t.PROBABILITY="PROBABILITY"})(hu||(hu={}));var gu;(function(t){t.HARM_BLOCK_THRESHOLD_UNSPECIFIED="HARM_BLOCK_THRESHOLD_UNSPECIFIED",t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE",t.OFF="OFF"})(gu||(gu={}));var yu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(yu||(yu={}));var vu;(function(t){t.AUTH_TYPE_UNSPECIFIED="AUTH_TYPE_UNSPECIFIED",t.NO_AUTH="NO_AUTH",t.API_KEY_AUTH="API_KEY_AUTH",t.HTTP_BASIC_AUTH="HTTP_BASIC_AUTH",t.GOOGLE_SERVICE_ACCOUNT_AUTH="GOOGLE_SERVICE_ACCOUNT_AUTH",t.OAUTH="OAUTH",t.OIDC_AUTH="OIDC_AUTH"})(vu||(vu={}));var Tu;(function(t){t.API_SPEC_UNSPECIFIED="API_SPEC_UNSPECIFIED",t.SIMPLE_SEARCH="SIMPLE_SEARCH",t.ELASTIC_SEARCH="ELASTIC_SEARCH"})(Tu||(Tu={}));var xu;(function(t){t.URL_RETRIEVAL_STATUS_UNSPECIFIED="URL_RETRIEVAL_STATUS_UNSPECIFIED",t.URL_RETRIEVAL_STATUS_SUCCESS="URL_RETRIEVAL_STATUS_SUCCESS",t.URL_RETRIEVAL_STATUS_ERROR="URL_RETRIEVAL_STATUS_ERROR",t.URL_RETRIEVAL_STATUS_PAYWALL="URL_RETRIEVAL_STATUS_PAYWALL",t.URL_RETRIEVAL_STATUS_UNSAFE="URL_RETRIEVAL_STATUS_UNSAFE"})(xu||(xu={}));var Su;(function(t){t.FINISH_REASON_UNSPECIFIED="FINISH_REASON_UNSPECIFIED",t.STOP="STOP",t.MAX_TOKENS="MAX_TOKENS",t.SAFETY="SAFETY",t.RECITATION="RECITATION",t.LANGUAGE="LANGUAGE",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.SPII="SPII",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.IMAGE_SAFETY="IMAGE_SAFETY",t.UNEXPECTED_TOOL_CALL="UNEXPECTED_TOOL_CALL",t.IMAGE_PROHIBITED_CONTENT="IMAGE_PROHIBITED_CONTENT",t.NO_IMAGE="NO_IMAGE"})(Su||(Su={}));var Cu;(function(t){t.HARM_PROBABILITY_UNSPECIFIED="HARM_PROBABILITY_UNSPECIFIED",t.NEGLIGIBLE="NEGLIGIBLE",t.LOW="LOW",t.MEDIUM="MEDIUM",t.HIGH="HIGH"})(Cu||(Cu={}));var Eu;(function(t){t.HARM_SEVERITY_UNSPECIFIED="HARM_SEVERITY_UNSPECIFIED",t.HARM_SEVERITY_NEGLIGIBLE="HARM_SEVERITY_NEGLIGIBLE",t.HARM_SEVERITY_LOW="HARM_SEVERITY_LOW",t.HARM_SEVERITY_MEDIUM="HARM_SEVERITY_MEDIUM",t.HARM_SEVERITY_HIGH="HARM_SEVERITY_HIGH"})(Eu||(Eu={}));var wu;(function(t){t.BLOCKED_REASON_UNSPECIFIED="BLOCKED_REASON_UNSPECIFIED",t.SAFETY="SAFETY",t.OTHER="OTHER",t.BLOCKLIST="BLOCKLIST",t.PROHIBITED_CONTENT="PROHIBITED_CONTENT",t.IMAGE_SAFETY="IMAGE_SAFETY",t.MODEL_ARMOR="MODEL_ARMOR",t.JAILBREAK="JAILBREAK"})(wu||(wu={}));var _u;(function(t){t.TRAFFIC_TYPE_UNSPECIFIED="TRAFFIC_TYPE_UNSPECIFIED",t.ON_DEMAND="ON_DEMAND",t.PROVISIONED_THROUGHPUT="PROVISIONED_THROUGHPUT"})(_u||(_u={}));var Jr;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.AUDIO="AUDIO"})(Jr||(Jr={}));var ku;(function(t){t.MEDIA_RESOLUTION_UNSPECIFIED="MEDIA_RESOLUTION_UNSPECIFIED",t.MEDIA_RESOLUTION_LOW="MEDIA_RESOLUTION_LOW",t.MEDIA_RESOLUTION_MEDIUM="MEDIA_RESOLUTION_MEDIUM",t.MEDIA_RESOLUTION_HIGH="MEDIA_RESOLUTION_HIGH"})(ku||(ku={}));var qs;(function(t){t.JOB_STATE_UNSPECIFIED="JOB_STATE_UNSPECIFIED",t.JOB_STATE_QUEUED="JOB_STATE_QUEUED",t.JOB_STATE_PENDING="JOB_STATE_PENDING",t.JOB_STATE_RUNNING="JOB_STATE_RUNNING",t.JOB_STATE_SUCCEEDED="JOB_STATE_SUCCEEDED",t.JOB_STATE_FAILED="JOB_STATE_FAILED",t.JOB_STATE_CANCELLING="JOB_STATE_CANCELLING",t.JOB_STATE_CANCELLED="JOB_STATE_CANCELLED",t.JOB_STATE_PAUSED="JOB_STATE_PAUSED",t.JOB_STATE_EXPIRED="JOB_STATE_EXPIRED",t.JOB_STATE_UPDATING="JOB_STATE_UPDATING",t.JOB_STATE_PARTIALLY_SUCCEEDED="JOB_STATE_PARTIALLY_SUCCEEDED"})(qs||(qs={}));var Iu;(function(t){t.TUNING_MODE_UNSPECIFIED="TUNING_MODE_UNSPECIFIED",t.TUNING_MODE_FULL="TUNING_MODE_FULL",t.TUNING_MODE_PEFT_ADAPTER="TUNING_MODE_PEFT_ADAPTER"})(Iu||(Iu={}));var Nu;(function(t){t.ADAPTER_SIZE_UNSPECIFIED="ADAPTER_SIZE_UNSPECIFIED",t.ADAPTER_SIZE_ONE="ADAPTER_SIZE_ONE",t.ADAPTER_SIZE_TWO="ADAPTER_SIZE_TWO",t.ADAPTER_SIZE_FOUR="ADAPTER_SIZE_FOUR",t.ADAPTER_SIZE_EIGHT="ADAPTER_SIZE_EIGHT",t.ADAPTER_SIZE_SIXTEEN="ADAPTER_SIZE_SIXTEEN",t.ADAPTER_SIZE_THIRTY_TWO="ADAPTER_SIZE_THIRTY_TWO"})(Nu||(Nu={}));var Au;(function(t){t.TUNING_TASK_UNSPECIFIED="TUNING_TASK_UNSPECIFIED",t.TUNING_TASK_I2V="TUNING_TASK_I2V",t.TUNING_TASK_T2V="TUNING_TASK_T2V"})(Au||(Au={}));var Pu;(function(t){t.FEATURE_SELECTION_PREFERENCE_UNSPECIFIED="FEATURE_SELECTION_PREFERENCE_UNSPECIFIED",t.PRIORITIZE_QUALITY="PRIORITIZE_QUALITY",t.BALANCED="BALANCED",t.PRIORITIZE_COST="PRIORITIZE_COST"})(Pu||(Pu={}));var Ru;(function(t){t.UNSPECIFIED="UNSPECIFIED",t.BLOCKING="BLOCKING",t.NON_BLOCKING="NON_BLOCKING"})(Ru||(Ru={}));var Mu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.MODE_DYNAMIC="MODE_DYNAMIC"})(Mu||(Mu={}));var Du;(function(t){t.ENVIRONMENT_UNSPECIFIED="ENVIRONMENT_UNSPECIFIED",t.ENVIRONMENT_BROWSER="ENVIRONMENT_BROWSER"})(Du||(Du={}));var Lu;(function(t){t.MODE_UNSPECIFIED="MODE_UNSPECIFIED",t.AUTO="AUTO",t.ANY="ANY",t.NONE="NONE",t.VALIDATED="VALIDATED"})(Lu||(Lu={}));var Uu;(function(t){t.BLOCK_LOW_AND_ABOVE="BLOCK_LOW_AND_ABOVE",t.BLOCK_MEDIUM_AND_ABOVE="BLOCK_MEDIUM_AND_ABOVE",t.BLOCK_ONLY_HIGH="BLOCK_ONLY_HIGH",t.BLOCK_NONE="BLOCK_NONE"})(Uu||(Uu={}));var Fu;(function(t){t.DONT_ALLOW="DONT_ALLOW",t.ALLOW_ADULT="ALLOW_ADULT",t.ALLOW_ALL="ALLOW_ALL"})(Fu||(Fu={}));var Vu;(function(t){t.auto="auto",t.en="en",t.ja="ja",t.ko="ko",t.hi="hi",t.zh="zh",t.pt="pt",t.es="es"})(Vu||(Vu={}));var Hu;(function(t){t.MASK_MODE_DEFAULT="MASK_MODE_DEFAULT",t.MASK_MODE_USER_PROVIDED="MASK_MODE_USER_PROVIDED",t.MASK_MODE_BACKGROUND="MASK_MODE_BACKGROUND",t.MASK_MODE_FOREGROUND="MASK_MODE_FOREGROUND",t.MASK_MODE_SEMANTIC="MASK_MODE_SEMANTIC"})(Hu||(Hu={}));var Gu;(function(t){t.CONTROL_TYPE_DEFAULT="CONTROL_TYPE_DEFAULT",t.CONTROL_TYPE_CANNY="CONTROL_TYPE_CANNY",t.CONTROL_TYPE_SCRIBBLE="CONTROL_TYPE_SCRIBBLE",t.CONTROL_TYPE_FACE_MESH="CONTROL_TYPE_FACE_MESH"})(Gu||(Gu={}));var Bu;(function(t){t.SUBJECT_TYPE_DEFAULT="SUBJECT_TYPE_DEFAULT",t.SUBJECT_TYPE_PERSON="SUBJECT_TYPE_PERSON",t.SUBJECT_TYPE_ANIMAL="SUBJECT_TYPE_ANIMAL",t.SUBJECT_TYPE_PRODUCT="SUBJECT_TYPE_PRODUCT"})(Bu||(Bu={}));var qu;(function(t){t.EDIT_MODE_DEFAULT="EDIT_MODE_DEFAULT",t.EDIT_MODE_INPAINT_REMOVAL="EDIT_MODE_INPAINT_REMOVAL",t.EDIT_MODE_INPAINT_INSERTION="EDIT_MODE_INPAINT_INSERTION",t.EDIT_MODE_OUTPAINT="EDIT_MODE_OUTPAINT",t.EDIT_MODE_CONTROLLED_EDITING="EDIT_MODE_CONTROLLED_EDITING",t.EDIT_MODE_STYLE="EDIT_MODE_STYLE",t.EDIT_MODE_BGSWAP="EDIT_MODE_BGSWAP",t.EDIT_MODE_PRODUCT_IMAGE="EDIT_MODE_PRODUCT_IMAGE"})(qu||(qu={}));var $u;(function(t){t.FOREGROUND="FOREGROUND",t.BACKGROUND="BACKGROUND",t.PROMPT="PROMPT",t.SEMANTIC="SEMANTIC",t.INTERACTIVE="INTERACTIVE"})($u||($u={}));var zu;(function(t){t.ASSET="ASSET",t.STYLE="STYLE"})(zu||(zu={}));var Ju;(function(t){t.INSERT="INSERT",t.REMOVE="REMOVE",t.REMOVE_STATIC="REMOVE_STATIC",t.OUTPAINT="OUTPAINT"})(Ju||(Ju={}));var Wu;(function(t){t.OPTIMIZED="OPTIMIZED",t.LOSSLESS="LOSSLESS"})(Wu||(Wu={}));var bu;(function(t){t.STATE_UNSPECIFIED="STATE_UNSPECIFIED",t.PROCESSING="PROCESSING",t.ACTIVE="ACTIVE",t.FAILED="FAILED"})(bu||(bu={}));var Yu;(function(t){t.SOURCE_UNSPECIFIED="SOURCE_UNSPECIFIED",t.UPLOADED="UPLOADED",t.GENERATED="GENERATED"})(Yu||(Yu={}));var Ou;(function(t){t.TURN_COMPLETE_REASON_UNSPECIFIED="TURN_COMPLETE_REASON_UNSPECIFIED",t.MALFORMED_FUNCTION_CALL="MALFORMED_FUNCTION_CALL",t.RESPONSE_REJECTED="RESPONSE_REJECTED",t.NEED_MORE_INPUT="NEED_MORE_INPUT"})(Ou||(Ou={}));var Ku;(function(t){t.MODALITY_UNSPECIFIED="MODALITY_UNSPECIFIED",t.TEXT="TEXT",t.IMAGE="IMAGE",t.VIDEO="VIDEO",t.AUDIO="AUDIO",t.DOCUMENT="DOCUMENT"})(Ku||(Ku={}));var Qu;(function(t){t.START_SENSITIVITY_UNSPECIFIED="START_SENSITIVITY_UNSPECIFIED",t.START_SENSITIVITY_HIGH="START_SENSITIVITY_HIGH",t.START_SENSITIVITY_LOW="START_SENSITIVITY_LOW"})(Qu||(Qu={}));var Xu;(function(t){t.END_SENSITIVITY_UNSPECIFIED="END_SENSITIVITY_UNSPECIFIED",t.END_SENSITIVITY_HIGH="END_SENSITIVITY_HIGH",t.END_SENSITIVITY_LOW="END_SENSITIVITY_LOW"})(Xu||(Xu={}));var Zu;(function(t){t.ACTIVITY_HANDLING_UNSPECIFIED="ACTIVITY_HANDLING_UNSPECIFIED",t.START_OF_ACTIVITY_INTERRUPTS="START_OF_ACTIVITY_INTERRUPTS",t.NO_INTERRUPTION="NO_INTERRUPTION"})(Zu||(Zu={}));var ju;(function(t){t.TURN_COVERAGE_UNSPECIFIED="TURN_COVERAGE_UNSPECIFIED",t.TURN_INCLUDES_ONLY_ACTIVITY="TURN_INCLUDES_ONLY_ACTIVITY",t.TURN_INCLUDES_ALL_INPUT="TURN_INCLUDES_ALL_INPUT"})(ju||(ju={}));var ed;(function(t){t.SCALE_UNSPECIFIED="SCALE_UNSPECIFIED",t.C_MAJOR_A_MINOR="C_MAJOR_A_MINOR",t.D_FLAT_MAJOR_B_FLAT_MINOR="D_FLAT_MAJOR_B_FLAT_MINOR",t.D_MAJOR_B_MINOR="D_MAJOR_B_MINOR",t.E_FLAT_MAJOR_C_MINOR="E_FLAT_MAJOR_C_MINOR",t.E_MAJOR_D_FLAT_MINOR="E_MAJOR_D_FLAT_MINOR",t.F_MAJOR_D_MINOR="F_MAJOR_D_MINOR",t.G_FLAT_MAJOR_E_FLAT_MINOR="G_FLAT_MAJOR_E_FLAT_MINOR",t.G_MAJOR_E_MINOR="G_MAJOR_E_MINOR",t.A_FLAT_MAJOR_F_MINOR="A_FLAT_MAJOR_F_MINOR",t.A_MAJOR_G_FLAT_MINOR="A_MAJOR_G_FLAT_MINOR",t.B_FLAT_MAJOR_G_MINOR="B_FLAT_MAJOR_G_MINOR",t.B_MAJOR_A_FLAT_MINOR="B_MAJOR_A_FLAT_MINOR"})(ed||(ed={}));var td;(function(t){t.MUSIC_GENERATION_MODE_UNSPECIFIED="MUSIC_GENERATION_MODE_UNSPECIFIED",t.QUALITY="QUALITY",t.DIVERSITY="DIVERSITY",t.VOCALIZATION="VOCALIZATION"})(td||(td={}));var vn;(function(t){t.PLAYBACK_CONTROL_UNSPECIFIED="PLAYBACK_CONTROL_UNSPECIFIED",t.PLAY="PLAY",t.PAUSE="PAUSE",t.STOP="STOP",t.RESET_CONTEXT="RESET_CONTEXT"})(vn||(vn={}));class $s{constructor(e){const n={};for(const o of e.headers.entries())n[o[0]]=o[1];this.headers=n,this.responseInternal=e}json(){return this.responseInternal.json()}}class Zn{get text(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning text from the first one.");let d="",f=!1;const p=[];for(const m of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[y,x]of Object.entries(m))y!=="text"&&y!=="thought"&&(x!==null||x!==void 0)&&p.push(y);if(typeof m.text=="string"){if(typeof m.thought=="boolean"&&m.thought)continue;f=!0,d+=m.text}}return p.length>0&&console.warn(`there are non-text parts ${p} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),f?d:void 0}get data(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning data from the first one.");let d="";const f=[];for(const p of(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)!==null&&c!==void 0?c:[]){for(const[m,y]of Object.entries(p))m!=="inlineData"&&(y!==null||y!==void 0)&&f.push(m);p.inlineData&&typeof p.inlineData.data=="string"&&(d+=atob(p.inlineData.data))}return f.length>0&&console.warn(`there are non-data parts ${f} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),d.length>0?btoa(d):void 0}get functionCalls(){var e,n,o,r,i,s,u,c;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning function calls from the first one.");const d=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(f=>f.functionCall).map(f=>f.functionCall).filter(f=>f!==void 0);if((d==null?void 0:d.length)!==0)return d}get executableCode(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning executable code from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.executableCode).map(p=>p.executableCode).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.code}get codeExecutionResult(){var e,n,o,r,i,s,u,c,d;if(((r=(o=(n=(e=this.candidates)===null||e===void 0?void 0:e[0])===null||n===void 0?void 0:n.content)===null||o===void 0?void 0:o.parts)===null||r===void 0?void 0:r.length)===0)return;this.candidates&&this.candidates.length>1&&console.warn("there are multiple candidates in the response, returning code execution result from the first one.");const f=(c=(u=(s=(i=this.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content)===null||u===void 0?void 0:u.parts)===null||c===void 0?void 0:c.filter(p=>p.codeExecutionResult).map(p=>p.codeExecutionResult).filter(p=>p!==void 0);if((f==null?void 0:f.length)!==0)return(d=f==null?void 0:f[0])===null||d===void 0?void 0:d.output}}class nd{}class od{}class Qg{}class Xg{}class Zg{}class jg{}class rd{}class id{}class sd{}class ey{}class Wr{_fromAPIResponse({apiResponse:e,isVertexAI:n}){const o=new Wr;let r;const i=e;return n?r=qg(i):r=Bg(i),Object.assign(o,r),o}}class ld{}class ad{}class ud{}class ty{}class ny{}class oy{}class dd{}class ry{get text(){var e,n,o;let r="",i=!1;const s=[];for(const u of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[c,d]of Object.entries(u))c!=="text"&&c!=="thought"&&d!==null&&s.push(c);if(typeof u.text=="string"){if(typeof u.thought=="boolean"&&u.thought)continue;i=!0,r+=u.text}}return s.length>0&&console.warn(`there are non-text parts ${s} in the response, returning concatenation of all text parts. Please refer to the non text parts for a full response from model.`),i?r:void 0}get data(){var e,n,o;let r="";const i=[];for(const s of(o=(n=(e=this.serverContent)===null||e===void 0?void 0:e.modelTurn)===null||n===void 0?void 0:n.parts)!==null&&o!==void 0?o:[]){for(const[u,c]of Object.entries(s))u!=="inlineData"&&c!==null&&i.push(u);s.inlineData&&typeof s.inlineData.data=="string"&&(r+=atob(s.inlineData.data))}return i.length>0&&console.warn(`there are non-data parts ${i} in the response, returning concatenation of all data parts. Please refer to the non data parts for a full response from model.`),r.length>0?btoa(r):void 0}}class iy{get audioChunk(){if(this.serverContent&&this.serverContent.audioChunks&&this.serverContent.audioChunks.length>0)return this.serverContent.audioChunks[0]}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function B(t,e){if(!e||typeof e!="string")throw new Error("model is required and must be a string");if(t.isVertexAI()){if(e.startsWith("publishers/")||e.startsWith("projects/")||e.startsWith("models/"))return e;if(e.indexOf("/")>=0){const n=e.split("/",2);return`publishers/${n[0]}/models/${n[1]}`}else return`publishers/google/models/${e}`}else return e.startsWith("models/")||e.startsWith("tunedModels/")?e:`models/${e}`}function ep(t,e){const n=B(t,e);return n?n.startsWith("publishers/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}`:n.startsWith("models/")&&t.isVertexAI()?`projects/${t.getProject()}/locations/${t.getLocation()}/publishers/google/${n}`:n:""}function tp(t){return Array.isArray(t)?t.map(e=>br(e)):[br(t)]}function br(t){if(typeof t=="object"&&t!==null)return t;throw new Error(`Could not parse input as Blob. Unsupported blob type: ${typeof t}`)}function np(t){const e=br(t);if(e.mimeType&&e.mimeType.startsWith("image/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function op(t){const e=br(t);if(e.mimeType&&e.mimeType.startsWith("audio/"))return e;throw new Error(`Unsupported mime type: ${e.mimeType}`)}function cd(t){if(t==null)throw new Error("PartUnion is required");if(typeof t=="object")return t;if(typeof t=="string")return{text:t};throw new Error(`Unsupported part type: ${typeof t}`)}function rp(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("PartListUnion is required");return Array.isArray(t)?t.map(e=>cd(e)):[cd(t)]}function zs(t){return t!=null&&typeof t=="object"&&"parts"in t&&Array.isArray(t.parts)}function fd(t){return t!=null&&typeof t=="object"&&"functionCall"in t}function pd(t){return t!=null&&typeof t=="object"&&"functionResponse"in t}function ge(t){if(t==null)throw new Error("ContentUnion is required");return zs(t)?t:{role:"user",parts:rp(t)}}function Wl(t,e){if(!e)return[];if(t.isVertexAI()&&Array.isArray(e))return e.flatMap(n=>{const o=ge(n);return o.parts&&o.parts.length>0&&o.parts[0].text!==void 0?[o.parts[0].text]:[]});if(t.isVertexAI()){const n=ge(e);return n.parts&&n.parts.length>0&&n.parts[0].text!==void 0?[n.parts[0].text]:[]}return Array.isArray(e)?e.map(n=>ge(n)):[ge(e)]}function Ge(t){if(t==null||Array.isArray(t)&&t.length===0)throw new Error("contents are required");if(!Array.isArray(t)){if(fd(t)||pd(t))throw new Error("To specify functionCall or functionResponse parts, please wrap them in a Content object, specifying the role for them");return[ge(t)]}const e=[],n=[],o=zs(t[0]);for(const r of t){const i=zs(r);if(i!=o)throw new Error("Mixing Content and Parts is not supported, please group the parts into a the appropriate Content objects and specify the roles for them");if(i)e.push(r);else{if(fd(r)||pd(r))throw new Error("To specify functionCall or functionResponse parts, please wrap them, and any other parts, in Content objects as appropriate, specifying the role for them");n.push(r)}}return o||e.push({role:"user",parts:rp(n)}),e}function sy(t,e){t.includes("null")&&(e.nullable=!0);const n=t.filter(o=>o!=="null");if(n.length===1)e.type=Object.values(H).includes(n[0].toUpperCase())?n[0].toUpperCase():H.TYPE_UNSPECIFIED;else{e.anyOf=[];for(const o of n)e.anyOf.push({type:Object.values(H).includes(o.toUpperCase())?o.toUpperCase():H.TYPE_UNSPECIFIED})}}function _n(t){const e={},n=["items"],o=["anyOf"],r=["properties"];if(t.type&&t.anyOf)throw new Error("type and anyOf cannot be both populated.");const i=t.anyOf;i!=null&&i.length==2&&(i[0].type==="null"?(e.nullable=!0,t=i[1]):i[1].type==="null"&&(e.nullable=!0,t=i[0])),t.type instanceof Array&&sy(t.type,e);for(const[s,u]of Object.entries(t))if(u!=null)if(s=="type"){if(u==="null")throw new Error("type: null can not be the only possible type for the field.");if(u instanceof Array)continue;e.type=Object.values(H).includes(u.toUpperCase())?u.toUpperCase():H.TYPE_UNSPECIFIED}else if(n.includes(s))e[s]=_n(u);else if(o.includes(s)){const c=[];for(const d of u){if(d.type=="null"){e.nullable=!0;continue}c.push(_n(d))}e[s]=c}else if(r.includes(s)){const c={};for(const[d,f]of Object.entries(u))c[d]=_n(f);e[s]=c}else{if(s==="additionalProperties")continue;e[s]=u}return e}function bl(t){return _n(t)}function Yl(t){if(typeof t=="object")return t;if(typeof t=="string")return{voiceConfig:{prebuiltVoiceConfig:{voiceName:t}}};throw new Error(`Unsupported speechConfig type: ${typeof t}`)}function Ol(t){if("multiSpeakerVoiceConfig"in t)throw new Error("multiSpeakerVoiceConfig is not supported in the live API.");return t}function Bn(t){if(t.functionDeclarations)for(const e of t.functionDeclarations)e.parameters&&(Object.keys(e.parameters).includes("$schema")?e.parametersJsonSchema||(e.parametersJsonSchema=e.parameters,delete e.parameters):e.parameters=_n(e.parameters)),e.response&&(Object.keys(e.response).includes("$schema")?e.responseJsonSchema||(e.responseJsonSchema=e.response,delete e.response):e.response=_n(e.response));return t}function qn(t){if(t==null)throw new Error("tools is required");if(!Array.isArray(t))throw new Error("tools is required and must be an array of Tools");const e=[];for(const n of t)e.push(n);return e}function ly(t,e,n,o=1){const r=!e.startsWith(`${n}/`)&&e.split("/").length===o;return t.isVertexAI()?e.startsWith("projects/")?e:e.startsWith("locations/")?`projects/${t.getProject()}/${e}`:e.startsWith(`${n}/`)?`projects/${t.getProject()}/locations/${t.getLocation()}/${e}`:r?`projects/${t.getProject()}/locations/${t.getLocation()}/${n}/${e}`:e:r?`${n}/${e}`:e}function mt(t,e){if(typeof e!="string")throw new Error("name must be a string");return ly(t,e,"cachedContents")}function ip(t){switch(t){case"STATE_UNSPECIFIED":return"JOB_STATE_UNSPECIFIED";case"CREATING":return"JOB_STATE_RUNNING";case"ACTIVE":return"JOB_STATE_SUCCEEDED";case"FAILED":return"JOB_STATE_FAILED";default:return t}}function Ut(t){return Jl(t)}function ay(t){return t!=null&&typeof t=="object"&&"name"in t}function uy(t){return t!=null&&typeof t=="object"&&"video"in t}function dy(t){return t!=null&&typeof t=="object"&&"uri"in t}function sp(t){var e;let n;if(ay(t)&&(n=t.name),!(dy(t)&&(n=t.uri,n===void 0))&&!(uy(t)&&(n=(e=t.video)===null||e===void 0?void 0:e.uri,n===void 0))){if(typeof t=="string"&&(n=t),n===void 0)throw new Error("Could not extract file name from the provided input.");if(n.startsWith("https://")){const r=n.split("files/")[1].match(/[a-z0-9]+/);if(r===null)throw new Error(`Could not extract file name from URI ${n}`);n=r[0]}else n.startsWith("files/")&&(n=n.split("files/")[1]);return n}}function lp(t,e){let n;return t.isVertexAI()?n=e?"publishers/google/models":"models":n=e?"models":"tunedModels",n}function ap(t){for(const e of["models","tunedModels","publisherModels"])if(cy(t,e))return t[e];return[]}function cy(t,e){return t!==null&&typeof t=="object"&&e in t}function fy(t,e={}){const n=t,o={name:n.name,description:n.description,parametersJsonSchema:n.inputSchema};return n.outputSchema&&(o.responseJsonSchema=n.outputSchema),e.behavior&&(o.behavior=e.behavior),{functionDeclarations:[o]}}function py(t,e={}){const n=[],o=new Set;for(const r of t){const i=r.name;if(o.has(i))throw new Error(`Duplicate function name ${i} found in MCP tools. Please ensure function names are unique.`);o.add(i);const s=fy(r,e);s.functionDeclarations&&n.push(...s.functionDeclarations)}return{functionDeclarations:n}}function up(t,e){let n;if(typeof e=="string")if(t.isVertexAI())if(e.startsWith("gs://"))n={format:"jsonl",gcsUri:[e]};else if(e.startsWith("bq://"))n={format:"bigquery",bigqueryUri:e};else throw new Error(`Unsupported string source for Vertex AI: ${e}`);else if(e.startsWith("files/"))n={fileName:e};else throw new Error(`Unsupported string source for Gemini API: ${e}`);else if(Array.isArray(e)){if(t.isVertexAI())throw new Error("InlinedRequest[] is not supported in Vertex AI.");n={inlinedRequests:e}}else n=e;const o=[n.gcsUri,n.bigqueryUri].filter(Boolean).length,r=[n.inlinedRequests,n.fileName].filter(Boolean).length;if(t.isVertexAI()){if(r>0||o!==1)throw new Error("Exactly one of `gcsUri` or `bigqueryUri` must be set for Vertex AI.")}else if(o>0||r!==1)throw new Error("Exactly one of `inlinedRequests`, `fileName`, must be set for Gemini API.");return n}function my(t){if(typeof t!="string")return t;const e=t;if(e.startsWith("gs://"))return{format:"jsonl",gcsUri:e};if(e.startsWith("bq://"))return{format:"bigquery",bigqueryUri:e};throw new Error(`Unsupported destination: ${e}`)}function dp(t){if(typeof t!="object"||t===null)return{};const e=t,n=e.inlinedResponses;if(typeof n!="object"||n===null)return t;const r=n.inlinedResponses;if(!Array.isArray(r)||r.length===0)return t;let i=!1;for(const s of r){if(typeof s!="object"||s===null)continue;const c=s.response;if(typeof c!="object"||c===null)continue;if(c.embedding!==void 0){i=!0;break}}return i&&(e.inlinedEmbedContentResponses=e.inlinedResponses,delete e.inlinedResponses),t}function $n(t,e){const n=e;if(!t.isVertexAI()){if(/batches\/[^/]+$/.test(n))return n.split("/").pop();throw new Error(`Invalid batch job name: ${n}.`)}if(/^projects\/[^/]+\/locations\/[^/]+\/batchPredictionJobs\/[^/]+$/.test(n))return n.split("/").pop();if(/^\d+$/.test(n))return n;throw new Error(`Invalid batch job name: ${n}.`)}function cp(t){const e=t;return e==="BATCH_STATE_UNSPECIFIED"?"JOB_STATE_UNSPECIFIED":e==="BATCH_STATE_PENDING"?"JOB_STATE_PENDING":e==="BATCH_STATE_RUNNING"?"JOB_STATE_RUNNING":e==="BATCH_STATE_SUCCEEDED"?"JOB_STATE_SUCCEEDED":e==="BATCH_STATE_FAILED"?"JOB_STATE_FAILED":e==="BATCH_STATE_CANCELLED"?"JOB_STATE_CANCELLED":e==="BATCH_STATE_EXPIRED"?"JOB_STATE_EXPIRED":e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function hy(t){const e={},n=l(t,["responsesFile"]);n!=null&&a(e,["fileName"],n);const o=l(t,["inlinedResponses","inlinedResponses"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>by(s))),a(e,["inlinedResponses"],i)}const r=l(t,["inlinedEmbedContentResponses","inlinedResponses"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["inlinedEmbedContentResponses"],i)}return e}function gy(t){const e={},n=l(t,["predictionsFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsDestination","outputUriPrefix"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigqueryDestination","outputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function yy(t){const e={},n=l(t,["format"]);n!=null&&a(e,["predictionsFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsDestination","outputUriPrefix"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigqueryDestination","outputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedResponses"])!==void 0)throw new Error("inlinedResponses parameter is not supported in Vertex AI.");if(l(t,["inlinedEmbedContentResponses"])!==void 0)throw new Error("inlinedEmbedContentResponses parameter is not supported in Vertex AI.");return e}function vr(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata","displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["metadata","state"]);r!=null&&a(e,["state"],cp(r));const i=l(t,["metadata","createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["metadata","endTime"]);s!=null&&a(e,["endTime"],s);const u=l(t,["metadata","updateTime"]);u!=null&&a(e,["updateTime"],u);const c=l(t,["metadata","model"]);c!=null&&a(e,["model"],c);const d=l(t,["metadata","output"]);return d!=null&&a(e,["dest"],hy(dp(d))),e}function Js(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],cp(r));const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["createTime"]);s!=null&&a(e,["createTime"],s);const u=l(t,["startTime"]);u!=null&&a(e,["startTime"],u);const c=l(t,["endTime"]);c!=null&&a(e,["endTime"],c);const d=l(t,["updateTime"]);d!=null&&a(e,["updateTime"],d);const f=l(t,["model"]);f!=null&&a(e,["model"],f);const p=l(t,["inputConfig"]);p!=null&&a(e,["src"],vy(p));const m=l(t,["outputConfig"]);return m!=null&&a(e,["dest"],gy(dp(m))),e}function vy(t){const e={},n=l(t,["instancesFormat"]);n!=null&&a(e,["format"],n);const o=l(t,["gcsSource","uris"]);o!=null&&a(e,["gcsUri"],o);const r=l(t,["bigquerySource","inputUri"]);return r!=null&&a(e,["bigqueryUri"],r),e}function Ty(t,e){const n={};if(l(e,["format"])!==void 0)throw new Error("format parameter is not supported in Gemini API.");if(l(e,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(e,["bigqueryUri"])!==void 0)throw new Error("bigqueryUri parameter is not supported in Gemini API.");const o=l(e,["fileName"]);o!=null&&a(n,["fileName"],o);const r=l(e,["inlinedRequests"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Wy(t,s))),a(n,["requests","requests"],i)}return n}function xy(t){const e={},n=l(t,["format"]);n!=null&&a(e,["instancesFormat"],n);const o=l(t,["gcsUri"]);o!=null&&a(e,["gcsSource","uris"],o);const r=l(t,["bigqueryUri"]);if(r!=null&&a(e,["bigquerySource","inputUri"],r),l(t,["fileName"])!==void 0)throw new Error("fileName parameter is not supported in Vertex AI.");if(l(t,["inlinedRequests"])!==void 0)throw new Error("inlinedRequests parameter is not supported in Vertex AI.");return e}function Sy(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Cy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],$n(t,o)),n}function Ey(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],$n(t,o)),n}function wy(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],_y(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],s);const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const f=l(t,["logprobsResult"]);f!=null&&a(e,["logprobsResult"],f);const p=l(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),a(e,["safetyRatings"],m)}return e}function _y(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function fp(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>jy(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function ky(t,e){const n={},o=l(t,["displayName"]);if(e!==void 0&&o!=null&&a(e,["batch","displayName"],o),l(t,["dest"])!==void 0)throw new Error("dest parameter is not supported in Gemini API.");return n}function Iy(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["dest"]);return e!==void 0&&r!=null&&a(e,["outputConfig"],yy(my(r))),n}function md(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],Ty(t,up(t,r)));const i=l(e,["config"]);return i!=null&&ky(i,n),n}function Ny(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],B(t,o));const r=l(e,["src"]);r!=null&&a(n,["inputConfig"],xy(up(t,r)));const i=l(e,["config"]);return i!=null&&Iy(i,n),n}function Ay(t,e){const n={},o=l(t,["displayName"]);return e!==void 0&&o!=null&&a(e,["batch","displayName"],o),n}function Py(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["src"]);r!=null&&a(n,["batch","inputConfig"],Vy(t,r));const i=l(e,["config"]);return i!=null&&Ay(i,n),n}function Ry(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],$n(t,o)),n}function My(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],$n(t,o)),n}function Dy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function Ly(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);return i!=null&&a(e,["error"],i),e}function Uy(t,e){const n={},o=l(e,["contents"]);if(o!=null){let i=Wl(t,o);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["requests[]","request","content"],i)}const r=l(e,["config"]);return r!=null&&(a(n,["_self"],Fy(r,n)),Hg(n,{"requests[].*":"requests[].request.*"})),n}function Fy(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Vy(t,e){const n={},o=l(e,["fileName"]);o!=null&&a(n,["file_name"],o);const r=l(e,["inlinedRequests"]);return r!=null&&a(n,["requests"],Uy(t,r)),n}function Hy(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Gy(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],fp(ge(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&a(o,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const y=l(e,["presencePenalty"]);y!=null&&a(o,["presencePenalty"],y);const x=l(e,["frequencyPenalty"]);x!=null&&a(o,["frequencyPenalty"],x);const S=l(e,["seed"]);S!=null&&a(o,["seed"],S);const w=l(e,["responseMimeType"]);w!=null&&a(o,["responseMimeType"],w);const v=l(e,["responseSchema"]);v!=null&&a(o,["responseSchema"],bl(v));const g=l(e,["responseJsonSchema"]);if(g!=null&&a(o,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=l(e,["safetySettings"]);if(n!==void 0&&T!=null){let $=T;Array.isArray($)&&($=$.map(ce=>e0(ce))),a(n,["safetySettings"],$)}const C=l(e,["tools"]);if(n!==void 0&&C!=null){let $=qn(C);Array.isArray($)&&($=$.map(ce=>t0(Bn(ce)))),a(n,["tools"],$)}const E=l(e,["toolConfig"]);if(n!==void 0&&E!=null&&a(n,["toolConfig"],E),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&a(n,["cachedContent"],mt(t,k));const _=l(e,["responseModalities"]);_!=null&&a(o,["responseModalities"],_);const N=l(e,["mediaResolution"]);N!=null&&a(o,["mediaResolution"],N);const A=l(e,["speechConfig"]);if(A!=null&&a(o,["speechConfig"],Yl(A)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);R!=null&&a(o,["thinkingConfig"],R);const z=l(e,["imageConfig"]);return z!=null&&a(o,["imageConfig"],z),o}function By(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>wy(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function qy(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],$n(t,o)),n}function $y(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],$n(t,o)),n}function zy(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Jy(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],n),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Wy(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["request","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let u=Ge(r);Array.isArray(u)&&(u=u.map(c=>fp(c))),a(n,["request","contents"],u)}const i=l(e,["metadata"]);i!=null&&a(n,["metadata"],i);const s=l(e,["config"]);return s!=null&&a(n,["request","generationConfig"],Gy(t,s,l(n,["request"],{}))),n}function by(t){const e={},n=l(t,["response"]);n!=null&&a(e,["response"],By(n));const o=l(t,["error"]);return o!=null&&a(e,["error"],o),e}function Yy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);if(e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),l(t,["filter"])!==void 0)throw new Error("filter parameter is not supported in Gemini API.");return n}function Oy(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function Ky(t){const e={},n=l(t,["config"]);return n!=null&&Yy(n,e),e}function Qy(t){const e={},n=l(t,["config"]);return n!=null&&Oy(n,e),e}function Xy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["operations"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>vr(s))),a(e,["batchJobs"],i)}return e}function Zy(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["batchPredictionJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Js(s))),a(e,["batchJobs"],i)}return e}function jy(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],n);const o=l(t,["thought"]);o!=null&&a(e,["thought"],o);const r=l(t,["inlineData"]);r!=null&&a(e,["inlineData"],Sy(r));const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Hy(i));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["functionCall"]);u!=null&&a(e,["functionCall"],u);const c=l(t,["codeExecutionResult"]);c!=null&&a(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&a(e,["executableCode"],d);const f=l(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function e0(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&a(e,["category"],n);const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function t0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["functionDeclarations"],d)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearch"]);o!=null&&a(e,["googleSearch"],Jy(o));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&a(e,["googleSearchRetrieval"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["googleMaps"]);i!=null&&a(e,["googleMaps"],zy(i));const s=l(t,["urlContext"]);s!=null&&a(e,["urlContext"],s);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const c=l(t,["codeExecution"]);return c!=null&&a(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */var Zt;(function(t){t.PAGED_ITEM_BATCH_JOBS="batchJobs",t.PAGED_ITEM_MODELS="models",t.PAGED_ITEM_TUNING_JOBS="tuningJobs",t.PAGED_ITEM_FILES="files",t.PAGED_ITEM_CACHED_CONTENTS="cachedContents"})(Zt||(Zt={}));class Ho{constructor(e,n,o,r){this.pageInternal=[],this.paramsInternal={},this.requestInternal=n,this.init(e,o,r)}init(e,n,o){var r,i;this.nameInternal=e,this.pageInternal=n[this.nameInternal]||[],this.sdkHttpResponseInternal=n==null?void 0:n.sdkHttpResponse,this.idxInternal=0;let s={config:{}};!o||Object.keys(o).length===0?s={config:{}}:typeof o=="object"?s=Object.assign({},o):s=o,s.config&&(s.config.pageToken=n.nextPageToken),this.paramsInternal=s,this.pageInternalSize=(i=(r=s.config)===null||r===void 0?void 0:r.pageSize)!==null&&i!==void 0?i:this.pageInternal.length}initNextPage(e){this.init(this.nameInternal,e,this.paramsInternal)}get page(){return this.pageInternal}get name(){return this.nameInternal}get pageSize(){return this.pageInternalSize}get sdkHttpResponse(){return this.sdkHttpResponseInternal}get params(){return this.paramsInternal}get pageLength(){return this.pageInternal.length}getItem(e){return this.pageInternal[e]}[Symbol.asyncIterator](){return{next:async()=>{if(this.idxInternal>=this.pageLength)if(this.hasNextPage())await this.nextPage();else return{value:void 0,done:!0};const e=this.getItem(this.idxInternal);return this.idxInternal+=1,{value:e,done:!1}},return:async()=>({value:void 0,done:!0})}}async nextPage(){if(!this.hasNextPage())throw new Error("No more pages to fetch.");const e=await this.requestInternal(this.params);return this.initNextPage(e),this.page}hasNextPage(){var e;return((e=this.params.config)===null||e===void 0?void 0:e.pageToken)!==void 0}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class n0 extends tn{constructor(e){super(),this.apiClient=e,this.create=async n=>(this.apiClient.isVertexAI()&&(n.config=this.formatDestination(n.src,n.config)),this.createInternal(n)),this.createEmbeddings=async n=>{if(console.warn("batches.createEmbeddings() is experimental and may change without notice."),this.apiClient.isVertexAI())throw new Error("Vertex AI does not support batches.createEmbeddings.");return this.createEmbeddingsInternal(n)},this.list=async(n={})=>new Ho(Zt.PAGED_ITEM_BATCH_JOBS,o=>this.listInternal(o),await this.listInternal(n),n)}createInlinedGenerateContentRequest(e){const n=md(this.apiClient,e),o=n._url,r=D("{model}:batchGenerateContent",o),u=n.batch.inputConfig.requests,c=u.requests,d=[];for(const f of c){const p=Object.assign({},f);if(p.systemInstruction){const m=p.systemInstruction;delete p.systemInstruction;const y=p.request;y.systemInstruction=m,p.request=y}d.push(p)}return u.requests=d,delete n.config,delete n._url,delete n._query,{path:r,body:n}}getGcsUri(e){if(typeof e=="string")return e.startsWith("gs://")?e:void 0;if(!Array.isArray(e)&&e.gcsUri&&e.gcsUri.length>0)return e.gcsUri[0]}getBigqueryUri(e){if(typeof e=="string")return e.startsWith("bq://")?e:void 0;if(!Array.isArray(e))return e.bigqueryUri}formatDestination(e,n){const o=n?Object.assign({},n):{},r=Date.now().toString();if(o.displayName||(o.displayName=`genaiBatchJob_${r}`),o.dest===void 0){const i=this.getGcsUri(e),s=this.getBigqueryUri(e);if(i)i.endsWith(".jsonl")?o.dest=`${i.slice(0,-6)}/dest`:o.dest=`${i}_dest_${r}`;else if(s)o.dest=`${s}_dest_${r}`;else throw new Error("Unsupported source for Vertex AI: No GCS or BigQuery URI found.")}return o}async createInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Ny(this.apiClient,e);return u=D("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Js(f))}else{const d=md(this.apiClient,e);return u=D("{model}:batchGenerateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>vr(f))}}async createEmbeddingsInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Py(this.apiClient,e);return i=D("{model}:asyncBatchEmbedContent",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>vr(c))}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=$y(this.apiClient,e);return u=D("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>Js(f))}else{const d=qy(this.apiClient,e);return u=D("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>vr(f))}}async cancel(e){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const c=Ey(this.apiClient,e);s=D("batchPredictionJobs/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=Cy(this.apiClient,e);s=D("batches/{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Qy(e);return u=D("batchPredictionJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Zy(f),m=new dd;return Object.assign(m,p),m})}else{const d=Ky(e);return u=D("batches",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Xy(f),m=new dd;return Object.assign(m,p),m})}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=My(this.apiClient,e);return u=D("batchPredictionJobs/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>Ly(f))}else{const d=Ry(this.apiClient,e);return u=D("batches/{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>Dy(f))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function o0(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function hd(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>w0(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function r0(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let f=Ge(s);Array.isArray(f)&&(f=f.map(p=>hd(p))),a(e,["contents"],f)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],hd(ge(u)));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let f=c;Array.isArray(f)&&(f=f.map(p=>_0(p))),a(e,["tools"],f)}const d=l(t,["toolConfig"]);if(e!==void 0&&d!=null&&a(e,["toolConfig"],d),l(t,["kmsKeyName"])!==void 0)throw new Error("kmsKeyName parameter is not supported in Gemini API.");return n}function i0(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);e!==void 0&&r!=null&&a(e,["expireTime"],r);const i=l(t,["displayName"]);e!==void 0&&i!=null&&a(e,["displayName"],i);const s=l(t,["contents"]);if(e!==void 0&&s!=null){let p=Ge(s);Array.isArray(p)&&(p=p.map(m=>m)),a(e,["contents"],p)}const u=l(t,["systemInstruction"]);e!==void 0&&u!=null&&a(e,["systemInstruction"],ge(u));const c=l(t,["tools"]);if(e!==void 0&&c!=null){let p=c;Array.isArray(p)&&(p=p.map(m=>k0(m))),a(e,["tools"],p)}const d=l(t,["toolConfig"]);e!==void 0&&d!=null&&a(e,["toolConfig"],d);const f=l(t,["kmsKeyName"]);return e!==void 0&&f!=null&&a(e,["encryption_spec","kmsKeyName"],f),n}function s0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],ep(t,o));const r=l(e,["config"]);return r!=null&&r0(r,n),n}function l0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["model"],ep(t,o));const r=l(e,["config"]);return r!=null&&i0(r,n),n}function a0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],mt(t,o)),n}function u0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],mt(t,o)),n}function d0(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function c0(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function f0(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function p0(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function m0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],mt(t,o)),n}function h0(t,e){const n={},o=l(e,["name"]);return o!=null&&a(n,["_url","name"],mt(t,o)),n}function g0(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function y0(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],n),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function v0(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function T0(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function x0(t){const e={},n=l(t,["config"]);return n!=null&&v0(n,e),e}function S0(t){const e={},n=l(t,["config"]);return n!=null&&T0(n,e),e}function C0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function E0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["cachedContents"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["cachedContents"],i)}return e}function w0(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],n);const o=l(t,["thought"]);o!=null&&a(e,["thought"],o);const r=l(t,["inlineData"]);r!=null&&a(e,["inlineData"],o0(r));const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],f0(i));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["functionCall"]);u!=null&&a(e,["functionCall"],u);const c=l(t,["codeExecutionResult"]);c!=null&&a(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&a(e,["executableCode"],d);const f=l(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function _0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["functionDeclarations"],d)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearch"]);o!=null&&a(e,["googleSearch"],y0(o));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&a(e,["googleSearchRetrieval"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["googleMaps"]);i!=null&&a(e,["googleMaps"],g0(i));const s=l(t,["urlContext"]);s!=null&&a(e,["urlContext"],s);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const c=l(t,["codeExecution"]);return c!=null&&a(e,["codeExecution"],c),e}function k0(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>p0(m))),a(e,["functionDeclarations"],p)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],s);const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],u);const c=l(t,["urlContext"]);c!=null&&a(e,["urlContext"],c);const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],d);const f=l(t,["codeExecution"]);return f!=null&&a(e,["codeExecution"],f),e}function I0(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function N0(t,e){const n={},o=l(t,["ttl"]);e!==void 0&&o!=null&&a(e,["ttl"],o);const r=l(t,["expireTime"]);return e!==void 0&&r!=null&&a(e,["expireTime"],r),n}function A0(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],mt(t,o));const r=l(e,["config"]);return r!=null&&I0(r,n),n}function P0(t,e){const n={},o=l(e,["name"]);o!=null&&a(n,["_url","name"],mt(t,o));const r=l(e,["config"]);return r!=null&&N0(r,n),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class R0 extends tn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ho(Zt.PAGED_ITEM_CACHED_CONTENTS,o=>this.listInternal(o),await this.listInternal(n),n)}async create(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=l0(this.apiClient,e);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=s0(this.apiClient,e);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=h0(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=m0(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=u0(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=c0(f),m=new ad;return Object.assign(m,p),m})}else{const d=a0(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=d0(f),m=new ad;return Object.assign(m,p),m})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=P0(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>f)}else{const d=A0(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>f)}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=S0(e);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=E0(f),m=new ud;return Object.assign(m,p),m})}else{const d=x0(e);return u=D("cachedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=C0(f),m=new ud;return Object.assign(m,p),m})}}}function gd(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],o=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&o>=t.length&&(t=void 0),{value:t&&t[o++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function b(t){return this instanceof b?(this.v=t,this):new b(t)}function kn(t,e,n){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var o=n.apply(t,e||[]),r,i=[];return r=Object.create((typeof AsyncIterator=="function"?AsyncIterator:Object).prototype),u("next"),u("throw"),u("return",s),r[Symbol.asyncIterator]=function(){return this},r;function s(y){return function(x){return Promise.resolve(x).then(y,p)}}function u(y,x){o[y]&&(r[y]=function(S){return new Promise(function(w,v){i.push([y,S,w,v])>1||c(y,S)})},x&&(r[y]=x(r[y])))}function c(y,x){try{d(o[y](x))}catch(S){m(i[0][3],S)}}function d(y){y.value instanceof b?Promise.resolve(y.value.v).then(f,p):m(i[0][2],y)}function f(y){c("next",y)}function p(y){c("throw",y)}function m(y,x){y(x),i.shift(),i.length&&c(i[0][0],i[0][1])}}function po(t){if(!Symbol.asyncIterator)throw new TypeError("Symbol.asyncIterator is not defined.");var e=t[Symbol.asyncIterator],n;return e?e.call(t):(t=typeof gd=="function"?gd(t):t[Symbol.iterator](),n={},o("next"),o("throw"),o("return"),n[Symbol.asyncIterator]=function(){return this},n);function o(i){n[i]=t[i]&&function(s){return new Promise(function(u,c){s=t[i](s),r(u,c,s.done,s.value)})}}function r(i,s,u,c){Promise.resolve(c).then(function(d){i({value:d,done:u})},s)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function M0(t){var e;if(t.candidates==null||t.candidates.length===0)return!1;const n=(e=t.candidates[0])===null||e===void 0?void 0:e.content;return n===void 0?!1:pp(n)}function pp(t){if(t.parts===void 0||t.parts.length===0)return!1;for(const e of t.parts)if(e===void 0||Object.keys(e).length===0)return!1;return!0}function D0(t){if(t.length!==0){for(const e of t)if(e.role!=="user"&&e.role!=="model")throw new Error(`Role must be user or model, but got ${e.role}.`)}}function yd(t){if(t===void 0||t.length===0)return[];const e=[],n=t.length;let o=0;for(;o<n;)if(t[o].role==="user")e.push(t[o]),o++;else{const r=[];let i=!0;for(;o<n&&t[o].role==="model";)r.push(t[o]),i&&!pp(t[o])&&(i=!1),o++;i?e.push(...r):e.pop()}return e}class L0{constructor(e,n){this.modelsModule=e,this.apiClient=n}create(e){return new U0(this.apiClient,this.modelsModule,e.model,e.config,structuredClone(e.history))}}class U0{constructor(e,n,o,r={},i=[]){this.apiClient=e,this.modelsModule=n,this.model=o,this.config=r,this.history=i,this.sendPromise=Promise.resolve(),D0(i)}async sendMessage(e){var n;await this.sendPromise;const o=ge(e.message),r=this.modelsModule.generateContent({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});return this.sendPromise=(async()=>{var i,s,u;const c=await r,d=(s=(i=c.candidates)===null||i===void 0?void 0:i[0])===null||s===void 0?void 0:s.content,f=c.automaticFunctionCallingHistory,p=this.getHistory(!0).length;let m=[];f!=null&&(m=(u=f.slice(p))!==null&&u!==void 0?u:[]);const y=d?[d]:[];this.recordHistory(o,y,m)})(),await this.sendPromise.catch(()=>{this.sendPromise=Promise.resolve()}),r}async sendMessageStream(e){var n;await this.sendPromise;const o=ge(e.message),r=this.modelsModule.generateContentStream({model:this.model,contents:this.getHistory(!0).concat(o),config:(n=e.config)!==null&&n!==void 0?n:this.config});this.sendPromise=r.then(()=>{}).catch(()=>{});const i=await r;return this.processStreamResponse(i,o)}getHistory(e=!1){const n=e?yd(this.history):this.history;return structuredClone(n)}processStreamResponse(e,n){var o,r;return kn(this,arguments,function*(){var s,u,c,d;const f=[];try{for(var p=!0,m=po(e),y;y=yield b(m.next()),s=y.done,!s;p=!0){d=y.value,p=!1;const x=d;if(M0(x)){const S=(r=(o=x.candidates)===null||o===void 0?void 0:o[0])===null||r===void 0?void 0:r.content;S!==void 0&&f.push(S)}yield yield b(x)}}catch(x){u={error:x}}finally{try{!p&&!s&&(c=m.return)&&(yield b(c.call(m)))}finally{if(u)throw u.error}}this.recordHistory(n,f)})}recordHistory(e,n,o){let r=[];n.length>0&&n.every(i=>i.role!==void 0)?r=n:r.push({role:"model",parts:[]}),o&&o.length>0?this.history.push(...yd(o)):this.history.push(e),this.history.push(...r)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class ci extends Error{constructor(e){super(e.message),this.name="ApiError",this.status=e.status,Object.setPrototypeOf(this,ci.prototype)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function F0(t){const e={},n=l(t,["file"]);return n!=null&&a(e,["file"],n),e}function V0(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function H0(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],sp(n)),e}function G0(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function B0(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","file"],sp(n)),e}function q0(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);return e!==void 0&&r!=null&&a(e,["_query","pageToken"],r),n}function $0(t){const e={},n=l(t,["config"]);return n!=null&&q0(n,e),e}function z0(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["files"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["files"],i)}return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class J0 extends tn{constructor(e){super(),this.apiClient=e,this.list=async(n={})=>new Ho(Zt.PAGED_ITEM_FILES,o=>this.listInternal(o),await this.listInternal(n),n)}async upload(e){if(this.apiClient.isVertexAI())throw new Error("Vertex AI does not support uploading files. You can share files through a GCS bucket.");return this.apiClient.uploadFile(e.file,e.config).then(n=>n)}async download(e){await this.apiClient.downloadFile(e)}async listInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=$0(e);return i=D("files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=z0(c),f=new ty;return Object.assign(f,d),f})}}async createInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=F0(e);return i=D("upload/v1beta/files",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=V0(c),f=new ny;return Object.assign(f,d),f})}}async get(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=B0(e);return i=D("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>c)}}async delete(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=H0(e);return i=D("files/{file}",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=G0(c),f=new oy;return Object.assign(f,d),f})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Tr(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function W0(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>sv(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function b0(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Y0(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function O0(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["audioTimestamp"]);o!=null&&a(e,["audioTimestamp"],o);const r=l(t,["candidateCount"]);r!=null&&a(e,["candidateCount"],r);const i=l(t,["enableAffectiveDialog"]);i!=null&&a(e,["enableAffectiveDialog"],i);const s=l(t,["frequencyPenalty"]);s!=null&&a(e,["frequencyPenalty"],s);const u=l(t,["logprobs"]);u!=null&&a(e,["logprobs"],u);const c=l(t,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const d=l(t,["mediaResolution"]);d!=null&&a(e,["mediaResolution"],d);const f=l(t,["presencePenalty"]);f!=null&&a(e,["presencePenalty"],f);const p=l(t,["responseJsonSchema"]);p!=null&&a(e,["responseJsonSchema"],p);const m=l(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const y=l(t,["responseMimeType"]);y!=null&&a(e,["responseMimeType"],y);const x=l(t,["responseModalities"]);x!=null&&a(e,["responseModalities"],x);const S=l(t,["responseSchema"]);S!=null&&a(e,["responseSchema"],S);const w=l(t,["routingConfig"]);w!=null&&a(e,["routingConfig"],w);const v=l(t,["seed"]);v!=null&&a(e,["seed"],v);const g=l(t,["speechConfig"]);g!=null&&a(e,["speechConfig"],mp(g));const T=l(t,["stopSequences"]);T!=null&&a(e,["stopSequences"],T);const C=l(t,["temperature"]);C!=null&&a(e,["temperature"],C);const E=l(t,["thinkingConfig"]);E!=null&&a(e,["thinkingConfig"],E);const k=l(t,["topK"]);k!=null&&a(e,["topK"],k);const _=l(t,["topP"]);if(_!=null&&a(e,["topP"],_),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function K0(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Q0(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],n),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function X0(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Ol(p));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const y=l(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&a(e,["setup","systemInstruction"],W0(ge(x)));const S=l(t,["tools"]);if(e!==void 0&&S!=null){let k=qn(S);Array.isArray(k)&&(k=k.map(_=>av(Bn(_)))),a(e,["setup","tools"],k)}const w=l(t,["sessionResumption"]);e!==void 0&&w!=null&&a(e,["setup","sessionResumption"],lv(w));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","inputAudioTranscription"],v);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&a(e,["setup","outputAudioTranscription"],g);const T=l(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&a(e,["setup","realtimeInputConfig"],T);const C=l(t,["contextWindowCompression"]);e!==void 0&&C!=null&&a(e,["setup","contextWindowCompression"],C);const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&a(e,["setup","proactivity"],E),n}function Z0(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],O0(o));const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],mp(Ol(p)));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const y=l(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&a(e,["setup","systemInstruction"],ge(x));const S=l(t,["tools"]);if(e!==void 0&&S!=null){let k=qn(S);Array.isArray(k)&&(k=k.map(_=>uv(Bn(_)))),a(e,["setup","tools"],k)}const w=l(t,["sessionResumption"]);e!==void 0&&w!=null&&a(e,["setup","sessionResumption"],w);const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","inputAudioTranscription"],v);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&a(e,["setup","outputAudioTranscription"],g);const T=l(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&a(e,["setup","realtimeInputConfig"],T);const C=l(t,["contextWindowCompression"]);e!==void 0&&C!=null&&a(e,["setup","contextWindowCompression"],C);const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&a(e,["setup","proactivity"],E),n}function j0(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],B(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],X0(r,n)),n}function ev(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],B(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],Z0(r,n)),n}function tv(t){const e={},n=l(t,["musicGenerationConfig"]);return n!=null&&a(e,["musicGenerationConfig"],n),e}function nv(t){const e={},n=l(t,["weightedPrompts"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["weightedPrompts"],o)}return e}function ov(t){const e={},n=l(t,["media"]);if(n!=null){let d=tp(n);Array.isArray(d)&&(d=d.map(f=>Tr(f))),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],Tr(op(o)));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],Tr(np(i)));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function rv(t){const e={},n=l(t,["media"]);if(n!=null){let d=tp(n);Array.isArray(d)&&(d=d.map(f=>f)),a(e,["mediaChunks"],d)}const o=l(t,["audio"]);o!=null&&a(e,["audio"],op(o));const r=l(t,["audioStreamEnd"]);r!=null&&a(e,["audioStreamEnd"],r);const i=l(t,["video"]);i!=null&&a(e,["video"],np(i));const s=l(t,["text"]);s!=null&&a(e,["text"],s);const u=l(t,["activityStart"]);u!=null&&a(e,["activityStart"],u);const c=l(t,["activityEnd"]);return c!=null&&a(e,["activityEnd"],c),e}function iv(t){const e={},n=l(t,["setupComplete"]);n!=null&&a(e,["setupComplete"],n);const o=l(t,["serverContent"]);o!=null&&a(e,["serverContent"],o);const r=l(t,["toolCall"]);r!=null&&a(e,["toolCall"],r);const i=l(t,["toolCallCancellation"]);i!=null&&a(e,["toolCallCancellation"],i);const s=l(t,["usageMetadata"]);s!=null&&a(e,["usageMetadata"],dv(s));const u=l(t,["goAway"]);u!=null&&a(e,["goAway"],u);const c=l(t,["sessionResumptionUpdate"]);return c!=null&&a(e,["sessionResumptionUpdate"],c),e}function sv(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],n);const o=l(t,["thought"]);o!=null&&a(e,["thought"],o);const r=l(t,["inlineData"]);r!=null&&a(e,["inlineData"],Tr(r));const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],b0(i));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["functionCall"]);u!=null&&a(e,["functionCall"],u);const c=l(t,["codeExecutionResult"]);c!=null&&a(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&a(e,["executableCode"],d);const f=l(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function lv(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function mp(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],n),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=l(t,["languageCode"]);return o!=null&&a(e,["languageCode"],o),e}function av(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["functionDeclarations"],d)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearch"]);o!=null&&a(e,["googleSearch"],Q0(o));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&a(e,["googleSearchRetrieval"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["googleMaps"]);i!=null&&a(e,["googleMaps"],K0(i));const s=l(t,["urlContext"]);s!=null&&a(e,["urlContext"],s);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const c=l(t,["codeExecution"]);return c!=null&&a(e,["codeExecution"],c),e}function uv(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Y0(m))),a(e,["functionDeclarations"],p)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],s);const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],u);const c=l(t,["urlContext"]);c!=null&&a(e,["urlContext"],c);const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],d);const f=l(t,["codeExecution"]);return f!=null&&a(e,["codeExecution"],f),e}function dv(t){const e={},n=l(t,["promptTokenCount"]);n!=null&&a(e,["promptTokenCount"],n);const o=l(t,["cachedContentTokenCount"]);o!=null&&a(e,["cachedContentTokenCount"],o);const r=l(t,["candidatesTokenCount"]);r!=null&&a(e,["responseTokenCount"],r);const i=l(t,["toolUsePromptTokenCount"]);i!=null&&a(e,["toolUsePromptTokenCount"],i);const s=l(t,["thoughtsTokenCount"]);s!=null&&a(e,["thoughtsTokenCount"],s);const u=l(t,["totalTokenCount"]);u!=null&&a(e,["totalTokenCount"],u);const c=l(t,["promptTokensDetails"]);if(c!=null){let y=c;Array.isArray(y)&&(y=y.map(x=>x)),a(e,["promptTokensDetails"],y)}const d=l(t,["cacheTokensDetails"]);if(d!=null){let y=d;Array.isArray(y)&&(y=y.map(x=>x)),a(e,["cacheTokensDetails"],y)}const f=l(t,["candidatesTokensDetails"]);if(f!=null){let y=f;Array.isArray(y)&&(y=y.map(x=>x)),a(e,["responseTokensDetails"],y)}const p=l(t,["toolUsePromptTokensDetails"]);if(p!=null){let y=p;Array.isArray(y)&&(y=y.map(x=>x)),a(e,["toolUsePromptTokensDetails"],y)}const m=l(t,["trafficType"]);return m!=null&&a(e,["trafficType"],m),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function cv(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function fv(t){const e={},n=l(t,["content"]);n!=null&&a(e,["content"],n);const o=l(t,["citationMetadata"]);o!=null&&a(e,["citationMetadata"],pv(o));const r=l(t,["tokenCount"]);r!=null&&a(e,["tokenCount"],r);const i=l(t,["finishReason"]);i!=null&&a(e,["finishReason"],i);const s=l(t,["urlContextMetadata"]);s!=null&&a(e,["urlContextMetadata"],s);const u=l(t,["avgLogprobs"]);u!=null&&a(e,["avgLogprobs"],u);const c=l(t,["groundingMetadata"]);c!=null&&a(e,["groundingMetadata"],c);const d=l(t,["index"]);d!=null&&a(e,["index"],d);const f=l(t,["logprobsResult"]);f!=null&&a(e,["logprobsResult"],f);const p=l(t,["safetyRatings"]);if(p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>y)),a(e,["safetyRatings"],m)}return e}function pv(t){const e={},n=l(t,["citationSources"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["citations"],o)}return e}function mv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let i=Ge(r);Array.isArray(i)&&(i=i.map(s=>s)),a(n,["contents"],i)}return n}function hv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["tokensInfo"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["tokensInfo"],r)}return e}function gv(t){const e={},n=l(t,["values"]);n!=null&&a(e,["values"],n);const o=l(t,["statistics"]);return o!=null&&a(e,["statistics"],yv(o)),e}function yv(t){const e={},n=l(t,["truncated"]);n!=null&&a(e,["truncated"],n);const o=l(t,["token_count"]);return o!=null&&a(e,["tokenCount"],o),e}function fi(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>CT(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function vv(t){const e={},n=l(t,["controlType"]);n!=null&&a(e,["controlType"],n);const o=l(t,["enableControlImageComputation"]);return o!=null&&a(e,["computeControl"],o),e}function Tv(t){const e={};if(l(t,["systemInstruction"])!==void 0)throw new Error("systemInstruction parameter is not supported in Gemini API.");if(l(t,["tools"])!==void 0)throw new Error("tools parameter is not supported in Gemini API.");if(l(t,["generationConfig"])!==void 0)throw new Error("generationConfig parameter is not supported in Gemini API.");return e}function xv(t,e){const n={},o=l(t,["systemInstruction"]);e!==void 0&&o!=null&&a(e,["systemInstruction"],ge(o));const r=l(t,["tools"]);if(e!==void 0&&r!=null){let s=r;Array.isArray(s)&&(s=s.map(u=>Tp(u))),a(e,["tools"],s)}const i=l(t,["generationConfig"]);return e!==void 0&&i!=null&&a(e,["generationConfig"],uT(i)),n}function Sv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let s=Ge(r);Array.isArray(s)&&(s=s.map(u=>fi(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&Tv(i),n}function Cv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let s=Ge(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&xv(i,n),n}function Ev(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);o!=null&&a(e,["totalTokens"],o);const r=l(t,["cachedContentTokenCount"]);return r!=null&&a(e,["cachedContentTokenCount"],r),e}function wv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["totalTokens"]);return o!=null&&a(e,["totalTokens"],o),e}function _v(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],B(t,o)),n}function kv(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],B(t,o)),n}function Iv(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Nv(t){const e={},n=l(t,["sdkHttpResponse"]);return n!=null&&a(e,["sdkHttpResponse"],n),e}function Av(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const y=l(t,["language"]);e!==void 0&&y!=null&&a(e,["parameters","language"],y);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&a(e,["parameters","outputOptions","mimeType"],x);const S=l(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","compressionQuality"],S);const w=l(t,["addWatermark"]);e!==void 0&&w!=null&&a(e,["parameters","addWatermark"],w);const v=l(t,["labels"]);e!==void 0&&v!=null&&a(e,["labels"],v);const g=l(t,["editMode"]);e!==void 0&&g!=null&&a(e,["parameters","editMode"],g);const T=l(t,["baseSteps"]);return e!==void 0&&T!=null&&a(e,["parameters","editConfig","baseSteps"],T),n}function Pv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["referenceImages"]);if(i!=null){let u=i;Array.isArray(u)&&(u=u.map(c=>NT(c))),a(n,["instances[0]","referenceImages"],u)}const s=l(e,["config"]);return s!=null&&Av(s,n),n}function Rv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>pi(i))),a(e,["generatedImages"],r)}return e}function Mv(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["requests[]","taskType"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["requests[]","title"],r);const i=l(t,["outputDimensionality"]);if(e!==void 0&&i!=null&&a(e,["requests[]","outputDimensionality"],i),l(t,["mimeType"])!==void 0)throw new Error("mimeType parameter is not supported in Gemini API.");if(l(t,["autoTruncate"])!==void 0)throw new Error("autoTruncate parameter is not supported in Gemini API.");return n}function Dv(t,e){const n={},o=l(t,["taskType"]);e!==void 0&&o!=null&&a(e,["instances[]","task_type"],o);const r=l(t,["title"]);e!==void 0&&r!=null&&a(e,["instances[]","title"],r);const i=l(t,["outputDimensionality"]);e!==void 0&&i!=null&&a(e,["parameters","outputDimensionality"],i);const s=l(t,["mimeType"]);e!==void 0&&s!=null&&a(e,["instances[]","mimeType"],s);const u=l(t,["autoTruncate"]);return e!==void 0&&u!=null&&a(e,["parameters","autoTruncate"],u),n}function Lv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let u=Wl(t,r);Array.isArray(u)&&(u=u.map(c=>c)),a(n,["requests[]","content"],u)}const i=l(e,["config"]);i!=null&&Mv(i,n);const s=l(e,["model"]);return s!==void 0&&a(n,["requests[]","model"],B(t,s)),n}function Uv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let s=Wl(t,r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["instances[]","content"],s)}const i=l(e,["config"]);return i!=null&&Dv(i,n),n}function Fv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>s)),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function Vv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions[]","embeddings"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>gv(s))),a(e,["embeddings"],i)}const r=l(t,["metadata"]);return r!=null&&a(e,["metadata"],r),e}function Hv(t){const e={},n=l(t,["endpoint"]);n!=null&&a(e,["name"],n);const o=l(t,["deployedModelId"]);return o!=null&&a(e,["deployedModelId"],o),e}function Gv(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Bv(t){const e={};if(l(t,["behavior"])!==void 0)throw new Error("behavior parameter is not supported in Vertex AI.");const n=l(t,["description"]);n!=null&&a(e,["description"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["parameters"]);r!=null&&a(e,["parameters"],r);const i=l(t,["parametersJsonSchema"]);i!=null&&a(e,["parametersJsonSchema"],i);const s=l(t,["response"]);s!=null&&a(e,["response"],s);const u=l(t,["responseJsonSchema"]);return u!=null&&a(e,["responseJsonSchema"],u),e}function qv(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],fi(ge(r)));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&a(o,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const y=l(e,["presencePenalty"]);y!=null&&a(o,["presencePenalty"],y);const x=l(e,["frequencyPenalty"]);x!=null&&a(o,["frequencyPenalty"],x);const S=l(e,["seed"]);S!=null&&a(o,["seed"],S);const w=l(e,["responseMimeType"]);w!=null&&a(o,["responseMimeType"],w);const v=l(e,["responseSchema"]);v!=null&&a(o,["responseSchema"],bl(v));const g=l(e,["responseJsonSchema"]);if(g!=null&&a(o,["responseJsonSchema"],g),l(e,["routingConfig"])!==void 0)throw new Error("routingConfig parameter is not supported in Gemini API.");if(l(e,["modelSelectionConfig"])!==void 0)throw new Error("modelSelectionConfig parameter is not supported in Gemini API.");const T=l(e,["safetySettings"]);if(n!==void 0&&T!=null){let $=T;Array.isArray($)&&($=$.map(ce=>AT(ce))),a(n,["safetySettings"],$)}const C=l(e,["tools"]);if(n!==void 0&&C!=null){let $=qn(C);Array.isArray($)&&($=$.map(ce=>UT(Bn(ce)))),a(n,["tools"],$)}const E=l(e,["toolConfig"]);if(n!==void 0&&E!=null&&a(n,["toolConfig"],E),l(e,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const k=l(e,["cachedContent"]);n!==void 0&&k!=null&&a(n,["cachedContent"],mt(t,k));const _=l(e,["responseModalities"]);_!=null&&a(o,["responseModalities"],_);const N=l(e,["mediaResolution"]);N!=null&&a(o,["mediaResolution"],N);const A=l(e,["speechConfig"]);if(A!=null&&a(o,["speechConfig"],Yl(A)),l(e,["audioTimestamp"])!==void 0)throw new Error("audioTimestamp parameter is not supported in Gemini API.");const R=l(e,["thinkingConfig"]);R!=null&&a(o,["thinkingConfig"],R);const z=l(e,["imageConfig"]);return z!=null&&a(o,["imageConfig"],z),o}function $v(t,e,n){const o={},r=l(e,["systemInstruction"]);n!==void 0&&r!=null&&a(n,["systemInstruction"],ge(r));const i=l(e,["temperature"]);i!=null&&a(o,["temperature"],i);const s=l(e,["topP"]);s!=null&&a(o,["topP"],s);const u=l(e,["topK"]);u!=null&&a(o,["topK"],u);const c=l(e,["candidateCount"]);c!=null&&a(o,["candidateCount"],c);const d=l(e,["maxOutputTokens"]);d!=null&&a(o,["maxOutputTokens"],d);const f=l(e,["stopSequences"]);f!=null&&a(o,["stopSequences"],f);const p=l(e,["responseLogprobs"]);p!=null&&a(o,["responseLogprobs"],p);const m=l(e,["logprobs"]);m!=null&&a(o,["logprobs"],m);const y=l(e,["presencePenalty"]);y!=null&&a(o,["presencePenalty"],y);const x=l(e,["frequencyPenalty"]);x!=null&&a(o,["frequencyPenalty"],x);const S=l(e,["seed"]);S!=null&&a(o,["seed"],S);const w=l(e,["responseMimeType"]);w!=null&&a(o,["responseMimeType"],w);const v=l(e,["responseSchema"]);v!=null&&a(o,["responseSchema"],bl(v));const g=l(e,["responseJsonSchema"]);g!=null&&a(o,["responseJsonSchema"],g);const T=l(e,["routingConfig"]);T!=null&&a(o,["routingConfig"],T);const C=l(e,["modelSelectionConfig"]);C!=null&&a(o,["modelConfig"],C);const E=l(e,["safetySettings"]);if(n!==void 0&&E!=null){let Ie=E;Array.isArray(Ie)&&(Ie=Ie.map(Ft=>Ft)),a(n,["safetySettings"],Ie)}const k=l(e,["tools"]);if(n!==void 0&&k!=null){let Ie=qn(k);Array.isArray(Ie)&&(Ie=Ie.map(Ft=>Tp(Bn(Ft)))),a(n,["tools"],Ie)}const _=l(e,["toolConfig"]);n!==void 0&&_!=null&&a(n,["toolConfig"],_);const N=l(e,["labels"]);n!==void 0&&N!=null&&a(n,["labels"],N);const A=l(e,["cachedContent"]);n!==void 0&&A!=null&&a(n,["cachedContent"],mt(t,A));const R=l(e,["responseModalities"]);R!=null&&a(o,["responseModalities"],R);const z=l(e,["mediaResolution"]);z!=null&&a(o,["mediaResolution"],z);const $=l(e,["speechConfig"]);$!=null&&a(o,["speechConfig"],vp(Yl($)));const ce=l(e,["audioTimestamp"]);ce!=null&&a(o,["audioTimestamp"],ce);const zn=l(e,["thinkingConfig"]);zn!=null&&a(o,["thinkingConfig"],zn);const Bo=l(e,["imageConfig"]);return Bo!=null&&a(o,["imageConfig"],Bo),o}function vd(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let s=Ge(r);Array.isArray(s)&&(s=s.map(u=>fi(u))),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],qv(t,i,n)),n}function Td(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["contents"]);if(r!=null){let s=Ge(r);Array.isArray(s)&&(s=s.map(u=>u)),a(n,["contents"],s)}const i=l(e,["config"]);return i!=null&&a(n,["generationConfig"],$v(t,i,n)),n}function xd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let c=o;Array.isArray(c)&&(c=c.map(d=>fv(d))),a(e,["candidates"],c)}const r=l(t,["modelVersion"]);r!=null&&a(e,["modelVersion"],r);const i=l(t,["promptFeedback"]);i!=null&&a(e,["promptFeedback"],i);const s=l(t,["responseId"]);s!=null&&a(e,["responseId"],s);const u=l(t,["usageMetadata"]);return u!=null&&a(e,["usageMetadata"],u),e}function Sd(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["candidates"]);if(o!=null){let d=o;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["candidates"],d)}const r=l(t,["createTime"]);r!=null&&a(e,["createTime"],r);const i=l(t,["modelVersion"]);i!=null&&a(e,["modelVersion"],i);const s=l(t,["promptFeedback"]);s!=null&&a(e,["promptFeedback"],s);const u=l(t,["responseId"]);u!=null&&a(e,["responseId"],u);const c=l(t,["usageMetadata"]);return c!=null&&a(e,["usageMetadata"],c),e}function zv(t,e){const n={};if(l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["negativePrompt"])!==void 0)throw new Error("negativePrompt parameter is not supported in Gemini API.");const o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["aspectRatio"]);e!==void 0&&r!=null&&a(e,["parameters","aspectRatio"],r);const i=l(t,["guidanceScale"]);if(e!==void 0&&i!=null&&a(e,["parameters","guidanceScale"],i),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const s=l(t,["safetyFilterLevel"]);e!==void 0&&s!=null&&a(e,["parameters","safetySetting"],s);const u=l(t,["personGeneration"]);e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u);const c=l(t,["includeSafetyAttributes"]);e!==void 0&&c!=null&&a(e,["parameters","includeSafetyAttributes"],c);const d=l(t,["includeRaiReason"]);e!==void 0&&d!=null&&a(e,["parameters","includeRaiReason"],d);const f=l(t,["language"]);e!==void 0&&f!=null&&a(e,["parameters","language"],f);const p=l(t,["outputMimeType"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","mimeType"],p);const m=l(t,["outputCompressionQuality"]);if(e!==void 0&&m!=null&&a(e,["parameters","outputOptions","compressionQuality"],m),l(t,["addWatermark"])!==void 0)throw new Error("addWatermark parameter is not supported in Gemini API.");if(l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");const y=l(t,["imageSize"]);if(e!==void 0&&y!=null&&a(e,["parameters","sampleImageSize"],y),l(t,["enhancePrompt"])!==void 0)throw new Error("enhancePrompt parameter is not supported in Gemini API.");return n}function Jv(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["negativePrompt"]);e!==void 0&&r!=null&&a(e,["parameters","negativePrompt"],r);const i=l(t,["numberOfImages"]);e!==void 0&&i!=null&&a(e,["parameters","sampleCount"],i);const s=l(t,["aspectRatio"]);e!==void 0&&s!=null&&a(e,["parameters","aspectRatio"],s);const u=l(t,["guidanceScale"]);e!==void 0&&u!=null&&a(e,["parameters","guidanceScale"],u);const c=l(t,["seed"]);e!==void 0&&c!=null&&a(e,["parameters","seed"],c);const d=l(t,["safetyFilterLevel"]);e!==void 0&&d!=null&&a(e,["parameters","safetySetting"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=l(t,["includeSafetyAttributes"]);e!==void 0&&p!=null&&a(e,["parameters","includeSafetyAttributes"],p);const m=l(t,["includeRaiReason"]);e!==void 0&&m!=null&&a(e,["parameters","includeRaiReason"],m);const y=l(t,["language"]);e!==void 0&&y!=null&&a(e,["parameters","language"],y);const x=l(t,["outputMimeType"]);e!==void 0&&x!=null&&a(e,["parameters","outputOptions","mimeType"],x);const S=l(t,["outputCompressionQuality"]);e!==void 0&&S!=null&&a(e,["parameters","outputOptions","compressionQuality"],S);const w=l(t,["addWatermark"]);e!==void 0&&w!=null&&a(e,["parameters","addWatermark"],w);const v=l(t,["labels"]);e!==void 0&&v!=null&&a(e,["labels"],v);const g=l(t,["imageSize"]);e!==void 0&&g!=null&&a(e,["parameters","sampleImageSize"],g);const T=l(t,["enhancePrompt"]);return e!==void 0&&T!=null&&a(e,["parameters","enhancePrompt"],T),n}function Wv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&zv(i,n),n}function bv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["config"]);return i!=null&&Jv(i,n),n}function Yv(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>iT(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],gp(r)),e}function Ov(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let i=o;Array.isArray(i)&&(i=i.map(s=>pi(s))),a(e,["generatedImages"],i)}const r=l(t,["positivePromptSafetyAttributes"]);return r!=null&&a(e,["positivePromptSafetyAttributes"],yp(r)),e}function Kv(t,e){const n={},o=l(t,["numberOfVideos"]);if(e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o),l(t,["outputGcsUri"])!==void 0)throw new Error("outputGcsUri parameter is not supported in Gemini API.");if(l(t,["fps"])!==void 0)throw new Error("fps parameter is not supported in Gemini API.");const r=l(t,["durationSeconds"]);if(e!==void 0&&r!=null&&a(e,["parameters","durationSeconds"],r),l(t,["seed"])!==void 0)throw new Error("seed parameter is not supported in Gemini API.");const i=l(t,["aspectRatio"]);e!==void 0&&i!=null&&a(e,["parameters","aspectRatio"],i);const s=l(t,["resolution"]);e!==void 0&&s!=null&&a(e,["parameters","resolution"],s);const u=l(t,["personGeneration"]);if(e!==void 0&&u!=null&&a(e,["parameters","personGeneration"],u),l(t,["pubsubTopic"])!==void 0)throw new Error("pubsubTopic parameter is not supported in Gemini API.");const c=l(t,["negativePrompt"]);e!==void 0&&c!=null&&a(e,["parameters","negativePrompt"],c);const d=l(t,["enhancePrompt"]);if(e!==void 0&&d!=null&&a(e,["parameters","enhancePrompt"],d),l(t,["generateAudio"])!==void 0)throw new Error("generateAudio parameter is not supported in Gemini API.");const f=l(t,["lastFrame"]);e!==void 0&&f!=null&&a(e,["instances[0]","lastFrame"],mi(f));const p=l(t,["referenceImages"]);if(e!==void 0&&p!=null){let m=p;Array.isArray(m)&&(m=m.map(y=>OT(y))),a(e,["instances[0]","referenceImages"],m)}if(l(t,["mask"])!==void 0)throw new Error("mask parameter is not supported in Gemini API.");if(l(t,["compressionQuality"])!==void 0)throw new Error("compressionQuality parameter is not supported in Gemini API.");return n}function Qv(t,e){const n={},o=l(t,["numberOfVideos"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["outputGcsUri"]);e!==void 0&&r!=null&&a(e,["parameters","storageUri"],r);const i=l(t,["fps"]);e!==void 0&&i!=null&&a(e,["parameters","fps"],i);const s=l(t,["durationSeconds"]);e!==void 0&&s!=null&&a(e,["parameters","durationSeconds"],s);const u=l(t,["seed"]);e!==void 0&&u!=null&&a(e,["parameters","seed"],u);const c=l(t,["aspectRatio"]);e!==void 0&&c!=null&&a(e,["parameters","aspectRatio"],c);const d=l(t,["resolution"]);e!==void 0&&d!=null&&a(e,["parameters","resolution"],d);const f=l(t,["personGeneration"]);e!==void 0&&f!=null&&a(e,["parameters","personGeneration"],f);const p=l(t,["pubsubTopic"]);e!==void 0&&p!=null&&a(e,["parameters","pubsubTopic"],p);const m=l(t,["negativePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","negativePrompt"],m);const y=l(t,["enhancePrompt"]);e!==void 0&&y!=null&&a(e,["parameters","enhancePrompt"],y);const x=l(t,["generateAudio"]);e!==void 0&&x!=null&&a(e,["parameters","generateAudio"],x);const S=l(t,["lastFrame"]);e!==void 0&&S!=null&&a(e,["instances[0]","lastFrame"],Xe(S));const w=l(t,["referenceImages"]);if(e!==void 0&&w!=null){let T=w;Array.isArray(T)&&(T=T.map(C=>KT(C))),a(e,["instances[0]","referenceImages"],T)}const v=l(t,["mask"]);e!==void 0&&v!=null&&a(e,["instances[0]","mask"],YT(v));const g=l(t,["compressionQuality"]);return e!==void 0&&g!=null&&a(e,["parameters","compressionQuality"],g),n}function Xv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response","generateVideoResponse"]);return s!=null&&a(e,["response"],tT(s)),e}function Zv(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["metadata"]);o!=null&&a(e,["metadata"],o);const r=l(t,["done"]);r!=null&&a(e,["done"],r);const i=l(t,["error"]);i!=null&&a(e,["error"],i);const s=l(t,["response"]);return s!=null&&a(e,["response"],nT(s)),e}function jv(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],mi(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],xp(s));const u=l(e,["source"]);u!=null&&oT(u,n);const c=l(e,["config"]);return c!=null&&Kv(c,n),n}function eT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["prompt"]);r!=null&&a(n,["instances[0]","prompt"],r);const i=l(e,["image"]);i!=null&&a(n,["instances[0]","image"],Xe(i));const s=l(e,["video"]);s!=null&&a(n,["instances[0]","video"],Sp(s));const u=l(e,["source"]);u!=null&&rT(u,n);const c=l(e,["config"]);return c!=null&&Qv(c,n),n}function tT(t){const e={},n=l(t,["generatedSamples"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>lT(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function nT(t){const e={},n=l(t,["videos"]);if(n!=null){let i=n;Array.isArray(i)&&(i=i.map(s=>aT(s))),a(e,["generatedVideos"],i)}const o=l(t,["raiMediaFilteredCount"]);o!=null&&a(e,["raiMediaFilteredCount"],o);const r=l(t,["raiMediaFilteredReasons"]);return r!=null&&a(e,["raiMediaFilteredReasons"],r),e}function oT(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],mi(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],xp(i)),n}function rT(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Xe(r));const i=l(t,["video"]);return e!==void 0&&i!=null&&a(e,["instances[0]","video"],Sp(i)),n}function iT(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],mT(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);return r!=null&&a(e,["safetyAttributes"],gp(r)),e}function pi(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["image"],hp(n));const o=l(t,["raiFilteredReason"]);o!=null&&a(e,["raiFilteredReason"],o);const r=l(t,["_self"]);r!=null&&a(e,["safetyAttributes"],yp(r));const i=l(t,["prompt"]);return i!=null&&a(e,["enhancedPrompt"],i),e}function sT(t){const e={},n=l(t,["_self"]);n!=null&&a(e,["mask"],hp(n));const o=l(t,["labels"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>i)),a(e,["labels"],r)}return e}function lT(t){const e={},n=l(t,["video"]);return n!=null&&a(e,["video"],WT(n)),e}function aT(t){const e={},n=l(t,["_self"]);return n!=null&&a(e,["video"],bT(n)),e}function uT(t){const e={},n=l(t,["modelSelectionConfig"]);n!=null&&a(e,["modelConfig"],n);const o=l(t,["audioTimestamp"]);o!=null&&a(e,["audioTimestamp"],o);const r=l(t,["candidateCount"]);r!=null&&a(e,["candidateCount"],r);const i=l(t,["enableAffectiveDialog"]);i!=null&&a(e,["enableAffectiveDialog"],i);const s=l(t,["frequencyPenalty"]);s!=null&&a(e,["frequencyPenalty"],s);const u=l(t,["logprobs"]);u!=null&&a(e,["logprobs"],u);const c=l(t,["maxOutputTokens"]);c!=null&&a(e,["maxOutputTokens"],c);const d=l(t,["mediaResolution"]);d!=null&&a(e,["mediaResolution"],d);const f=l(t,["presencePenalty"]);f!=null&&a(e,["presencePenalty"],f);const p=l(t,["responseJsonSchema"]);p!=null&&a(e,["responseJsonSchema"],p);const m=l(t,["responseLogprobs"]);m!=null&&a(e,["responseLogprobs"],m);const y=l(t,["responseMimeType"]);y!=null&&a(e,["responseMimeType"],y);const x=l(t,["responseModalities"]);x!=null&&a(e,["responseModalities"],x);const S=l(t,["responseSchema"]);S!=null&&a(e,["responseSchema"],S);const w=l(t,["routingConfig"]);w!=null&&a(e,["routingConfig"],w);const v=l(t,["seed"]);v!=null&&a(e,["seed"],v);const g=l(t,["speechConfig"]);g!=null&&a(e,["speechConfig"],vp(g));const T=l(t,["stopSequences"]);T!=null&&a(e,["stopSequences"],T);const C=l(t,["temperature"]);C!=null&&a(e,["temperature"],C);const E=l(t,["thinkingConfig"]);E!=null&&a(e,["thinkingConfig"],E);const k=l(t,["topK"]);k!=null&&a(e,["topK"],k);const _=l(t,["topP"]);if(_!=null&&a(e,["topP"],_),l(t,["enableEnhancedCivicAnswers"])!==void 0)throw new Error("enableEnhancedCivicAnswers parameter is not supported in Vertex AI.");return e}function dT(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],B(t,o)),n}function cT(t,e){const n={},o=l(e,["model"]);return o!=null&&a(n,["_url","name"],B(t,o)),n}function fT(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function pT(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],n),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function mT(t){const e={},n=l(t,["bytesBase64Encoded"]);n!=null&&a(e,["imageBytes"],Ut(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function hp(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["imageBytes"],Ut(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function mi(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");const n=l(t,["imageBytes"]);n!=null&&a(e,["bytesBase64Encoded"],Ut(n));const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Xe(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["imageBytes"]);o!=null&&a(e,["bytesBase64Encoded"],Ut(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function hT(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],lp(t,u)),o}function gT(t,e,n){const o={},r=l(e,["pageSize"]);n!==void 0&&r!=null&&a(n,["_query","pageSize"],r);const i=l(e,["pageToken"]);n!==void 0&&i!=null&&a(n,["_query","pageToken"],i);const s=l(e,["filter"]);n!==void 0&&s!=null&&a(n,["_query","filter"],s);const u=l(e,["queryBase"]);return n!==void 0&&u!=null&&a(n,["_url","models_url"],lp(t,u)),o}function yT(t,e){const n={},o=l(e,["config"]);return o!=null&&hT(t,o,n),n}function vT(t,e){const n={},o=l(e,["config"]);return o!=null&&gT(t,o,n),n}function TT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=ap(r);Array.isArray(i)&&(i=i.map(s=>Ws(s))),a(e,["models"],i)}return e}function xT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["_self"]);if(r!=null){let i=ap(r);Array.isArray(i)&&(i=i.map(s=>bs(s))),a(e,["models"],i)}return e}function ST(t){const e={},n=l(t,["maskMode"]);n!=null&&a(e,["maskMode"],n);const o=l(t,["segmentationClasses"]);o!=null&&a(e,["maskClasses"],o);const r=l(t,["maskDilation"]);return r!=null&&a(e,["dilation"],r),e}function Ws(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["version"]);i!=null&&a(e,["version"],i);const s=l(t,["_self"]);s!=null&&a(e,["tunedModelInfo"],FT(s));const u=l(t,["inputTokenLimit"]);u!=null&&a(e,["inputTokenLimit"],u);const c=l(t,["outputTokenLimit"]);c!=null&&a(e,["outputTokenLimit"],c);const d=l(t,["supportedGenerationMethods"]);return d!=null&&a(e,["supportedActions"],d),e}function bs(t){const e={},n=l(t,["name"]);n!=null&&a(e,["name"],n);const o=l(t,["displayName"]);o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);r!=null&&a(e,["description"],r);const i=l(t,["versionId"]);i!=null&&a(e,["version"],i);const s=l(t,["deployedModels"]);if(s!=null){let p=s;Array.isArray(p)&&(p=p.map(m=>Hv(m))),a(e,["endpoints"],p)}const u=l(t,["labels"]);u!=null&&a(e,["labels"],u);const c=l(t,["_self"]);c!=null&&a(e,["tunedModelInfo"],VT(c));const d=l(t,["defaultCheckpointId"]);d!=null&&a(e,["defaultCheckpointId"],d);const f=l(t,["checkpoints"]);if(f!=null){let p=f;Array.isArray(p)&&(p=p.map(m=>m)),a(e,["checkpoints"],p)}return e}function CT(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],n);const o=l(t,["thought"]);o!=null&&a(e,["thought"],o);const r=l(t,["inlineData"]);r!=null&&a(e,["inlineData"],cv(r));const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Gv(i));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["functionCall"]);u!=null&&a(e,["functionCall"],u);const c=l(t,["codeExecutionResult"]);c!=null&&a(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&a(e,["executableCode"],d);const f=l(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function ET(t){const e={},n=l(t,["productImage"]);return n!=null&&a(e,["image"],Xe(n)),e}function wT(t,e){const n={},o=l(t,["numberOfImages"]);e!==void 0&&o!=null&&a(e,["parameters","sampleCount"],o);const r=l(t,["baseSteps"]);e!==void 0&&r!=null&&a(e,["parameters","editConfig","baseSteps"],r);const i=l(t,["outputGcsUri"]);e!==void 0&&i!=null&&a(e,["parameters","storageUri"],i);const s=l(t,["seed"]);e!==void 0&&s!=null&&a(e,["parameters","seed"],s);const u=l(t,["safetyFilterLevel"]);e!==void 0&&u!=null&&a(e,["parameters","safetySetting"],u);const c=l(t,["personGeneration"]);e!==void 0&&c!=null&&a(e,["parameters","personGeneration"],c);const d=l(t,["addWatermark"]);e!==void 0&&d!=null&&a(e,["parameters","addWatermark"],d);const f=l(t,["outputMimeType"]);e!==void 0&&f!=null&&a(e,["parameters","outputOptions","mimeType"],f);const p=l(t,["outputCompressionQuality"]);e!==void 0&&p!=null&&a(e,["parameters","outputOptions","compressionQuality"],p);const m=l(t,["enhancePrompt"]);e!==void 0&&m!=null&&a(e,["parameters","enhancePrompt"],m);const y=l(t,["labels"]);return e!==void 0&&y!=null&&a(e,["labels"],y),n}function _T(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["source"]);r!=null&&IT(r,n);const i=l(e,["config"]);return i!=null&&wT(i,n),n}function kT(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>pi(r))),a(e,["generatedImages"],o)}return e}function IT(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["personImage"]);e!==void 0&&r!=null&&a(e,["instances[0]","personImage","image"],Xe(r));const i=l(t,["productImages"]);if(e!==void 0&&i!=null){let s=i;Array.isArray(s)&&(s=s.map(u=>ET(u))),a(e,["instances[0]","productImages"],s)}return n}function NT(t){const e={},n=l(t,["referenceImage"]);n!=null&&a(e,["referenceImage"],Xe(n));const o=l(t,["referenceId"]);o!=null&&a(e,["referenceId"],o);const r=l(t,["referenceType"]);r!=null&&a(e,["referenceType"],r);const i=l(t,["maskImageConfig"]);i!=null&&a(e,["maskImageConfig"],ST(i));const s=l(t,["controlImageConfig"]);s!=null&&a(e,["controlImageConfig"],vv(s));const u=l(t,["styleImageConfig"]);u!=null&&a(e,["styleImageConfig"],u);const c=l(t,["subjectImageConfig"]);return c!=null&&a(e,["subjectImageConfig"],c),e}function gp(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function yp(t){const e={},n=l(t,["safetyAttributes","categories"]);n!=null&&a(e,["categories"],n);const o=l(t,["safetyAttributes","scores"]);o!=null&&a(e,["scores"],o);const r=l(t,["contentType"]);return r!=null&&a(e,["contentType"],r),e}function AT(t){const e={};if(l(t,["method"])!==void 0)throw new Error("method parameter is not supported in Gemini API.");const n=l(t,["category"]);n!=null&&a(e,["category"],n);const o=l(t,["threshold"]);return o!=null&&a(e,["threshold"],o),e}function PT(t){const e={},n=l(t,["image"]);return n!=null&&a(e,["image"],Xe(n)),e}function RT(t,e){const n={},o=l(t,["mode"]);e!==void 0&&o!=null&&a(e,["parameters","mode"],o);const r=l(t,["maxPredictions"]);e!==void 0&&r!=null&&a(e,["parameters","maxPredictions"],r);const i=l(t,["confidenceThreshold"]);e!==void 0&&i!=null&&a(e,["parameters","confidenceThreshold"],i);const s=l(t,["maskDilation"]);e!==void 0&&s!=null&&a(e,["parameters","maskDilation"],s);const u=l(t,["binaryColorThreshold"]);e!==void 0&&u!=null&&a(e,["parameters","binaryColorThreshold"],u);const c=l(t,["labels"]);return e!==void 0&&c!=null&&a(e,["labels"],c),n}function MT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["source"]);r!=null&&LT(r,n);const i=l(e,["config"]);return i!=null&&RT(i,n),n}function DT(t){const e={},n=l(t,["predictions"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>sT(r))),a(e,["generatedMasks"],o)}return e}function LT(t,e){const n={},o=l(t,["prompt"]);e!==void 0&&o!=null&&a(e,["instances[0]","prompt"],o);const r=l(t,["image"]);e!==void 0&&r!=null&&a(e,["instances[0]","image"],Xe(r));const i=l(t,["scribbleImage"]);return e!==void 0&&i!=null&&a(e,["instances[0]","scribble"],PT(i)),n}function vp(t){const e={},n=l(t,["voiceConfig"]);if(n!=null&&a(e,["voiceConfig"],n),l(t,["multiSpeakerVoiceConfig"])!==void 0)throw new Error("multiSpeakerVoiceConfig parameter is not supported in Vertex AI.");const o=l(t,["languageCode"]);return o!=null&&a(e,["languageCode"],o),e}function UT(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["functionDeclarations"],d)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearch"]);o!=null&&a(e,["googleSearch"],pT(o));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&a(e,["googleSearchRetrieval"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["googleMaps"]);i!=null&&a(e,["googleMaps"],fT(i));const s=l(t,["urlContext"]);s!=null&&a(e,["urlContext"],s);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const c=l(t,["codeExecution"]);return c!=null&&a(e,["codeExecution"],c),e}function Tp(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let p=n;Array.isArray(p)&&(p=p.map(m=>Bv(m))),a(e,["functionDeclarations"],p)}const o=l(t,["retrieval"]);o!=null&&a(e,["retrieval"],o);const r=l(t,["googleSearch"]);r!=null&&a(e,["googleSearch"],r);const i=l(t,["googleSearchRetrieval"]);i!=null&&a(e,["googleSearchRetrieval"],i);const s=l(t,["enterpriseWebSearch"]);s!=null&&a(e,["enterpriseWebSearch"],s);const u=l(t,["googleMaps"]);u!=null&&a(e,["googleMaps"],u);const c=l(t,["urlContext"]);c!=null&&a(e,["urlContext"],c);const d=l(t,["computerUse"]);d!=null&&a(e,["computerUse"],d);const f=l(t,["codeExecution"]);return f!=null&&a(e,["codeExecution"],f),e}function FT(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function VT(t){const e={},n=l(t,["labels","google-vertex-llm-tuning-base-model-id"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["createTime"]);o!=null&&a(e,["createTime"],o);const r=l(t,["updateTime"]);return r!=null&&a(e,["updateTime"],r),e}function HT(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function GT(t,e){const n={},o=l(t,["displayName"]);e!==void 0&&o!=null&&a(e,["displayName"],o);const r=l(t,["description"]);e!==void 0&&r!=null&&a(e,["description"],r);const i=l(t,["defaultCheckpointId"]);return e!==void 0&&i!=null&&a(e,["defaultCheckpointId"],i),n}function BT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","name"],B(t,o));const r=l(e,["config"]);return r!=null&&HT(r,n),n}function qT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["config"]);return r!=null&&GT(r,n),n}function $T(t,e){const n={},o=l(t,["outputGcsUri"]);e!==void 0&&o!=null&&a(e,["parameters","storageUri"],o);const r=l(t,["includeRaiReason"]);e!==void 0&&r!=null&&a(e,["parameters","includeRaiReason"],r);const i=l(t,["outputMimeType"]);e!==void 0&&i!=null&&a(e,["parameters","outputOptions","mimeType"],i);const s=l(t,["outputCompressionQuality"]);e!==void 0&&s!=null&&a(e,["parameters","outputOptions","compressionQuality"],s);const u=l(t,["enhanceInputImage"]);e!==void 0&&u!=null&&a(e,["parameters","upscaleConfig","enhanceInputImage"],u);const c=l(t,["imagePreservationFactor"]);e!==void 0&&c!=null&&a(e,["parameters","upscaleConfig","imagePreservationFactor"],c);const d=l(t,["labels"]);e!==void 0&&d!=null&&a(e,["labels"],d);const f=l(t,["numberOfImages"]);e!==void 0&&f!=null&&a(e,["parameters","sampleCount"],f);const p=l(t,["mode"]);return e!==void 0&&p!=null&&a(e,["parameters","mode"],p),n}function zT(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["_url","model"],B(t,o));const r=l(e,["image"]);r!=null&&a(n,["instances[0]","image"],Xe(r));const i=l(e,["upscaleFactor"]);i!=null&&a(n,["parameters","upscaleConfig","upscaleFactor"],i);const s=l(e,["config"]);return s!=null&&$T(s,n),n}function JT(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["predictions"]);if(o!=null){let r=o;Array.isArray(r)&&(r=r.map(i=>pi(i))),a(e,["generatedImages"],r)}return e}function WT(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["encodedVideo"]);o!=null&&a(e,["videoBytes"],Ut(o));const r=l(t,["encoding"]);return r!=null&&a(e,["mimeType"],r),e}function bT(t){const e={},n=l(t,["gcsUri"]);n!=null&&a(e,["uri"],n);const o=l(t,["bytesBase64Encoded"]);o!=null&&a(e,["videoBytes"],Ut(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}function YT(t){const e={},n=l(t,["image"]);n!=null&&a(e,["_self"],Xe(n));const o=l(t,["maskMode"]);return o!=null&&a(e,["maskMode"],o),e}function OT(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],mi(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function KT(t){const e={},n=l(t,["image"]);n!=null&&a(e,["image"],Xe(n));const o=l(t,["referenceType"]);return o!=null&&a(e,["referenceType"],o),e}function xp(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["uri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["encodedVideo"],Ut(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["encoding"],r),e}function Sp(t){const e={},n=l(t,["uri"]);n!=null&&a(e,["gcsUri"],n);const o=l(t,["videoBytes"]);o!=null&&a(e,["bytesBase64Encoded"],Ut(o));const r=l(t,["mimeType"]);return r!=null&&a(e,["mimeType"],r),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const QT="Content-Type",XT="X-Server-Timeout",ZT="User-Agent",Ys="x-goog-api-client",jT="1.26.0",ex=`google-genai-sdk/${jT}`,tx="v1beta1",nx="v1beta",Cd=/^\s*data: (.*)(?:\n\n|\r\r|\r\n\r\n)/;class ox{constructor(e){var n,o;this.clientOptions=Object.assign(Object.assign({},e),{project:e.project,location:e.location,apiKey:e.apiKey,vertexai:e.vertexai});const r={};this.clientOptions.vertexai?(r.apiVersion=(n=this.clientOptions.apiVersion)!==null&&n!==void 0?n:tx,r.baseUrl=this.baseUrlFromProjectLocation(),this.normalizeAuthParameters()):(r.apiVersion=(o=this.clientOptions.apiVersion)!==null&&o!==void 0?o:nx,r.baseUrl="https://generativelanguage.googleapis.com/"),r.headers=this.getDefaultHeaders(),this.clientOptions.httpOptions=r,e.httpOptions&&(this.clientOptions.httpOptions=this.patchHttpOptions(r,e.httpOptions))}baseUrlFromProjectLocation(){return this.clientOptions.project&&this.clientOptions.location&&this.clientOptions.location!=="global"?`https://${this.clientOptions.location}-aiplatform.googleapis.com/`:"https://aiplatform.googleapis.com/"}normalizeAuthParameters(){if(this.clientOptions.project&&this.clientOptions.location){this.clientOptions.apiKey=void 0;return}this.clientOptions.project=void 0,this.clientOptions.location=void 0}isVertexAI(){var e;return(e=this.clientOptions.vertexai)!==null&&e!==void 0?e:!1}getProject(){return this.clientOptions.project}getLocation(){return this.clientOptions.location}getApiVersion(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.apiVersion!==void 0)return this.clientOptions.httpOptions.apiVersion;throw new Error("API version is not set.")}getBaseUrl(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.baseUrl!==void 0)return this.clientOptions.httpOptions.baseUrl;throw new Error("Base URL is not set.")}getRequestUrl(){return this.getRequestUrlInternal(this.clientOptions.httpOptions)}getHeaders(){if(this.clientOptions.httpOptions&&this.clientOptions.httpOptions.headers!==void 0)return this.clientOptions.httpOptions.headers;throw new Error("Headers are not set.")}getRequestUrlInternal(e){if(!e||e.baseUrl===void 0||e.apiVersion===void 0)throw new Error("HTTP options are not correctly set.");const o=[e.baseUrl.endsWith("/")?e.baseUrl.slice(0,-1):e.baseUrl];return e.apiVersion&&e.apiVersion!==""&&o.push(e.apiVersion),o.join("/")}getBaseResourcePath(){return`projects/${this.clientOptions.project}/locations/${this.clientOptions.location}`}getApiKey(){return this.clientOptions.apiKey}getWebsocketBaseUrl(){const e=this.getBaseUrl(),n=new URL(e);return n.protocol=n.protocol=="http:"?"ws":"wss",n.toString()}setBaseUrl(e){if(this.clientOptions.httpOptions)this.clientOptions.httpOptions.baseUrl=e;else throw new Error("HTTP options are not correctly set.")}constructUrl(e,n,o){const r=[this.getRequestUrlInternal(n)];return o&&r.push(this.getBaseResourcePath()),e!==""&&r.push(e),new URL(`${r.join("/")}`)}shouldPrependVertexProjectPath(e){return!(this.clientOptions.apiKey||!this.clientOptions.vertexai||e.path.startsWith("projects/")||e.httpMethod==="GET"&&e.path.startsWith("publishers/google/models"))}async request(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);if(e.queryParams)for(const[s,u]of Object.entries(e.queryParams))r.searchParams.append(s,String(u));let i={};if(e.httpMethod==="GET"){if(e.body&&e.body!=="{}")throw new Error("Request body should be empty for GET request, but got non empty request body")}else i.body=e.body;return i=await this.includeExtraHttpOptionsToRequestInit(i,n,e.abortSignal),this.unaryApiCall(r,i,e.httpMethod)}patchHttpOptions(e,n){const o=JSON.parse(JSON.stringify(e));for(const[r,i]of Object.entries(n))typeof i=="object"?o[r]=Object.assign(Object.assign({},o[r]),i):i!==void 0&&(o[r]=i);return o}async requestStream(e){let n=this.clientOptions.httpOptions;e.httpOptions&&(n=this.patchHttpOptions(this.clientOptions.httpOptions,e.httpOptions));const o=this.shouldPrependVertexProjectPath(e),r=this.constructUrl(e.path,n,o);(!r.searchParams.has("alt")||r.searchParams.get("alt")!=="sse")&&r.searchParams.set("alt","sse");let i={};return i.body=e.body,i=await this.includeExtraHttpOptionsToRequestInit(i,n,e.abortSignal),this.streamApiCall(r,i,e.httpMethod)}async includeExtraHttpOptionsToRequestInit(e,n,o){if(n&&n.timeout||o){const r=new AbortController,i=r.signal;if(n.timeout&&(n==null?void 0:n.timeout)>0){const s=setTimeout(()=>r.abort(),n.timeout);s&&typeof s.unref=="function"&&s.unref()}o&&o.addEventListener("abort",()=>{r.abort()}),e.signal=i}return n&&n.extraBody!==null&&rx(e,n.extraBody),e.headers=await this.getHeadersInternal(n),e}async unaryApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Ed(r),new $s(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}async streamApiCall(e,n,o){return this.apiCall(e.toString(),Object.assign(Object.assign({},n),{method:o})).then(async r=>(await Ed(r),this.processStreamResponse(r))).catch(r=>{throw r instanceof Error?r:new Error(JSON.stringify(r))})}processStreamResponse(e){var n;return kn(this,arguments,function*(){const r=(n=e==null?void 0:e.body)===null||n===void 0?void 0:n.getReader(),i=new TextDecoder("utf-8");if(!r)throw new Error("Response body is empty");try{let s="";for(;;){const{done:u,value:c}=yield b(r.read());if(u){if(s.trim().length>0)throw new Error("Incomplete JSON segment at the end");break}const d=i.decode(c,{stream:!0});try{const p=JSON.parse(d);if("error"in p){const m=JSON.parse(JSON.stringify(p.error)),y=m.status,x=m.code,S=`got status: ${y}. ${JSON.stringify(p)}`;if(x>=400&&x<600)throw new ci({message:S,status:x})}}catch(p){if(p.name==="ApiError")throw p}s+=d;let f=s.match(Cd);for(;f;){const p=f[1];try{const m=new Response(p,{headers:e==null?void 0:e.headers,status:e==null?void 0:e.status,statusText:e==null?void 0:e.statusText});yield yield b(new $s(m)),s=s.slice(f[0].length),f=s.match(Cd)}catch(m){throw new Error(`exception parsing stream chunk ${p}. ${m}`)}}}}finally{r.releaseLock()}})}async apiCall(e,n){return fetch(e,n).catch(o=>{throw new Error(`exception ${o} sending request`)})}getDefaultHeaders(){const e={},n=ex+" "+this.clientOptions.userAgentExtra;return e[ZT]=n,e[Ys]=n,e[QT]="application/json",e}async getHeadersInternal(e){const n=new Headers;if(e&&e.headers){for(const[o,r]of Object.entries(e.headers))n.append(o,r);e.timeout&&e.timeout>0&&n.append(XT,String(Math.ceil(e.timeout/1e3)))}return await this.clientOptions.auth.addAuthHeaders(n),n}async uploadFile(e,n){var o;const r={};n!=null&&(r.mimeType=n.mimeType,r.name=n.name,r.displayName=n.displayName),r.name&&!r.name.startsWith("files/")&&(r.name=`files/${r.name}`);const i=this.clientOptions.uploader,s=await i.stat(e);r.sizeBytes=String(s.size);const u=(o=n==null?void 0:n.mimeType)!==null&&o!==void 0?o:s.type;if(u===void 0||u==="")throw new Error("Can not determine mimeType. Please provide mimeType in the config.");r.mimeType=u;const c=await this.fetchUploadUrl(r,n);return i.upload(e,c,this)}async downloadFile(e){await this.clientOptions.downloader.download(e,this)}async fetchUploadUrl(e,n){var o;let r={};n!=null&&n.httpOptions?r=n.httpOptions:r={apiVersion:"",headers:{"Content-Type":"application/json","X-Goog-Upload-Protocol":"resumable","X-Goog-Upload-Command":"start","X-Goog-Upload-Header-Content-Length":`${e.sizeBytes}`,"X-Goog-Upload-Header-Content-Type":`${e.mimeType}`}};const i={file:e},s=await this.request({path:D("upload/v1beta/files",i._url),body:JSON.stringify(i),httpMethod:"POST",httpOptions:r});if(!s||!(s!=null&&s.headers))throw new Error("Server did not return an HttpResponse or the returned HttpResponse did not have headers.");const u=(o=s==null?void 0:s.headers)===null||o===void 0?void 0:o["x-goog-upload-url"];if(u===void 0)throw new Error("Failed to get upload url. Server did not return the x-google-upload-url in the headers");return u}}async function Ed(t){var e;if(t===void 0)throw new Error("response is undefined");if(!t.ok){const n=t.status;let o;!((e=t.headers.get("content-type"))===null||e===void 0)&&e.includes("application/json")?o=await t.json():o={error:{message:await t.text(),code:t.status,status:t.statusText}};const r=JSON.stringify(o);throw n>=400&&n<600?new ci({message:r,status:n}):new Error(r)}}function rx(t,e){if(!e||Object.keys(e).length===0)return;if(t.body instanceof Blob){console.warn("includeExtraBodyToRequestInit: extraBody provided but current request body is a Blob. extraBody will be ignored as merging is not supported for Blob bodies.");return}let n={};if(typeof t.body=="string"&&t.body.length>0)try{const i=JSON.parse(t.body);if(typeof i=="object"&&i!==null&&!Array.isArray(i))n=i;else{console.warn("includeExtraBodyToRequestInit: Original request body is valid JSON but not a non-array object. Skip applying extraBody to the request body.");return}}catch{console.warn("includeExtraBodyToRequestInit: Original request body is not valid JSON. Skip applying extraBody to the request body.");return}function o(i,s){const u=Object.assign({},i);for(const c in s)if(Object.prototype.hasOwnProperty.call(s,c)){const d=s[c],f=u[c];d&&typeof d=="object"&&!Array.isArray(d)&&f&&typeof f=="object"&&!Array.isArray(f)?u[c]=o(f,d):(f&&d&&typeof f!=typeof d&&console.warn(`includeExtraBodyToRequestInit:deepMerge: Type mismatch for key "${c}". Original type: ${typeof f}, New type: ${typeof d}. Overwriting.`),u[c]=d)}return u}const r=o(n,e);t.body=JSON.stringify(r)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const ix="mcp_used/unknown";let sx=!1;function Cp(t){for(const e of t)if(lx(e)||typeof e=="object"&&"inputSchema"in e)return!0;return sx}function Ep(t){var e;const n=(e=t[Ys])!==null&&e!==void 0?e:"";t[Ys]=(n+` ${ix}`).trimStart()}function lx(t){return t!==null&&typeof t=="object"&&t instanceof Kl}function ax(t,e=100){return kn(this,arguments,function*(){let o,r=0;for(;r<e;){const i=yield b(t.listTools({cursor:o}));for(const s of i.tools)yield yield b(s),r++;if(!i.nextCursor)break;o=i.nextCursor}})}class Kl{constructor(e=[],n){this.mcpTools=[],this.functionNameToMcpClient={},this.mcpClients=e,this.config=n}static create(e,n){return new Kl(e,n)}async initialize(){var e,n,o,r;if(this.mcpTools.length>0)return;const i={},s=[];for(const f of this.mcpClients)try{for(var u=!0,c=(n=void 0,po(ax(f))),d;d=await c.next(),e=d.done,!e;u=!0){r=d.value,u=!1;const p=r;s.push(p);const m=p.name;if(i[m])throw new Error(`Duplicate function name ${m} found in MCP tools. Please ensure function names are unique.`);i[m]=f}}catch(p){n={error:p}}finally{try{!u&&!e&&(o=c.return)&&await o.call(c)}finally{if(n)throw n.error}}this.mcpTools=s,this.functionNameToMcpClient=i}async tool(){return await this.initialize(),py(this.mcpTools,this.config)}async callTool(e){await this.initialize();const n=[];for(const o of e)if(o.name in this.functionNameToMcpClient){const r=this.functionNameToMcpClient[o.name];let i;this.config.timeout&&(i={timeout:this.config.timeout});const s=await r.callTool({name:o.name,arguments:o.args},void 0,i);n.push({functionResponse:{name:o.name,response:s.isError?{error:s}:s}})}return n}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */async function ux(t,e,n){const o=new iy;let r;n.data instanceof Blob?r=JSON.parse(await n.data.text()):r=JSON.parse(n.data),Object.assign(o,r),e(o)}class dx{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o}async connect(e){var n,o;if(this.apiClient.isVertexAI())throw new Error("Live music is not supported for Vertex AI.");console.warn("Live music generation is experimental and may change in future versions.");const r=this.apiClient.getWebsocketBaseUrl(),i=this.apiClient.getApiVersion(),s=px(this.apiClient.getDefaultHeaders()),u=this.apiClient.getApiKey(),c=`${r}/ws/google.ai.generativelanguage.${i}.GenerativeService.BidiGenerateMusic?key=${u}`;let d=()=>{};const f=new Promise(T=>{d=T}),p=e.callbacks,m=function(){d({})},y=this.apiClient,x={onopen:m,onmessage:T=>{ux(y,p.onmessage,T)},onerror:(n=p==null?void 0:p.onerror)!==null&&n!==void 0?n:function(T){},onclose:(o=p==null?void 0:p.onclose)!==null&&o!==void 0?o:function(T){}},S=this.webSocketFactory.create(c,fx(s),x);S.connect(),await f;const g={setup:{model:B(this.apiClient,e.model)}};return S.send(JSON.stringify(g)),new cx(S,this.apiClient)}}class cx{constructor(e,n){this.conn=e,this.apiClient=n}async setWeightedPrompts(e){if(!e.weightedPrompts||Object.keys(e.weightedPrompts).length===0)throw new Error("Weighted prompts must be set and contain at least one entry.");const n=nv(e);this.conn.send(JSON.stringify({clientContent:n}))}async setMusicGenerationConfig(e){e.musicGenerationConfig||(e.musicGenerationConfig={});const n=tv(e);this.conn.send(JSON.stringify(n))}sendPlaybackControl(e){const n={playbackControl:e};this.conn.send(JSON.stringify(n))}play(){this.sendPlaybackControl(vn.PLAY)}pause(){this.sendPlaybackControl(vn.PAUSE)}stop(){this.sendPlaybackControl(vn.STOP)}resetContext(){this.sendPlaybackControl(vn.RESET_CONTEXT)}close(){this.conn.close()}}function fx(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function px(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const mx="FunctionResponse request must have an `id` field from the response of a ToolCall.FunctionalCalls in Google AI.";async function hx(t,e,n){const o=new ry;let r;n.data instanceof Blob?r=await n.data.text():n.data instanceof ArrayBuffer?r=new TextDecoder().decode(n.data):r=n.data;const i=JSON.parse(r);if(t.isVertexAI()){const s=iv(i);Object.assign(o,s)}else Object.assign(o,i);e(o)}class gx{constructor(e,n,o){this.apiClient=e,this.auth=n,this.webSocketFactory=o,this.music=new dx(this.apiClient,this.auth,this.webSocketFactory)}async connect(e){var n,o,r,i,s,u;if(e.config&&e.config.httpOptions)throw new Error("The Live module does not support httpOptions at request-level in LiveConnectConfig yet. Please use the client-level httpOptions configuration instead.");const c=this.apiClient.getWebsocketBaseUrl(),d=this.apiClient.getApiVersion();let f;const p=this.apiClient.getHeaders();e.config&&e.config.tools&&Cp(e.config.tools)&&Ep(p);const m=xx(p);if(this.apiClient.isVertexAI())f=`${c}/ws/google.cloud.aiplatform.${d}.LlmBidiService/BidiGenerateContent`,await this.auth.addAuthHeaders(m);else{const A=this.apiClient.getApiKey();let R="BidiGenerateContent",z="key";A!=null&&A.startsWith("auth_tokens/")&&(console.warn("Warning: Ephemeral token support is experimental and may change in future versions."),d!=="v1alpha"&&console.warn("Warning: The SDK's ephemeral token support is in v1alpha only. Please use const ai = new GoogleGenAI({apiKey: token.name, httpOptions: { apiVersion: 'v1alpha' }}); before session connection."),R="BidiGenerateContentConstrained",z="access_token"),f=`${c}/ws/google.ai.generativelanguage.${d}.GenerativeService.${R}?${z}=${A}`}let y=()=>{};const x=new Promise(A=>{y=A}),S=e.callbacks,w=function(){var A;(A=S==null?void 0:S.onopen)===null||A===void 0||A.call(S),y({})},v=this.apiClient,g={onopen:w,onmessage:A=>{hx(v,S.onmessage,A)},onerror:(n=S==null?void 0:S.onerror)!==null&&n!==void 0?n:function(A){},onclose:(o=S==null?void 0:S.onclose)!==null&&o!==void 0?o:function(A){}},T=this.webSocketFactory.create(f,Tx(m),g);T.connect(),await x;let C=B(this.apiClient,e.model);if(this.apiClient.isVertexAI()&&C.startsWith("publishers/")){const A=this.apiClient.getProject(),R=this.apiClient.getLocation();C=`projects/${A}/locations/${R}/`+C}let E={};this.apiClient.isVertexAI()&&((r=e.config)===null||r===void 0?void 0:r.responseModalities)===void 0&&(e.config===void 0?e.config={responseModalities:[Jr.AUDIO]}:e.config.responseModalities=[Jr.AUDIO]),!((i=e.config)===null||i===void 0)&&i.generationConfig&&console.warn("Setting `LiveConnectConfig.generation_config` is deprecated, please set the fields on `LiveConnectConfig` directly. This will become an error in a future version (not before Q3 2025).");const k=(u=(s=e.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[],_=[];for(const A of k)if(this.isCallableTool(A)){const R=A;_.push(await R.tool())}else _.push(A);_.length>0&&(e.config.tools=_);const N={model:C,config:e.config,callbacks:e.callbacks};return this.apiClient.isVertexAI()?E=ev(this.apiClient,N):E=j0(this.apiClient,N),delete E.config,T.send(JSON.stringify(E)),new vx(T,this.apiClient)}isCallableTool(e){return"callTool"in e&&typeof e.callTool=="function"}}const yx={turnComplete:!0};class vx{constructor(e,n){this.conn=e,this.apiClient=n}tLiveClientContent(e,n){if(n.turns!==null&&n.turns!==void 0){let o=[];try{o=Ge(n.turns),e.isVertexAI()||(o=o.map(r=>fi(r)))}catch{throw new Error(`Failed to parse client content "turns", type: '${typeof n.turns}'`)}return{clientContent:{turns:o,turnComplete:n.turnComplete}}}return{clientContent:{turnComplete:n.turnComplete}}}tLiveClienttToolResponse(e,n){let o=[];if(n.functionResponses==null)throw new Error("functionResponses is required.");if(Array.isArray(n.functionResponses)?o=n.functionResponses:o=[n.functionResponses],o.length===0)throw new Error("functionResponses is required.");for(const i of o){if(typeof i!="object"||i===null||!("name"in i)||!("response"in i))throw new Error(`Could not parse function response, type '${typeof i}'.`);if(!e.isVertexAI()&&!("id"in i))throw new Error(mx)}return{toolResponse:{functionResponses:o}}}sendClientContent(e){e=Object.assign(Object.assign({},yx),e);const n=this.tLiveClientContent(this.apiClient,e);this.conn.send(JSON.stringify(n))}sendRealtimeInput(e){let n={};this.apiClient.isVertexAI()?n={realtimeInput:rv(e)}:n={realtimeInput:ov(e)},this.conn.send(JSON.stringify(n))}sendToolResponse(e){if(e.functionResponses==null)throw new Error("Tool response parameters are required.");const n=this.tLiveClienttToolResponse(this.apiClient,e);this.conn.send(JSON.stringify(n))}close(){this.conn.close()}}function Tx(t){const e={};return t.forEach((n,o)=>{e[o]=n}),e}function xx(t){const e=new Headers;for(const[n,o]of Object.entries(t))e.append(n,o);return e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const wd=10;function _d(t){var e,n,o;if(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.disable)return!0;let r=!1;for(const s of(n=t==null?void 0:t.tools)!==null&&n!==void 0?n:[])if(In(s)){r=!0;break}if(!r)return!0;const i=(o=t==null?void 0:t.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls;return i&&(i<0||!Number.isInteger(i))||i==0?(console.warn("Invalid maximumRemoteCalls value provided for automatic function calling. Disabled automatic function calling. Please provide a valid integer value greater than 0. maximumRemoteCalls provided:",i),!0):!1}function In(t){return"callTool"in t&&typeof t.callTool=="function"}function Sx(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>In(r)))!==null&&o!==void 0?o:!1}function Cx(t){var e,n,o;return(o=(n=(e=t.config)===null||e===void 0?void 0:e.tools)===null||n===void 0?void 0:n.some(r=>!In(r)))!==null&&o!==void 0?o:!1}function kd(t){var e;return!(!((e=t==null?void 0:t.automaticFunctionCalling)===null||e===void 0)&&e.ignoreCallHistory)}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class Ex extends tn{constructor(e){super(),this.apiClient=e,this.generateContent=async n=>{var o,r,i,s,u;const c=await this.processParamsMaybeAddMcpUsage(n);if(this.maybeMoveToResponseJsonSchem(n),!Sx(n)||_d(n.config))return await this.generateContentInternal(c);if(Cx(n))throw new Error("Automatic function calling with CallableTools and Tools is not yet supported.");let d,f;const p=Ge(c.contents),m=(i=(r=(o=c.config)===null||o===void 0?void 0:o.automaticFunctionCalling)===null||r===void 0?void 0:r.maximumRemoteCalls)!==null&&i!==void 0?i:wd;let y=0;for(;y<m&&(d=await this.generateContentInternal(c),!(!d.functionCalls||d.functionCalls.length===0));){const x=d.candidates[0].content,S=[];for(const w of(u=(s=n.config)===null||s===void 0?void 0:s.tools)!==null&&u!==void 0?u:[])if(In(w)){const g=await w.callTool(d.functionCalls);S.push(...g)}y++,f={role:"user",parts:S},c.contents=Ge(c.contents),c.contents.push(x),c.contents.push(f),kd(c.config)&&(p.push(x),p.push(f))}return kd(c.config)&&(d.automaticFunctionCallingHistory=p),d},this.generateContentStream=async n=>{if(this.maybeMoveToResponseJsonSchem(n),_d(n.config)){const o=await this.processParamsMaybeAddMcpUsage(n);return await this.generateContentStreamInternal(o)}else return await this.processAfcStream(n)},this.generateImages=async n=>await this.generateImagesInternal(n).then(o=>{var r;let i;const s=[];if(o!=null&&o.generatedImages)for(const c of o.generatedImages)c&&(c!=null&&c.safetyAttributes)&&((r=c==null?void 0:c.safetyAttributes)===null||r===void 0?void 0:r.contentType)==="Positive Prompt"?i=c==null?void 0:c.safetyAttributes:s.push(c);let u;return i?u={generatedImages:s,positivePromptSafetyAttributes:i,sdkHttpResponse:o.sdkHttpResponse}:u={generatedImages:s,sdkHttpResponse:o.sdkHttpResponse},u}),this.list=async n=>{var o;const s={config:Object.assign(Object.assign({},{queryBase:!0}),n==null?void 0:n.config)};if(this.apiClient.isVertexAI()&&!s.config.queryBase){if(!((o=s.config)===null||o===void 0)&&o.filter)throw new Error("Filtering tuned models list for Vertex AI is not currently supported");s.config.filter="labels.tune-type:*"}return new Ho(Zt.PAGED_ITEM_MODELS,u=>this.listInternal(u),await this.listInternal(s),s)},this.editImage=async n=>{const o={model:n.model,prompt:n.prompt,referenceImages:[],config:n.config};return n.referenceImages&&n.referenceImages&&(o.referenceImages=n.referenceImages.map(r=>r.toReferenceImageAPI())),await this.editImageInternal(o)},this.upscaleImage=async n=>{let o={numberOfImages:1,mode:"upscale"};n.config&&(o=Object.assign(Object.assign({},o),n.config));const r={model:n.model,image:n.image,upscaleFactor:n.upscaleFactor,config:o};return await this.upscaleImageInternal(r)},this.generateVideos=async n=>{var o,r,i,s,u,c;if((n.prompt||n.image||n.video)&&n.source)throw new Error("Source and prompt/image/video are mutually exclusive. Please only use source.");return this.apiClient.isVertexAI()||(!((o=n.video)===null||o===void 0)&&o.uri&&(!((r=n.video)===null||r===void 0)&&r.videoBytes)?n.video={uri:n.video.uri,mimeType:n.video.mimeType}:!((s=(i=n.source)===null||i===void 0?void 0:i.video)===null||s===void 0)&&s.uri&&(!((c=(u=n.source)===null||u===void 0?void 0:u.video)===null||c===void 0)&&c.videoBytes)&&(n.source.video={uri:n.source.video.uri,mimeType:n.source.video.mimeType})),await this.generateVideosInternal(n)}}maybeMoveToResponseJsonSchem(e){e.config&&e.config.responseSchema&&(e.config.responseJsonSchema||Object.keys(e.config.responseSchema).includes("$schema")&&(e.config.responseJsonSchema=e.config.responseSchema,delete e.config.responseSchema))}async processParamsMaybeAddMcpUsage(e){var n,o,r;const i=(n=e.config)===null||n===void 0?void 0:n.tools;if(!i)return e;const s=await Promise.all(i.map(async c=>In(c)?await c.tool():c)),u={model:e.model,contents:e.contents,config:Object.assign(Object.assign({},e.config),{tools:s})};if(u.config.tools=s,e.config&&e.config.tools&&Cp(e.config.tools)){const c=(r=(o=e.config.httpOptions)===null||o===void 0?void 0:o.headers)!==null&&r!==void 0?r:{};let d=Object.assign({},c);Object.keys(d).length===0&&(d=this.apiClient.getDefaultHeaders()),Ep(d),u.config.httpOptions=Object.assign(Object.assign({},e.config.httpOptions),{headers:d})}return u}async initAfcToolsMap(e){var n,o,r;const i=new Map;for(const s of(o=(n=e.config)===null||n===void 0?void 0:n.tools)!==null&&o!==void 0?o:[])if(In(s)){const u=s,c=await u.tool();for(const d of(r=c.functionDeclarations)!==null&&r!==void 0?r:[]){if(!d.name)throw new Error("Function declaration name is required.");if(i.has(d.name))throw new Error(`Duplicate tool declaration name: ${d.name}`);i.set(d.name,u)}}return i}async processAfcStream(e){var n,o,r;const i=(r=(o=(n=e.config)===null||n===void 0?void 0:n.automaticFunctionCalling)===null||o===void 0?void 0:o.maximumRemoteCalls)!==null&&r!==void 0?r:wd;let s=!1,u=0;const c=await this.initAfcToolsMap(e);return function(d,f,p){var m,y;return kn(this,arguments,function*(){for(var x,S,w,v;u<i;){s&&(u++,s=!1);const E=yield b(d.processParamsMaybeAddMcpUsage(p)),k=yield b(d.generateContentStreamInternal(E)),_=[],N=[];try{for(var g=!0,T=(S=void 0,po(k)),C;C=yield b(T.next()),x=C.done,!x;g=!0){v=C.value,g=!1;const A=v;if(yield yield b(A),A.candidates&&(!((m=A.candidates[0])===null||m===void 0)&&m.content)){N.push(A.candidates[0].content);for(const R of(y=A.candidates[0].content.parts)!==null&&y!==void 0?y:[])if(u<i&&R.functionCall){if(!R.functionCall.name)throw new Error("Function call name was not returned by the model.");if(f.has(R.functionCall.name)){const z=yield b(f.get(R.functionCall.name).callTool([R.functionCall]));_.push(...z)}else throw new Error(`Automatic function calling was requested, but not all the tools the model used implement the CallableTool interface. Available tools: ${f.keys()}, mising tool: ${R.functionCall.name}`)}}}}catch(A){S={error:A}}finally{try{!g&&!x&&(w=T.return)&&(yield b(w.call(T)))}finally{if(S)throw S.error}}if(_.length>0){s=!0;const A=new Zn;A.candidates=[{content:{role:"user",parts:_}}],yield yield b(A);const R=[];R.push(...N),R.push({role:"user",parts:_});const z=Ge(p.contents).concat(R);p.contents=z}else break}})}(this,c,e)}async generateContentInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Td(this.apiClient,e);return u=D("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Sd(f),m=new Zn;return Object.assign(m,p),m})}else{const d=vd(this.apiClient,e);return u=D("{model}:generateContent",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=xd(f),m=new Zn;return Object.assign(m,p),m})}}async generateContentStreamInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Td(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}),s.then(function(p){return kn(this,arguments,function*(){var m,y,x,S;try{for(var w=!0,v=po(p),g;g=yield b(v.next()),m=g.done,!m;w=!0){S=g.value,w=!1;const T=S,C=Sd(yield b(T.json()));C.sdkHttpResponse={headers:T.headers};const E=new Zn;Object.assign(E,C),yield yield b(E)}}catch(T){y={error:T}}finally{try{!w&&!m&&(x=v.return)&&(yield b(x.call(v)))}finally{if(y)throw y.error}}})})}else{const d=vd(this.apiClient,e);return u=D("{model}:streamGenerateContent?alt=sse",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.requestStream({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}),s.then(function(p){return kn(this,arguments,function*(){var m,y,x,S;try{for(var w=!0,v=po(p),g;g=yield b(v.next()),m=g.done,!m;w=!0){S=g.value,w=!1;const T=S,C=xd(yield b(T.json()));C.sdkHttpResponse={headers:T.headers};const E=new Zn;Object.assign(E,C),yield yield b(E)}}catch(T){y={error:T}}finally{try{!w&&!m&&(x=v.return)&&(yield b(x.call(v)))}finally{if(y)throw y.error}}})})}}async embedContent(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Uv(this.apiClient,e);return u=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Vv(f),m=new nd;return Object.assign(m,p),m})}else{const d=Lv(this.apiClient,e);return u=D("{model}:batchEmbedContents",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Fv(f),m=new nd;return Object.assign(m,p),m})}}async generateImagesInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=bv(this.apiClient,e);return u=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Ov(f),m=new od;return Object.assign(m,p),m})}else{const d=Wv(this.apiClient,e);return u=D("{model}:predict",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Yv(f),m=new od;return Object.assign(m,p),m})}}async editImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Pv(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=Rv(c),f=new Qg;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async upscaleImageInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=zT(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=JT(c),f=new Xg;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async recontextImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=_T(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=kT(c),f=new Zg;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async segmentImage(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=MT(this.apiClient,e);return i=D("{model}:predict",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r.then(c=>{const d=DT(c),f=new jg;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async get(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=cT(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>bs(f))}else{const d=dT(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ws(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=vT(this.apiClient,e);return u=D("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=xT(f),m=new rd;return Object.assign(m,p),m})}else{const d=yT(this.apiClient,e);return u=D("{models_url}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=TT(f),m=new rd;return Object.assign(m,p),m})}}async update(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=qT(this.apiClient,e);return u=D("{model}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>bs(f))}else{const d=BT(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"PATCH",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>Ws(f))}}async delete(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=kv(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Nv(f),m=new id;return Object.assign(m,p),m})}else{const d=_v(this.apiClient,e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"DELETE",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Iv(f),m=new id;return Object.assign(m,p),m})}}async countTokens(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Cv(this.apiClient,e);return u=D("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=wv(f),m=new sd;return Object.assign(m,p),m})}else{const d=Sv(this.apiClient,e);return u=D("{model}:countTokens",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Ev(f),m=new sd;return Object.assign(m,p),m})}}async computeTokens(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=mv(this.apiClient,e);return i=D("{model}:computeTokens",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>{const d=hv(c),f=new ey;return Object.assign(f,d),f})}else throw new Error("This method is only supported by the Vertex AI.")}async generateVideosInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=eT(this.apiClient,e);return u=D("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Zv(f),m=new Wr;return Object.assign(m,p),m})}else{const d=jv(this.apiClient,e);return u=D("{model}:predictLongRunning",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s.then(f=>{const p=Xv(f),m=new Wr;return Object.assign(m,p),m})}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class wx extends tn{constructor(e){super(),this.apiClient=e}async getVideosOperation(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async get(e){const n=e.operation,o=e.config;if(n.name===void 0||n.name==="")throw new Error("Operation name is required.");if(this.apiClient.isVertexAI()){const r=n.name.split("/operations/")[0];let i;o&&"httpOptions"in o&&(i=o.httpOptions);const s=await this.fetchPredictVideosOperationInternal({operationName:n.name,resourceName:r,config:{httpOptions:i}});return n._fromAPIResponse({apiResponse:s,isVertexAI:!0})}else{const r=await this.getVideosOperationInternal({operationName:n.name,config:o});return n._fromAPIResponse({apiResponse:r,isVertexAI:!1})}}async getVideosOperationInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Yg(e);return u=D("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json()),s}else{const d=bg(e);return u=D("{operationName}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json()),s}}async fetchPredictVideosOperationInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Gg(e);return i=D("{resourceName}:fetchPredictOperation",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json()),r}else throw new Error("This method is only supported by the Vertex AI.")}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function _x(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["data"]);n!=null&&a(e,["data"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function kx(t){const e={},n=l(t,["parts"]);if(n!=null){let r=n;Array.isArray(r)&&(r=r.map(i=>Lx(i))),a(e,["parts"],r)}const o=l(t,["role"]);return o!=null&&a(e,["role"],o),e}function Ix(t,e,n){const o={},r=l(e,["expireTime"]);n!==void 0&&r!=null&&a(n,["expireTime"],r);const i=l(e,["newSessionExpireTime"]);n!==void 0&&i!=null&&a(n,["newSessionExpireTime"],i);const s=l(e,["uses"]);n!==void 0&&s!=null&&a(n,["uses"],s);const u=l(e,["liveConnectConstraints"]);n!==void 0&&u!=null&&a(n,["bidiGenerateContentSetup"],Dx(t,u));const c=l(e,["lockAdditionalFields"]);return n!==void 0&&c!=null&&a(n,["fieldMask"],c),o}function Nx(t,e){const n={},o=l(e,["config"]);return o!=null&&a(n,["config"],Ix(t,o,n)),n}function Ax(t){const e={};if(l(t,["displayName"])!==void 0)throw new Error("displayName parameter is not supported in Gemini API.");const n=l(t,["fileUri"]);n!=null&&a(e,["fileUri"],n);const o=l(t,["mimeType"]);return o!=null&&a(e,["mimeType"],o),e}function Px(t){const e={};if(l(t,["authConfig"])!==void 0)throw new Error("authConfig parameter is not supported in Gemini API.");const n=l(t,["enableWidget"]);return n!=null&&a(e,["enableWidget"],n),e}function Rx(t){const e={},n=l(t,["timeRangeFilter"]);if(n!=null&&a(e,["timeRangeFilter"],n),l(t,["excludeDomains"])!==void 0)throw new Error("excludeDomains parameter is not supported in Gemini API.");return e}function Mx(t,e){const n={},o=l(t,["generationConfig"]);e!==void 0&&o!=null&&a(e,["setup","generationConfig"],o);const r=l(t,["responseModalities"]);e!==void 0&&r!=null&&a(e,["setup","generationConfig","responseModalities"],r);const i=l(t,["temperature"]);e!==void 0&&i!=null&&a(e,["setup","generationConfig","temperature"],i);const s=l(t,["topP"]);e!==void 0&&s!=null&&a(e,["setup","generationConfig","topP"],s);const u=l(t,["topK"]);e!==void 0&&u!=null&&a(e,["setup","generationConfig","topK"],u);const c=l(t,["maxOutputTokens"]);e!==void 0&&c!=null&&a(e,["setup","generationConfig","maxOutputTokens"],c);const d=l(t,["mediaResolution"]);e!==void 0&&d!=null&&a(e,["setup","generationConfig","mediaResolution"],d);const f=l(t,["seed"]);e!==void 0&&f!=null&&a(e,["setup","generationConfig","seed"],f);const p=l(t,["speechConfig"]);e!==void 0&&p!=null&&a(e,["setup","generationConfig","speechConfig"],Ol(p));const m=l(t,["thinkingConfig"]);e!==void 0&&m!=null&&a(e,["setup","generationConfig","thinkingConfig"],m);const y=l(t,["enableAffectiveDialog"]);e!==void 0&&y!=null&&a(e,["setup","generationConfig","enableAffectiveDialog"],y);const x=l(t,["systemInstruction"]);e!==void 0&&x!=null&&a(e,["setup","systemInstruction"],kx(ge(x)));const S=l(t,["tools"]);if(e!==void 0&&S!=null){let k=qn(S);Array.isArray(k)&&(k=k.map(_=>Fx(Bn(_)))),a(e,["setup","tools"],k)}const w=l(t,["sessionResumption"]);e!==void 0&&w!=null&&a(e,["setup","sessionResumption"],Ux(w));const v=l(t,["inputAudioTranscription"]);e!==void 0&&v!=null&&a(e,["setup","inputAudioTranscription"],v);const g=l(t,["outputAudioTranscription"]);e!==void 0&&g!=null&&a(e,["setup","outputAudioTranscription"],g);const T=l(t,["realtimeInputConfig"]);e!==void 0&&T!=null&&a(e,["setup","realtimeInputConfig"],T);const C=l(t,["contextWindowCompression"]);e!==void 0&&C!=null&&a(e,["setup","contextWindowCompression"],C);const E=l(t,["proactivity"]);return e!==void 0&&E!=null&&a(e,["setup","proactivity"],E),n}function Dx(t,e){const n={},o=l(e,["model"]);o!=null&&a(n,["setup","model"],B(t,o));const r=l(e,["config"]);return r!=null&&a(n,["config"],Mx(r,n)),n}function Lx(t){const e={},n=l(t,["videoMetadata"]);n!=null&&a(e,["videoMetadata"],n);const o=l(t,["thought"]);o!=null&&a(e,["thought"],o);const r=l(t,["inlineData"]);r!=null&&a(e,["inlineData"],_x(r));const i=l(t,["fileData"]);i!=null&&a(e,["fileData"],Ax(i));const s=l(t,["thoughtSignature"]);s!=null&&a(e,["thoughtSignature"],s);const u=l(t,["functionCall"]);u!=null&&a(e,["functionCall"],u);const c=l(t,["codeExecutionResult"]);c!=null&&a(e,["codeExecutionResult"],c);const d=l(t,["executableCode"]);d!=null&&a(e,["executableCode"],d);const f=l(t,["functionResponse"]);f!=null&&a(e,["functionResponse"],f);const p=l(t,["text"]);return p!=null&&a(e,["text"],p),e}function Ux(t){const e={},n=l(t,["handle"]);if(n!=null&&a(e,["handle"],n),l(t,["transparent"])!==void 0)throw new Error("transparent parameter is not supported in Gemini API.");return e}function Fx(t){const e={},n=l(t,["functionDeclarations"]);if(n!=null){let d=n;Array.isArray(d)&&(d=d.map(f=>f)),a(e,["functionDeclarations"],d)}if(l(t,["retrieval"])!==void 0)throw new Error("retrieval parameter is not supported in Gemini API.");const o=l(t,["googleSearch"]);o!=null&&a(e,["googleSearch"],Rx(o));const r=l(t,["googleSearchRetrieval"]);if(r!=null&&a(e,["googleSearchRetrieval"],r),l(t,["enterpriseWebSearch"])!==void 0)throw new Error("enterpriseWebSearch parameter is not supported in Gemini API.");const i=l(t,["googleMaps"]);i!=null&&a(e,["googleMaps"],Px(i));const s=l(t,["urlContext"]);s!=null&&a(e,["urlContext"],s);const u=l(t,["computerUse"]);u!=null&&a(e,["computerUse"],u);const c=l(t,["codeExecution"]);return c!=null&&a(e,["codeExecution"],c),e}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Vx(t){const e=[];for(const n in t)if(Object.prototype.hasOwnProperty.call(t,n)){const o=t[n];if(typeof o=="object"&&o!=null&&Object.keys(o).length>0){const r=Object.keys(o).map(i=>`${n}.${i}`);e.push(...r)}else e.push(n)}return e.join(",")}function Hx(t,e){let n=null;const o=t.bidiGenerateContentSetup;if(typeof o=="object"&&o!==null&&"setup"in o){const i=o.setup;typeof i=="object"&&i!==null?(t.bidiGenerateContentSetup=i,n=i):delete t.bidiGenerateContentSetup}else o!==void 0&&delete t.bidiGenerateContentSetup;const r=t.fieldMask;if(n){const i=Vx(n);if(Array.isArray(e==null?void 0:e.lockAdditionalFields)&&(e==null?void 0:e.lockAdditionalFields.length)===0)i?t.fieldMask=i:delete t.fieldMask;else if(e!=null&&e.lockAdditionalFields&&e.lockAdditionalFields.length>0&&r!==null&&Array.isArray(r)&&r.length>0){const s=["temperature","topK","topP","maxOutputTokens","responseModalities","seed","speechConfig"];let u=[];r.length>0&&(u=r.map(d=>s.includes(d)?`generationConfig.${d}`:d));const c=[];i&&c.push(i),u.length>0&&c.push(...u),c.length>0?t.fieldMask=c.join(","):delete t.fieldMask}else delete t.fieldMask}else r!==null&&Array.isArray(r)&&r.length>0?t.fieldMask=r.join(","):delete t.fieldMask;return t}class Gx extends tn{constructor(e){super(),this.apiClient=e}async create(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("The client.tokens.create method is only supported by the Gemini Developer API.");{const u=Nx(this.apiClient,e);i=D("auth_tokens",u._url),s=u._query,delete u.config,delete u._url,delete u._query;const c=Hx(u,e.config);return r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(d=>d.json()),r.then(d=>d)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */function Bx(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function qx(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function $x(t,e){const n={};if(l(t,["validationDataset"])!==void 0)throw new Error("validationDataset parameter is not supported in Gemini API.");const o=l(t,["tunedModelDisplayName"]);if(e!==void 0&&o!=null&&a(e,["displayName"],o),l(t,["description"])!==void 0)throw new Error("description parameter is not supported in Gemini API.");const r=l(t,["epochCount"]);e!==void 0&&r!=null&&a(e,["tuningTask","hyperparameters","epochCount"],r);const i=l(t,["learningRateMultiplier"]);if(i!=null&&a(n,["tuningTask","hyperparameters","learningRateMultiplier"],i),l(t,["exportLastCheckpointOnly"])!==void 0)throw new Error("exportLastCheckpointOnly parameter is not supported in Gemini API.");if(l(t,["preTunedModelCheckpointId"])!==void 0)throw new Error("preTunedModelCheckpointId parameter is not supported in Gemini API.");if(l(t,["adapterSize"])!==void 0)throw new Error("adapterSize parameter is not supported in Gemini API.");const s=l(t,["batchSize"]);e!==void 0&&s!=null&&a(e,["tuningTask","hyperparameters","batchSize"],s);const u=l(t,["learningRate"]);if(e!==void 0&&u!=null&&a(e,["tuningTask","hyperparameters","learningRate"],u),l(t,["labels"])!==void 0)throw new Error("labels parameter is not supported in Gemini API.");return n}function zx(t,e){const n={},o=l(t,["validationDataset"]);e!==void 0&&o!=null&&a(e,["supervisedTuningSpec"],rS(o,n));const r=l(t,["tunedModelDisplayName"]);e!==void 0&&r!=null&&a(e,["tunedModelDisplayName"],r);const i=l(t,["description"]);e!==void 0&&i!=null&&a(e,["description"],i);const s=l(t,["epochCount"]);e!==void 0&&s!=null&&a(e,["supervisedTuningSpec","hyperParameters","epochCount"],s);const u=l(t,["learningRateMultiplier"]);e!==void 0&&u!=null&&a(e,["supervisedTuningSpec","hyperParameters","learningRateMultiplier"],u);const c=l(t,["exportLastCheckpointOnly"]);e!==void 0&&c!=null&&a(e,["supervisedTuningSpec","exportLastCheckpointOnly"],c);const d=l(t,["adapterSize"]);if(e!==void 0&&d!=null&&a(e,["supervisedTuningSpec","hyperParameters","adapterSize"],d),l(t,["batchSize"])!==void 0)throw new Error("batchSize parameter is not supported in Vertex AI.");if(l(t,["learningRate"])!==void 0)throw new Error("learningRate parameter is not supported in Vertex AI.");const f=l(t,["labels"]);return e!==void 0&&f!=null&&a(e,["labels"],f),n}function Jx(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["preTunedModel"]);o!=null&&a(e,["preTunedModel"],o);const r=l(t,["trainingDataset"]);r!=null&&a(e,["tuningTask","trainingData"],tS(r));const i=l(t,["config"]);return i!=null&&$x(i,e),e}function Wx(t){const e={},n=l(t,["baseModel"]);n!=null&&a(e,["baseModel"],n);const o=l(t,["preTunedModel"]);o!=null&&a(e,["preTunedModel"],o);const r=l(t,["trainingDataset"]);r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],nS(r,e));const i=l(t,["config"]);return i!=null&&zx(i,e),e}function bx(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function Yx(t){const e={},n=l(t,["name"]);return n!=null&&a(e,["_url","name"],n),e}function Ox(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function Kx(t,e){const n={},o=l(t,["pageSize"]);e!==void 0&&o!=null&&a(e,["_query","pageSize"],o);const r=l(t,["pageToken"]);e!==void 0&&r!=null&&a(e,["_query","pageToken"],r);const i=l(t,["filter"]);return e!==void 0&&i!=null&&a(e,["_query","filter"],i),n}function Qx(t){const e={},n=l(t,["config"]);return n!=null&&Ox(n,e),e}function Xx(t){const e={},n=l(t,["config"]);return n!=null&&Kx(n,e),e}function Zx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["tunedModels"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>wp(s))),a(e,["tuningJobs"],i)}return e}function jx(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["nextPageToken"]);o!=null&&a(e,["nextPageToken"],o);const r=l(t,["tuningJobs"]);if(r!=null){let i=r;Array.isArray(i)&&(i=i.map(s=>Os(s))),a(e,["tuningJobs"],i)}return e}function eS(t){const e={},n=l(t,["name"]);n!=null&&a(e,["model"],n);const o=l(t,["name"]);return o!=null&&a(e,["endpoint"],o),e}function tS(t){const e={};if(l(t,["gcsUri"])!==void 0)throw new Error("gcsUri parameter is not supported in Gemini API.");if(l(t,["vertexDatasetResource"])!==void 0)throw new Error("vertexDatasetResource parameter is not supported in Gemini API.");const n=l(t,["examples"]);if(n!=null){let o=n;Array.isArray(o)&&(o=o.map(r=>r)),a(e,["examples","examples"],o)}return e}function nS(t,e){const n={},o=l(t,["gcsUri"]);e!==void 0&&o!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],o);const r=l(t,["vertexDatasetResource"]);if(e!==void 0&&r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],r),l(t,["examples"])!==void 0)throw new Error("examples parameter is not supported in Vertex AI.");return n}function wp(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],ip(r));const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["tuningTask","startTime"]);s!=null&&a(e,["startTime"],s);const u=l(t,["tuningTask","completeTime"]);u!=null&&a(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["description"]);d!=null&&a(e,["description"],d);const f=l(t,["baseModel"]);f!=null&&a(e,["baseModel"],f);const p=l(t,["_self"]);return p!=null&&a(e,["tunedModel"],eS(p)),e}function Os(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["state"]);r!=null&&a(e,["state"],ip(r));const i=l(t,["createTime"]);i!=null&&a(e,["createTime"],i);const s=l(t,["startTime"]);s!=null&&a(e,["startTime"],s);const u=l(t,["endTime"]);u!=null&&a(e,["endTime"],u);const c=l(t,["updateTime"]);c!=null&&a(e,["updateTime"],c);const d=l(t,["error"]);d!=null&&a(e,["error"],d);const f=l(t,["description"]);f!=null&&a(e,["description"],f);const p=l(t,["baseModel"]);p!=null&&a(e,["baseModel"],p);const m=l(t,["tunedModel"]);m!=null&&a(e,["tunedModel"],m);const y=l(t,["preTunedModel"]);y!=null&&a(e,["preTunedModel"],y);const x=l(t,["supervisedTuningSpec"]);x!=null&&a(e,["supervisedTuningSpec"],x);const S=l(t,["tuningDataStats"]);S!=null&&a(e,["tuningDataStats"],S);const w=l(t,["encryptionSpec"]);w!=null&&a(e,["encryptionSpec"],w);const v=l(t,["partnerModelTuningSpec"]);v!=null&&a(e,["partnerModelTuningSpec"],v);const g=l(t,["customBaseModel"]);g!=null&&a(e,["customBaseModel"],g);const T=l(t,["experiment"]);T!=null&&a(e,["experiment"],T);const C=l(t,["labels"]);C!=null&&a(e,["labels"],C);const E=l(t,["outputUri"]);E!=null&&a(e,["outputUri"],E);const k=l(t,["pipelineJob"]);k!=null&&a(e,["pipelineJob"],k);const _=l(t,["serviceAccount"]);_!=null&&a(e,["serviceAccount"],_);const N=l(t,["tunedModelDisplayName"]);N!=null&&a(e,["tunedModelDisplayName"],N);const A=l(t,["veoTuningSpec"]);return A!=null&&a(e,["veoTuningSpec"],A),e}function oS(t){const e={},n=l(t,["sdkHttpResponse"]);n!=null&&a(e,["sdkHttpResponse"],n);const o=l(t,["name"]);o!=null&&a(e,["name"],o);const r=l(t,["metadata"]);r!=null&&a(e,["metadata"],r);const i=l(t,["done"]);i!=null&&a(e,["done"],i);const s=l(t,["error"]);return s!=null&&a(e,["error"],s),e}function rS(t,e){const n={},o=l(t,["gcsUri"]);o!=null&&a(n,["validationDatasetUri"],o);const r=l(t,["vertexDatasetResource"]);return e!==void 0&&r!=null&&a(e,["supervisedTuningSpec","trainingDatasetUri"],r),n}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class iS extends tn{constructor(e){super(),this.apiClient=e,this.get=async n=>await this.getInternal(n),this.list=async(n={})=>new Ho(Zt.PAGED_ITEM_TUNING_JOBS,o=>this.listInternal(o),await this.listInternal(n),n),this.tune=async n=>{var o;if(this.apiClient.isVertexAI())if(n.baseModel.startsWith("projects/")){const r={tunedModelName:n.baseModel};!((o=n.config)===null||o===void 0)&&o.preTunedModelCheckpointId&&(r.checkpointId=n.config.preTunedModelCheckpointId);const i=Object.assign(Object.assign({},n),{preTunedModel:r});return i.baseModel=void 0,await this.tuneInternal(i)}else{const r=Object.assign({},n);return await this.tuneInternal(r)}else{const r=Object.assign({},n),i=await this.tuneMldevInternal(r);let s="";return i.metadata!==void 0&&i.metadata.tunedModel!==void 0?s=i.metadata.tunedModel:i.name!==void 0&&i.name.includes("/operations/")&&(s=i.name.split("/operations/")[0]),{name:s,state:qs.JOB_STATE_QUEUED}}}}async getInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Yx(e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>Os(f))}else{const d=bx(e);return u=D("{name}",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>wp(f))}}async listInternal(e){var n,o,r,i;let s,u="",c={};if(this.apiClient.isVertexAI()){const d=Xx(e);return u=D("tuningJobs",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=jx(f),m=new ld;return Object.assign(m,p),m})}else{const d=Qx(e);return u=D("tunedModels",d._url),c=d._query,delete d._url,delete d._query,s=this.apiClient.request({path:u,queryParams:c,body:JSON.stringify(d),httpMethod:"GET",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal}).then(f=>f.json().then(p=>{const m=p;return m.sdkHttpResponse={headers:f.headers},m})),s.then(f=>{const p=Zx(f),m=new ld;return Object.assign(m,p),m})}}async cancel(e){var n,o,r,i;let s="",u={};if(this.apiClient.isVertexAI()){const c=qx(e);s=D("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal})}else{const c=Bx(e);s=D("{name}:cancel",c._url),u=c._query,delete c._url,delete c._query,await this.apiClient.request({path:s,queryParams:u,body:JSON.stringify(c),httpMethod:"POST",httpOptions:(r=e.config)===null||r===void 0?void 0:r.httpOptions,abortSignal:(i=e.config)===null||i===void 0?void 0:i.abortSignal})}}async tuneInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI()){const u=Wx(e);return i=D("tuningJobs",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>Os(c))}else throw new Error("This method is only supported by the Vertex AI.")}async tuneMldevInternal(e){var n,o;let r,i="",s={};if(this.apiClient.isVertexAI())throw new Error("This method is only supported by the Gemini Developer API.");{const u=Jx(e);return i=D("tunedModels",u._url),s=u._query,delete u._url,delete u._query,r=this.apiClient.request({path:i,queryParams:s,body:JSON.stringify(u),httpMethod:"POST",httpOptions:(n=e.config)===null||n===void 0?void 0:n.httpOptions,abortSignal:(o=e.config)===null||o===void 0?void 0:o.abortSignal}).then(c=>c.json().then(d=>{const f=d;return f.sdkHttpResponse={headers:c.headers},f})),r.then(c=>oS(c))}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class sS{async download(e,n){throw new Error("Download to file is not supported in the browser, please use a browser compliant download like an <a> tag.")}}const lS=1024*1024*8,aS=3,uS=1e3,dS=2,Ji="x-goog-upload-status";async function cS(t,e,n){var o,r,i;let s=0,u=0,c=new $s(new Response),d="upload";for(s=t.size;u<s;){const p=Math.min(lS,s-u),m=t.slice(u,u+p);u+p>=s&&(d+=", finalize");let y=0,x=uS;for(;y<aS&&(c=await n.request({path:"",body:m,httpMethod:"POST",httpOptions:{apiVersion:"",baseUrl:e,headers:{"X-Goog-Upload-Command":d,"X-Goog-Upload-Offset":String(u),"Content-Length":String(p)}}}),!(!((o=c==null?void 0:c.headers)===null||o===void 0)&&o[Ji]));)y++,await pS(x),x=x*dS;if(u+=p,((r=c==null?void 0:c.headers)===null||r===void 0?void 0:r[Ji])!=="active")break;if(s<=u)throw new Error("All content has been uploaded, but the upload status is not finalized.")}const f=await(c==null?void 0:c.json());if(((i=c==null?void 0:c.headers)===null||i===void 0?void 0:i[Ji])!=="final")throw new Error("Failed to upload file: Upload status is not finalized.");return f.file}async function fS(t){return{size:t.size,type:t.type}}function pS(t){return new Promise(e=>setTimeout(e,t))}class mS{async upload(e,n,o){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await cS(e,n,o)}async stat(e){if(typeof e=="string")throw new Error("File path is not supported in browser uploader.");return await fS(e)}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */class hS{create(e,n,o){return new gS(e,n,o)}}class gS{constructor(e,n,o){this.url=e,this.headers=n,this.callbacks=o}connect(){this.ws=new WebSocket(this.url),this.ws.onopen=this.callbacks.onopen,this.ws.onerror=this.callbacks.onerror,this.ws.onclose=this.callbacks.onclose,this.ws.onmessage=this.callbacks.onmessage}send(e){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.send(e)}close(){if(this.ws===void 0)throw new Error("WebSocket is not connected");this.ws.close()}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const Id="x-goog-api-key";class yS{constructor(e){this.apiKey=e}async addAuthHeaders(e){if(e.get(Id)===null){if(this.apiKey.startsWith("auth_tokens/"))throw new Error("Ephemeral tokens are only supported by the live API.");if(!this.apiKey)throw new Error("API key is missing. Please provide a valid API key.");e.append(Id,this.apiKey)}}}/**
 * @license
 * Copyright 2025 Google LLC
 * SPDX-License-Identifier: Apache-2.0
 */const vS="gl-node/";class TS{constructor(e){var n;if(e.apiKey==null)throw new Error("An API Key must be set when running in a browser");if(e.project||e.location)throw new Error("Vertex AI project based authentication is not supported on browser runtimes. Please do not provide a project or location.");this.vertexai=(n=e.vertexai)!==null&&n!==void 0?n:!1,this.apiKey=e.apiKey;const o=Vg(e.httpOptions,e.vertexai,void 0,void 0);o&&(e.httpOptions?e.httpOptions.baseUrl=o:e.httpOptions={baseUrl:o}),this.apiVersion=e.apiVersion;const r=new yS(this.apiKey);this.apiClient=new ox({auth:r,apiVersion:this.apiVersion,apiKey:this.apiKey,vertexai:this.vertexai,httpOptions:e.httpOptions,userAgentExtra:vS+"web",uploader:new mS,downloader:new sS}),this.models=new Ex(this.apiClient),this.live=new gx(this.apiClient,r,new hS),this.batches=new n0(this.apiClient),this.chats=new L0(this.models,this.apiClient),this.caches=new R0(this.apiClient),this.files=new J0(this.apiClient),this.operations=new wx(this.apiClient),this.authTokens=new Gx(this.apiClient),this.tunings=new iS(this.apiClient)}}const Nd=new TS({apiKey:"xxx"}),Ad={lite:"gemini-flash-lite-latest",fast:"gemini-2.5-flash",pro:"gemini-2.5-pro"};class xS{async generateText(e){const{model:n,prompt:o,systemInstruction:r}=e,i=Ad[n];try{return(await Nd.models.generateContent({model:i,contents:o,config:{...r&&{systemInstruction:r}}})).text.trim()}catch(s){throw console.error(`Error generating text with Gemini model ${i}:`,s),new Error("Failed to get text response from Gemini AI.")}}async generateJson(e){const{model:n,prompt:o,schema:r,systemInstruction:i}=e,s=Ad[n];try{const c=(await Nd.models.generateContent({model:s,contents:o,config:{responseMimeType:"application/json",responseSchema:r,...i&&{systemInstruction:i}}})).text.trim();return JSON.parse(c)}catch(u){console.error(`Error generating JSON with Gemini model ${s}:`,u);try{console.log("Attempting fallback for JSON generation...");const c=`${o}
IMPORTANT: Respond ONLY with a valid JSON object that conforms to the requested schema. Do not include any other text or markdown formatting.`,f=(await this.generateText({model:n,prompt:c,systemInstruction:i})).trim().replace(/```json|```/g,"");return JSON.parse(f)}catch(c){throw console.error("Gemini JSON fallback also failed:",c),new Error("Failed to get a valid JSON response from Gemini AI, even with fallback.")}}}}const SS=new xS;class hi{constructor(e){e.apiKey||console.warn(`API key is missing for ${e.providerName} provider. It will not be usable unless the corresponding environment variable is set.`),this.providerName=e.providerName,this.apiUrl=e.apiUrl,this.apiKey=e.apiKey||"",this.modelMap=e.modelMap}checkApiKey(){if(!this.apiKey)throw new Error(`API Key for ${this.providerName} is not configured. Please set the corresponding environment variable.`)}async makeApiCall(e){var o;this.checkApiKey();const n=await fetch(this.apiUrl,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${this.apiKey}`},body:JSON.stringify(e)});if(!n.ok){const r=await n.json();throw console.error(`${this.providerName} API Error:`,r),new Error(`${this.providerName} API request failed with status ${n.status}: ${(o=r.error)==null?void 0:o.message}`)}return n.json()}async generateText(e){var u,c,d;const{model:n,prompt:o,systemInstruction:r}=e,i=this.modelMap[n],s=[];r&&s.push({role:"system",content:r}),s.push({role:"user",content:o});try{return((d=(c=(u=(await this.makeApiCall({model:i,messages:s})).choices[0])==null?void 0:u.message)==null?void 0:c.content)==null?void 0:d.trim())||""}catch(f){throw console.error(`Error generating text with ${this.providerName} model ${i}:`,f),new Error(`Failed to get text response from ${this.providerName}.`)}}async generateJson(e){var d,f,p;const{model:n,prompt:o,systemInstruction:r}=e,i=this.modelMap[n],s=[];let u=r||"";u+=`
You must respond in a valid JSON format.`,s.push({role:"system",content:u});const c=`${o}

IMPORTANT: Respond with a single, valid JSON object only. Do not include any other text, explanations, or markdown formatting.`;s.push({role:"user",content:c});try{const y=(p=(f=(d=(await this.makeApiCall({model:i,messages:s,response_format:{type:"json_object"}})).choices[0])==null?void 0:d.message)==null?void 0:f.content)==null?void 0:p.trim();if(!y)throw new Error(`${this.providerName} returned an empty message for JSON request.`);return JSON.parse(y)}catch(m){throw console.error(`Error generating JSON with ${this.providerName} model ${i}:`,m),new Error(`Failed to get a valid JSON response from ${this.providerName}.`)}}}const CS=new hi({providerName:"OpenAI",apiUrl:"https://api.openai.com/v1/chat/completions",apiKey:void 0,modelMap:{lite:"gpt-3.5-turbo-0125",fast:"gpt-4o-mini",pro:"gpt-4o"}}),ES=new hi({providerName:"DashScope",apiUrl:"https://dashscope.aliyuncs.com/compatible-mode/v1/chat/completions",apiKey:"sk-06c61fc3bb2543069ed235e2df877f8a",modelMap:{lite:"qwen-turbo",fast:"qwen-plus",pro:"qwen3-max-preview"}}),wS=new hi({providerName:"DeepSeek",apiUrl:"https://api.deepseek.com/v1/chat/completions",apiKey:void 0,modelMap:{lite:"deepseek-chat",fast:"deepseek-chat",pro:"deepseek-coder"}}),_S=new hi({providerName:"OpenRouter",apiUrl:"https://openrouter.ai/api/v1/chat/completions",apiKey:void 0,modelMap:{lite:"mistralai/mistral-7b-instruct:free",fast:"google/gemini-flash-1.5",pro:"anthropic/claude-3-opus"}}),kS={gemini:SS,openai:CS,dashscope:ES,deepseek:wS,openrouter:_S},IS={summary:{provider:"gemini",model:"fast"},title:{provider:"gemini",model:"fast"},chat:{provider:"gemini",model:"fast"},pulseReport:{provider:"gemini",model:"pro"},wikiEntry:{provider:"gemini",model:"lite"},relatedTopics:{provider:"gemini",model:"lite"},subTopics:{provider:"gemini",model:"lite"},wikiTopics:{provider:"gemini",model:"lite"},debateTopics:{provider:"gemini",model:"lite"},debateTurn:{provider:"gemini",model:"lite"},debateSynthesis:{provider:"gemini",model:"lite"},podcastTurn:{provider:"gemini",model:"lite"}},NS={summary:{provider:"dashscope",model:"fast"},title:{provider:"dashscope",model:"fast"},chat:{provider:"dashscope",model:"fast"},pulseReport:{provider:"dashscope",model:"pro"},wikiEntry:{provider:"dashscope",model:"lite"},relatedTopics:{provider:"dashscope",model:"lite"},subTopics:{provider:"dashscope",model:"lite"},wikiTopics:{provider:"dashscope",model:"lite"},debateTopics:{provider:"dashscope",model:"lite"},debateTurn:{provider:"dashscope",model:"lite"},debateSynthesis:{provider:"dashscope",model:"lite"},podcastTurn:{provider:"dashscope",model:"lite"}},AS={summary:{provider:"openai",model:"fast"},title:{provider:"openai",model:"fast"},chat:{provider:"openai",model:"fast"},pulseReport:{provider:"openai",model:"pro"},wikiEntry:{provider:"openai",model:"lite"},relatedTopics:{provider:"openai",model:"lite"},subTopics:{provider:"openai",model:"lite"},wikiTopics:{provider:"openai",model:"lite"},debateTopics:{provider:"openai",model:"lite"},debateTurn:{provider:"openai",model:"lite"},debateSynthesis:{provider:"openai",model:"lite"},podcastTurn:{provider:"openai",model:"lite"}},PS={summary:{provider:"deepseek",model:"fast"},title:{provider:"deepseek",model:"fast"},chat:{provider:"deepseek",model:"fast"},pulseReport:{provider:"deepseek",model:"pro"},wikiEntry:{provider:"deepseek",model:"lite"},relatedTopics:{provider:"deepseek",model:"lite"},subTopics:{provider:"deepseek",model:"lite"},wikiTopics:{provider:"deepseek",model:"lite"},debateTopics:{provider:"deepseek",model:"lite"},debateTurn:{provider:"deepseek",model:"lite"},debateSynthesis:{provider:"deepseek",model:"lite"},podcastTurn:{provider:"deepseek",model:"lite"}},RS={summary:{provider:"openrouter",model:"fast"},title:{provider:"openrouter",model:"fast"},chat:{provider:"openrouter",model:"fast"},pulseReport:{provider:"openrouter",model:"pro"},wikiEntry:{provider:"openrouter",model:"lite"},relatedTopics:{provider:"openrouter",model:"lite"},subTopics:{provider:"openrouter",model:"lite"},wikiTopics:{provider:"openrouter",model:"lite"},debateTopics:{provider:"openrouter",model:"lite"},debateTurn:{provider:"openrouter",model:"lite"},debateSynthesis:{provider:"openrouter",model:"lite"},podcastTurn:{provider:"openrouter",model:"lite"}},Pd={gemini:IS,dashscope:NS,openai:AS,deepseek:PS,openrouter:RS},_p="dashscope",MS=Pd[_p]||Pd.gemini;console.log(`Using AI Scheme: "${_p}"`);function $e(t){const e=MS[t],n=kS[e.provider];if(!n)throw new Error(`Provider "${e.provider}" is not registered for capability "${t}".`);return{provider:n,model:e.model}}const DS={type:H.OBJECT,properties:{todos:{type:H.ARRAY,description:"A list of actionable to-do items or tasks extracted from the notes.",items:{type:H.STRING}},knowledgeCards:{type:H.ARRAY,description:"A list of diverse, categorized knowledge cards generated based on the notes' content.",items:{type:H.OBJECT,properties:{type:{type:H.STRING,description:"The category of the card. Must be one of the specified enum values.",enum:["encyclopedia","creative_story","note_synthesis","new_theory","idea"]},title:{type:H.STRING,description:"A concise, engaging title for the card."},content:{type:H.STRING,description:"The detailed content of the card, providing value to the user."},sources:{type:H.ARRAY,description:"An array of URL strings citing the sources for encyclopedia cards. This is mandatory for the 'encyclopedia' type.",items:{type:H.STRING}}},required:["type","title","content"]}}},required:["todos","knowledgeCards"]};async function LS(t){if(t.length===0)return{todos:[],knowledgeCards:[]};const n=`
Analyze the following collection of notes. Your task is to extract two types of information:
1.  Actionable to-do items.
2.  A diverse set of "Knowledge Cards" based on the content.

**Instructions for Knowledge Cards:**
Generate a variety of cards from the following categories. Be creative and insightful.
-   **encyclopedia**: For significant concepts, provide a concise summary of critical key points, MUST include an array of URLs for 'sources'.
-   **creative_story**: Write a short, imaginative story or scene.
-   **note_synthesis**: Synthesize key points from multiple related notes.
-   **new_theory**: Formulate a concise theory or principle from abstract ideas.
-   **idea**: For simple, standalone creative sparks.

**General Rules:**
-   Respond in the primary language used in the provided notes.
-   Return the result as a single JSON object.

Here are the notes:
${t.map(s=>`Title: ${s.title||"Untitled"}
Content: ${s.content}`).join(`

---

`)}`,{provider:o,model:r}=$e("summary"),i={model:r,prompt:n,schema:DS};return o.generateJson(i)}async function US(t){if(!t)return"";const e=`Based on the following note content, generate a very short, concise, and relevant title (max 5 words).
IMPORTANT: Respond in the same language as the provided Content. Do not include any quotation marks or labels.

Content:
---
${t}
---

Title:`,{provider:n,model:o}=$e("title"),r={model:o,prompt:e};return(await n.generateText(r)).replace(/["']/g,"").trim()}async function FS(t,e,n){const o=t.map(d=>`Title: ${d.title||"Untitled"}
Content: ${d.content}`).join(`

---

`),i=`You are an AI assistant for a note-taking app. Your purpose is to help the user understand and synthesize their own notes.
You have access to the user's entire collection of notes and the recent conversation history.
Answer the user's question based *only* on the information provided in their notes. Do not make things up.
If the notes don't contain the answer, say so politely. Be helpful, concise, and conversational.

--- CONVERSATION HISTORY ---
${e.slice(-10).map(d=>`${d.role}: ${d.content}`).join(`
`)}

--- ALL NOTES ---
${o}

--- USER'S QUESTION ---
user: ${n}

model:`,{provider:s,model:u}=$e("chat"),c={model:u,prompt:i};return s.generateText(c)}const VS={type:H.OBJECT,properties:{title:{type:H.STRING,description:"A compelling title for the report, like 'Your Weekly Pulse' or 'Thought Trajectory'."},content:{type:H.STRING,description:"A narrative report, written in markdown, summarizing the user's thought evolution."}},required:["title","content"]};async function HS(t){if(t.length===0)return{title:"Not Enough Data",content:"Write at least one note to generate your first Pulse report."};const n=`
You are a highly perceptive thought analyst. Your task is to analyze a user's entire collection of notes and generate a short, insightful "Pulse Report" about their intellectual journey.
The report should be a narrative, not just a list. Be insightful and help the user see the bigger picture of their own thinking.

**Analyze the following aspects:**
1.  **Theme Evolution:** Identify the main topics. Have they shifted over time?
2.  **New Connections:** Find surprising links between different notes.
3.  **Forgotten Threads:** Resurface a significant idea from an older note.
4.  **Exploration Suggestions:** Suggest one or two new questions for them to explore.

**Formatting Rules:**
-   Use Markdown for formatting (e.g., # for title, ## for subtitles, * for lists).
-   The tone should be encouraging, insightful, and like a personal analyst.
-   Respond in the primary language used in the provided notes.
-   Return the result as a single JSON object.

Here are all the notes:
${t.map(s=>`Date: ${new Date(s.createdAt).toISOString().split("T")[0]}
Title: ${s.title||"Untitled"}
Content: ${s.content}`).join(`

---

`)}`,{provider:o,model:r}=$e("pulseReport"),i={model:r,prompt:n,schema:VS};return o.generateJson(i)}const GS=70;class BS{constructor(){this.notesNeedingTitle=new Map,this.isProcessingTitles=!1,this.processTitleQueue=async()=>{if(this.isProcessingTitles||this.notesNeedingTitle.size===0)return;this.isProcessingTitles=!0;const e=new Map(this.notesNeedingTitle);this.notesNeedingTitle.clear(),he.setState(o=>({generatingTitleIds:new Set([...o.generatingTitleIds,...e.keys()])}));const n=Array.from(e.entries()).map(async([o,r])=>{try{const i=await US(r);i&&he.setState(s=>({notes:s.notes.map(u=>u.id===o&&!u.title?{...u,title:i}:u)}))}catch(i){console.error(`Failed to generate title for note ${o}:`,i)}finally{he.setState(i=>{const s=new Set(i.generatingTitleIds);return s.delete(o),{generatingTitleIds:s}})}});await Promise.all(n),this.isProcessingTitles=!1,this.notesNeedingTitle.size>0&&this.processTitleQueue()},this.createNewTextNote=()=>{const e={id:crypto.randomUUID(),type:"text",title:"",content:"",createdAt:Date.now()};return he.setState(n=>({notes:[e,...n.notes]})),e},this.deleteNoteById=e=>{he.setState(n=>({notes:n.notes.filter(o=>o.id!==e)}))},this.updateNote=(e,n)=>{he.setState(o=>{const r=o.notes.map(u=>u.id===e?{...u,...n}:u),i=r.find(u=>u.id===e);return i&&i.type==="text"&&!i.title&&i.content.length>GS&&n.content!==void 0&&!o.generatingTitleIds.has(e)&&!this.notesNeedingTitle.has(e)&&(this.notesNeedingTitle.set(e,i.content),setTimeout(()=>this.processTitleQueue(),500)),{notes:r}})}}}const on=Gn()(Vo(()=>({chatHistory:[],isChatting:!1}),{name:"ai-notes-chathistory",partialize:t=>({chatHistory:t.chatHistory})}));class qS{constructor(){this.sendChatMessage=async e=>{if(!e.trim())return;const n={id:crypto.randomUUID(),role:"user",content:e};on.setState(o=>({chatHistory:[...o.chatHistory,n],isChatting:!0}));try{const o=he.getState().notes,r=on.getState().chatHistory,i=await FS(o,r,e),s={id:crypto.randomUUID(),role:"model",content:i};on.setState(u=>({chatHistory:[...u.chatHistory,s]}))}catch(o){console.error("Chat failed:",o);const r={id:crypto.randomUUID(),role:"model",content:"Sorry, I encountered an error. Please try again."};on.setState(i=>({chatHistory:[...i.chatHistory,r]}))}finally{on.setState({isChatting:!1})}}}}const Je=Gn()(Vo(()=>({aiSummary:null,myTodos:[],notesHashAtLastSummary:null,isLoadingAI:!1,isLoadingPulse:!1,lastPulseTimestamp:null,pulseReports:[]}),{name:"ai-notes-studio-storage",partialize:t=>({aiSummary:t.aiSummary,myTodos:t.myTodos,notesHashAtLastSummary:t.notesHashAtLastSummary,lastPulseTimestamp:t.lastPulseTimestamp,pulseReports:t.pulseReports})}));function Rd(t){let e=0;for(let n=0;n<t.length;n++){const o=t.charCodeAt(n);e=(e<<5)-e+o,e|=0}return e.toString()}const $S=7*24*60*60*1e3;class zS{constructor(){this.init=()=>{const{lastPulseTimestamp:e}=Je.getState(),{notes:n}=he.getState(),o=Date.now();(!e||o-e>$S)&&n.length>0&&(console.log("Auto-generating weekly Pulse report..."),this.generateNewPulseReport(!0))},this.generateNewSummary=async()=>{const e=he.getState().notes,{notesHashAtLastSummary:n,myTodos:o}=Je.getState(),r=JSON.stringify(e);if(e.length>0&&r!==n){Je.setState({isLoadingAI:!0});try{const i=await LS(e),s=new Set(o.map(d=>d.text)),u=i.todos.filter(d=>!s.has(d)).map(d=>({id:Rd(d),text:d,completed:!1})),c=i.knowledgeCards.map(d=>({...d,id:Rd(d.title+d.content)}));Je.setState({aiSummary:{todos:u,knowledgeCards:c},notesHashAtLastSummary:r})}catch(i){console.error(i),alert("Failed to analyze notes. Please check the console for details.")}finally{Je.setState({isLoadingAI:!1})}}},this.toggleTodo=e=>{Je.setState(n=>({myTodos:n.myTodos.map(o=>o.id===e?{...o,completed:!o.completed}:o)}))},this.adoptTodo=e=>{Je.setState(n=>{const o=n.aiSummary?n.aiSummary.todos.filter(i=>i.id!==e.id):[],r=n.aiSummary?{...n.aiSummary,todos:o}:null;return{myTodos:[e,...n.myTodos],aiSummary:r}})},this.generateNewPulseReport=async(e=!1)=>{Je.setState({isLoadingPulse:!0});try{const n=he.getState().notes,o=await HS(n),r={id:crypto.randomUUID(),...o,createdAt:Date.now()};Je.setState(i=>({pulseReports:[r,...i.pulseReports],lastPulseTimestamp:Date.now()}))}catch(n){console.error("Pulse report generation failed:",n),e||alert("Failed to generate Pulse Report. Please check the console for details.")}finally{Je.setState({isLoadingPulse:!1})}}}}async function Md(t,e){const n=`You are a domain expert with a talent for clear and concise explanations. Your task is to provide a high-quality, professional, and in-depth encyclopedia-style summary for the given "Term", tailored for a learning context.

**Instructions:**
1.  **Content Quality:** The summary must be comprehensive, covering the most critical aspects, key principles, and relevant context. Go beyond a simple definition.
2.  **Structure:** Use clean, simple markdown for formatting. Utilize paragraphs, lists, and bold text to create a well-structured and readable entry.
3.  **Language:** Respond ONLY in the primary language used in the provided "Context Text".
4.  **Format:** Do NOT include a main title (like '# Term'). The response should begin directly with the content of the summary.

Context Text (for language detection):
---
${e.substring(0,2e3)}
---

Term: "${t}"`,{provider:o,model:r}=$e("wikiEntry"),i={model:r,prompt:n};return o.generateText(i)}const Ql={type:H.ARRAY,items:{type:H.STRING}};async function Wi(t){const e=`Based on the content of the following wiki article, suggest 3-5 related topics for further exploration. These topics should encourage discovery of adjacent concepts or deeper aspects of the current topic. The topics should be concise (2-5 words each).

IMPORTANT: The suggested topics MUST be in the primary language used in the article.

Return the result as a JSON array of strings. Do not include any other text.

Example format: ["Quantum Entanglement", "The History of the Silk Road", "Stoic Philosophy in Modern Life"]

Article Content:
---
${t.substring(0,4e3)}
---`,{provider:n,model:o}=$e("relatedTopics"),r={model:o,prompt:e,schema:Ql};return n.generateJson(r)}async function JS(t,e){const n=`Based on the user's "Selection" and the surrounding "Context", suggest 3-5 alternative or more specific topics for exploration in a wiki. The topics should be concise (2-5 words each) and directly related to the selection, offering different angles or deeper dives.

IMPORTANT: The suggested topics MUST be in the primary language used in the context.

Return the result as a JSON array of strings. Do not include any other text.

Example: If selection is "Renaissance Art", suggestions could be ["High Renaissance Masters", "The Medici Family's Patronage", "Linear Perspective in Painting"].

Context:
---
${e.substring(0,2e3)}
---

Selection: "${t}"`,{provider:o,model:r}=$e("subTopics"),i={model:r,prompt:n,schema:Ql};return o.generateJson(i)}async function WS(t){if(t.length===0)return[];const n=`Based on the following user notes, suggest 5 interesting, non-obvious, and thought-provoking topics or concepts for them to explore in a wiki format. The topics should be concise (2-5 words each). They should be broad enough for an interesting summary but specific enough to be actionable.

IMPORTANT: The suggested topics MUST be in the primary language used in the notes provided below.

Return the result as a JSON array of strings. Do not include any other text.

Example format: ["Quantum Entanglement", "The History of the Silk Road", "Stoic Philosophy in Modern Life"]

Notes:
---
${t.slice(0,10).map(s=>`Title: ${s.title||"Untitled"}
Content: ${s.content}`).join(`

---

`)}
---`,{provider:o,model:r}=$e("wikiTopics"),i={model:r,prompt:n,schema:Ql};return o.generateJson(i)}class bS{constructor(){this.fetchWikiTopics=async()=>{const{notes:e}=he.getState(),{wikiTopics:n}=Ne.getState();if(e.length>0&&n.length===0){Ne.setState({isLoadingWikiTopics:!0});try{const o=await WS(e);Ne.setState({wikiTopics:o})}catch(o){console.error("Failed to fetch wiki topics",o),Ne.setState({wikiTopics:[]})}finally{Ne.setState({isLoadingWikiTopics:!1})}}},this.generateWiki=async(e,n,o,r)=>{try{const i=await Md(e,r),s=await Wi(i),u={id:crypto.randomUUID(),term:e,content:i,createdAt:Date.now(),sourceNoteId:n,parentId:o,suggestedTopics:s};return Ne.setState(c=>({wikis:[...c.wikis,u]})),u}catch(i){throw console.error("Wiki generation failed:",i),alert("Failed to generate Wiki entry. Please try again."),i}},this.generateSubTopics=async(e,n)=>{try{return await JS(e,n)}catch(o){throw console.error("Failed to generate sub-topics",o),alert("Failed to suggest topics. Please try again."),o}},this.updateWikiWithTopics=async e=>{const{wikis:n}=Ne.getState(),o=n.find(r=>r.id===e);if(!(!o||o.suggestedTopics&&o.suggestedTopics.length>0))try{const r=await Wi(o.content);Ne.setState(i=>({wikis:i.wikis.map(s=>s.id===e?{...s,suggestedTopics:r}:s)}))}catch(r){console.error(`Failed to update wiki ${e} with related topics`,r)}},this.regenerateWiki=async(e,n)=>{const{wikis:o}=Ne.getState(),{notes:r}=he.getState(),i=o.find(s=>s.id===e);if(i)try{const s=r.find(f=>f.id===i.sourceNoteId),u=s?s.content:r.map(f=>f.content).join(`
`),c=await Md(i.term,u),d=await Wi(c);Ne.setState(f=>{let p=f.wikis.map(m=>m.id===e?{...m,content:c,suggestedTopics:d}:m);if(n){const m=(x,S)=>{const w=S.filter(g=>g.parentId===x);if(w.length===0)return new Set;const v=new Set(w.map(g=>g.id));return w.forEach(g=>{m(g.id,S).forEach(T=>v.add(T))}),v},y=m(e,p);p=p.filter(x=>!y.has(x.id))}return{wikis:p}})}catch(s){console.error("Wiki regeneration failed:",s),alert("Failed to regenerate Wiki entry. Please try again.")}},this.deleteWikisBySourceNoteId=e=>{Ne.setState(n=>({wikis:n.wikis.filter(o=>o.sourceNoteId!==e)}))}}}const ie=Gn()(Vo(()=>({topics:[],isLoadingTopics:!1,sessionHistory:[],isSessionActive:!1,currentSession:null}),{name:"ai-notes-parliament-storage",partialize:t=>({topics:t.topics})})),YS={type:H.ARRAY,items:{type:H.STRING}};async function OS(t){if(t.length===0)return[];const n=`You are an expert in identifying controversial and intellectually stimulating topics for debate. Analyze the following user notes. Extract 5 topics that are suitable for a debate between two AI personas: a pragmatist and a visionary. The topics should be phrased as propositions, questions, or challenging statements.

IMPORTANT: The suggested topics MUST be in the primary language used in the notes provided below.

Return the result as a JSON array of strings. Do not include any other text.

Example format: ["Is technological progress always beneficial for humanity?", "The ethics of artificial intelligence in art", "Centralized vs. Decentralized systems: Which is better for society?"]

Notes:
---
${t.slice(0,15).map(s=>`Title: ${s.title||"Untitled"}
Content: ${s.content}`).join(`

---

`)}
---`,{provider:o,model:r}=$e("debateTopics"),i={model:r,prompt:n,schema:YS};return o.generateJson(i)}async function KS(t,e,n,o){const r=e.map(d=>`${d.persona||"System"}: ${d.content}`).join(`
`),i=`You are an AI assistant participating in a debate. You must strictly and consistently adhere to the persona assigned to you.

**Debate Topic:** ${t}
${o?`
**Context from User's Note:**
${o}
`:""}
**Your Assigned Persona:**
${n}

**Debate History (so far):**
${r}

**Your Task:**
Based on your persona and the debate so far, provide your next statement. Your response should be a single, concise paragraph. It should directly address the last statement if one exists, or provide an opening argument if the history is empty. Do not greet or introduce yourself. Just state your argument directly. Your response must be in the same language as the topic and context.`,{provider:s,model:u}=$e("debateTurn"),c={model:u,prompt:i};return s.generateText(c)}async function QS(t,e,n,o,r){const i=e.map(m=>`${m.persona}: ${m.content}`).join(`
`);let s="",u="";switch(n){case"Host":switch(s="You are Alex, the charismatic and curious host of the popular podcast 'Mindscapes'. You are known for your ability to ask insightful questions, keep the conversation engaging and accessible, and synthesize complex ideas for your audience.",o){case"intro":u="Start the show. Welcome the listeners to 'Mindscapes', introduce today's fascinating topic, and warmly welcome your special guest, the brilliant Dr. Evelyn Reed.";break;case"question":u="Based on Dr. Reed's last statement and the overall conversation, ask your next question. It should be insightful, open-ended, and guide the conversation into a new, interesting area. Keep it conversational.";break;case"outro":u="Wrap up the show. Thank Dr. Evelyn Reed for her incredible insights. Provide a brief, powerful summary of the key takeaways for the listeners, and sign off in your signature style.";break}break;case"Guest Expert":switch(s="You are Dr. Evelyn Reed, a renowned expert in your field and a guest on the podcast 'Mindscapes'. You are passionate, articulate, and have a knack for explaining complex topics with clarity and enthusiasm, often using vivid analogies.",o){case"greeting":u="Alex, the host, has just welcomed you to the show. Respond with a brief, warm greeting. Thank him for having you and express your excitement to discuss the topic.";break;case"answer":u="Answer Alex's last question. Speak with passion and expertise. Provide a clear, detailed explanation, and if possible, use an interesting analogy or a brief anecdote to make your point more memorable.";break}break}const c=`You are an AI performing a role in a podcast episode. Strictly adhere to your assigned persona and task.

**Podcast Topic:** ${t}
${r?`
**Context from User's Note (for your reference):**
${r}
`:""}
**Your Persona:**
${s}

**Conversation History:**
${i}

**Your Current Task:**
${u}

**Instructions:**
- Respond in a natural, conversational style suitable for a podcast.
- Keep your response to one or two engaging paragraphs.
- Respond in the same language as the topic and context.
- Do not add any extra text like "(Podcast ends)" or your character name. Just provide the dialogue.
`,{provider:d,model:f}=$e("podcastTurn"),p={model:f,prompt:c};return d.generateText(p)}const XS={type:H.OBJECT,properties:{keyPointsPragmatist:{type:H.ARRAY,description:"A list of 2-3 key arguments made by The Pragmatist.",items:{type:H.STRING}},keyPointsVisionary:{type:H.ARRAY,description:"A list of 2-3 key arguments made by The Visionary.",items:{type:H.STRING}},coreTension:{type:H.STRING,description:"A single sentence that masterfully identifies the central conflict or trade-off between the two viewpoints."},nextSteps:{type:H.ARRAY,description:"A list of 2-3 insightful questions or potential action items for the user to explore next, based on the synthesis.",items:{type:H.STRING}}},required:["keyPointsPragmatist","keyPointsVisionary","coreTension","nextSteps"]};async function ZS(t,e){const n=e.map(u=>`${u.persona}: ${u.content}`).join(`
`),o=`You are a neutral and insightful debate moderator. Your task is to synthesize the preceding debate for the user, providing a clear, actionable summary.

**Debate Topic:** ${t}

**Full Debate Transcript:**
${n}

**Your Task:**
Analyze the transcript and generate a structured summary.
-   Summarize the key arguments for each persona.
-   Identify the core tension or fundamental disagreement.
-   Propose concrete next steps or questions for the user to reflect on.

Respond ONLY with a valid JSON object that conforms to the requested schema. Do not include any other text or markdown formatting. The language of your response must match the language used in the debate transcript.`,{provider:r,model:i}=$e("debateSynthesis"),s={model:i,prompt:o,schema:XS};return r.generateJson(s)}const jS=[{name:"The Pragmatist",definition:"You are The Pragmatist. You are grounded, data-driven, and skeptical of grand, unproven ideas. You focus on immediate realities, practical applications, and potential risks. Your arguments should be logical and backed by evidence (even if hypothetical within the context of the user's notes)."},{name:"The Visionary",definition:"You are The Visionary. You are creative, forward-thinking, and optimistic about future possibilities. You focus on long-term potential, abstract connections, and innovative concepts. Your arguments should be imaginative and explore the 'what if' scenarios."}],eC=6,tC=3;class nC{constructor(){this.fetchTopics=async()=>{const{notes:e}=he.getState();ie.setState({isLoadingTopics:!0});try{const n=await OS(e);ie.setState({topics:n})}catch(n){console.error("Failed to fetch debate topics",n)}finally{ie.setState({isLoadingTopics:!1})}},this.startDebate=async(e,n)=>{var r;if(ie.getState().isSessionActive)return;this.resetSession(),ie.setState({isSessionActive:!0,currentSession:{mode:"debate",topic:e,noteId:n}});const o=n?(r=he.getState().notes.find(i=>i.id===n))==null?void 0:r.content:void 0;this.runDebateLoop(e,o)},this.startPodcast=async(e,n)=>{var r;if(ie.getState().isSessionActive)return;this.resetSession(),ie.setState({isSessionActive:!0,currentSession:{mode:"podcast",topic:e,noteId:n}});const o=n?(r=he.getState().notes.find(i=>i.id===n))==null?void 0:r.content:void 0;this.runPodcastLoop(e,o)},this.runDebateLoop=async(e,n)=>{try{for(let s=0;s<eC;s++){const u=jS[s%2],c=ie.getState().sessionHistory;s>0&&await new Promise(p=>setTimeout(p,2e3));const d=await KS(e,c,u.definition,s===0?n:void 0),f={id:crypto.randomUUID(),role:"model",content:d,persona:u.name};ie.setState(p=>({sessionHistory:[...p.sessionHistory,f]}))}await new Promise(s=>setTimeout(s,1500));const o=ie.getState().sessionHistory,r=await ZS(e,o),i={id:crypto.randomUUID(),role:"model",content:"Here is a synthesis of the discussion.",persona:"Moderator",synthesisContent:r};ie.setState(s=>({sessionHistory:[...s.sessionHistory,i]}))}catch(o){this.handleError(o,"Debate failed:")}finally{ie.setState({isSessionActive:!1})}},this.runPodcastLoop=async(e,n)=>{try{await this.addPodcastTurn(e,"Host","intro",n),await this.addPodcastTurn(e,"Guest Expert","greeting");for(let o=0;o<tC;o++)await this.addPodcastTurn(e,"Host","question"),await this.addPodcastTurn(e,"Guest Expert","answer");await this.addPodcastTurn(e,"Host","outro")}catch(o){this.handleError(o,"Podcast generation failed:")}finally{ie.setState({isSessionActive:!1})}},this.addPodcastTurn=async(e,n,o,r)=>{await new Promise(c=>setTimeout(c,2500));const i=ie.getState().sessionHistory,s=await QS(e,i,n,o,r),u={id:crypto.randomUUID(),role:"model",content:s,persona:n};ie.setState(c=>({sessionHistory:[...c.sessionHistory,u]}))},this.handleError=(e,n)=>{console.error(n,e);const o={id:crypto.randomUUID(),role:"model",content:"An error occurred during the session. Please try again.",persona:"Moderator"};ie.setState(r=>({sessionHistory:[...r.sessionHistory,o]}))},this.resetSession=()=>{ie.setState({sessionHistory:[],isSessionActive:!1,currentSession:null})}}}const it="wiki_root";class oC{constructor(){this.appManager=new Dg,this.notesManager=new BS,this.chatManager=new qS,this.studioManager=new zS,this.wikiManager=new bS,this.parliamentManager=new nC,this.handleNewTextNote=()=>{const e=this.notesManager.createNewTextNote();this.appManager.setActiveNoteId(e.id),this.appManager.setViewMode("editor")},this.handleDeleteNote=e=>{const{activeNoteId:n}=yn.getState();this.notesManager.deleteNoteById(e),this.wikiManager.deleteWikisBySourceNoteId(e),n===e&&this.appManager.setActiveNoteId(null)},this.handleSelectNote=e=>{this.appManager.setActiveNoteId(e),this.appManager.setViewMode("editor")},this.handleShowChat=()=>{this.appManager.setViewMode("chat"),this.appManager.setActiveNoteId(null)},this.handleShowStudio=()=>{this.appManager.setViewMode("studio"),this.appManager.setActiveNoteId(null),this.studioManager.generateNewSummary()},this.handleShowWikiStudio=()=>{this.appManager.setInitialWikiHistory(null),this.appManager.setViewMode("wiki_studio"),this.appManager.setActiveNoteId(null),this.wikiManager.fetchWikiTopics()},this.handleShowParliament=()=>{this.appManager.setViewMode("parliament"),this.appManager.setActiveNoteId(null),this.parliamentManager.fetchTopics()},this.handleCardToNote=e=>{const n=this.notesManager.createNewTextNote();this.notesManager.updateNote(n.id,{title:e.title,content:e.content}),this.appManager.setActiveNoteId(n.id),this.appManager.setViewMode("editor")},this.handleViewWikiInStudio=e=>{const{wikis:n}=Ne.getState(),o=n.find(s=>s.id===e);if(!o)return;const r=[o];let i=o;for(;i.parentId;){const s=n.find(u=>u.id===i.parentId);if(s&&s.id!==it)r.unshift(s),i=s;else break}this.appManager.setInitialWikiHistory(r),this.appManager.setViewMode("wiki_studio"),this.appManager.setActiveNoteId(null)},this.handleSaveDebateSynthesisAsNote=(e,n)=>{const o=`Synthesis on: ${e}`,r=`
## Core Tension
${n.coreTension}

## Key Arguments: The Pragmatist
${n.keyPointsPragmatist.map(s=>`- ${s}`).join(`
`)}

## Key Arguments: The Visionary
${n.keyPointsVisionary.map(s=>`- ${s}`).join(`
`)}

## Proposed Next Steps
${n.nextSteps.map(s=>`- ${s}`).join(`
`)}
    `.trim(),i=this.notesManager.createNewTextNote();this.notesManager.updateNote(i.id,{title:o,content:r}),this.appManager.setActiveNoteId(i.id),this.appManager.setViewMode("editor")}}}const kp=F.createContext(null),rC=({children:t})=>{const e=F.useRef(null);return e.current===null&&(e.current=new oC),F.useEffect(()=>{var n;(n=e.current)==null||n.studioManager.init()},[]),h.jsx(kp.Provider,{value:e.current,children:t})},iC=()=>{const t=F.useContext(kp);if(!t)throw new Error("usePresenter must be used within a PresenterProvider");return t},Xl=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m3.75 9v6m3-3H9m1.5-12H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"})}),sC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m14.74 9-.346 9m-4.788 0L9.26 9m9.968-3.21c.342.052.682.107 1.022.166m-1.022-.165L18.16 19.673a2.25 2.25 0 0 1-2.244 2.077H8.084a2.25 2.25 0 0 1-2.244-2.077L4.772 5.79m14.456 0a48.108 48.108 0 0 0-3.478-.397m-12 .562c.34-.059.68-.114 1.022-.165m0 0a48.11 48.11 0 0 1 3.478-.397m7.5 0v-.916c0-1.18-.91-2.134-2.09-2.201a51.964 51.964 0 0 0-3.32 0c-1.18.067-2.09 1.022-2.09 2.201v.916m7.5 0a48.667 48.667 0 0 0-7.5 0"})}),lC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 6A2.25 2.25 0 0 1 6 3.75h2.25A2.25 2.25 0 0 1 10.5 6v2.25a2.25 2.25 0 0 1-2.25 2.25H6A2.25 2.25 0 0 1 3.75 8.25V6ZM3.75 15.75A2.25 2.25 0 0 1 6 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 8.25 20.25H6A2.25 2.25 0 0 1 3.75 18v-2.25ZM13.5 6A2.25 2.25 0 0 1 15.75 3.75h2.25A2.25 2.25 0 0 1 20.25 6v2.25A2.25 2.25 0 0 1 18 10.5h-2.25A2.25 2.25 0 0 1 13.5 8.25V6ZM13.5 15.75A2.25 2.25 0 0 1 15.75 13.5h2.25a2.25 2.25 0 0 1 2.25 2.25V18A2.25 2.25 0 0 1 18 20.25h-2.25A2.25 2.25 0 0 1 13.5 18v-2.25Z"})}),aC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.72.372a11.25 11.25 0 0 1-5.58 0l-3.72-.372A2.25 2.25 0 0 1 3.75 15.118V10.608c0-.97.616-1.813 1.5-2.097m14.25-1.125a2.25 2.25 0 0 0-2.25-2.25H7.5a2.25 2.25 0 0 0-2.25 2.25v.442c.884-.285 1.83-.442 2.813-.442h7.037a3.375 3.375 0 0 1 2.813.442v-.442Z"})}),Go=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6.042A8.967 8.967 0 0 0 6 3.75c-1.052 0-2.062.18-3 .512v14.25A8.987 8.987 0 0 1 6 18c2.305 0 4.408.867 6 2.292m0-14.25a8.966 8.966 0 0 1 6-2.292c1.052 0 2.062.18 3 .512v14.25A8.987 8.987 0 0 0 18 18a8.967 8.967 0 0 0-6 2.292m0-14.25v14.25"})}),Zl=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M18 18.72a9.094 9.094 0 0 0 3.741-.479 3 3 0 0 0-4.682-2.72m-7.5-2.962a3.75 3.75 0 1 0-7.5 0 3.75 3.75 0 0 0 7.5 0ZM10.5 15a7.5 7.5 0 1 0 15 0 7.5 7.5 0 0 0-15 0Z"})}),uC=({notes:t,activeNoteId:e,onSelectNote:n,onNewTextNote:o,onDeleteNote:r,onShowStudio:i,onShowChat:s,onShowWikiStudio:u,onShowParliament:c,isLoadingAI:d,generatingTitleIds:f,viewMode:p})=>{const m=[...t].sort((x,S)=>S.createdAt-x.createdAt),y=x=>`flex flex-1 items-center justify-center gap-2 px-4 py-2 text-sm font-medium rounded-lg transition-colors focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 focus:ring-indigo-500 ${p===x?"bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-200":"bg-slate-200/80 dark:bg-slate-700/50 text-slate-600 dark:text-slate-300 hover:bg-slate-200 dark:hover:bg-slate-700"}`;return h.jsxs("div",{className:"h-full bg-slate-100 dark:bg-slate-800 flex flex-col",children:[h.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"AI Notes"}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Your intelligent companion"})]}),h.jsxs("div",{className:"p-4 flex flex-col gap-3",children:[h.jsx("div",{children:h.jsxs("button",{onClick:o,className:"flex w-full items-center justify-center gap-2 px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 dark:focus:ring-offset-slate-800 focus:ring-indigo-500 transition-all",children:[h.jsx(Xl,{className:"w-5 h-5"}),"New Note"]})}),h.jsxs("div",{className:"grid grid-cols-2 items-center gap-2",children:[h.jsxs("button",{onClick:i,className:y("studio"),children:[h.jsx(lC,{className:"w-5 h-5"}),h.jsx("span",{children:"Studio"}),d&&p==="studio"&&h.jsx("div",{className:"w-4 h-4 border-2 border-current border-t-transparent rounded-full animate-spin ml-1"})]}),h.jsxs("button",{onClick:s,className:y("chat"),children:[h.jsx(aC,{className:"w-5 h-5"}),h.jsx("span",{children:"Companion"})]}),h.jsxs("button",{onClick:u,className:y("wiki_studio"),children:[h.jsx(Go,{className:"w-5 h-5"}),h.jsx("span",{children:"Wiki"})]}),h.jsxs("button",{onClick:c,className:y("parliament"),children:[h.jsx(Zl,{className:"w-5 h-5"}),h.jsx("span",{children:"Parliament"})]})]})]}),h.jsx("div",{className:"flex-1 overflow-y-auto px-4 pb-4",children:h.jsx("ul",{className:"space-y-2",children:m.map(x=>{const S=!!x.title,w=!S&&f.has(x.id),v=S?x.title:x.content||"New Note",g=S?x.content||"No content":new Date(x.createdAt).toLocaleDateString();return h.jsx("li",{children:h.jsx("button",{onClick:()=>n(x.id),className:`w-full text-left p-3 rounded-lg transition-colors group ${x.id===e&&p==="editor"?"bg-indigo-100 dark:bg-indigo-900/50":"bg-white dark:bg-slate-700 hover:bg-slate-200 dark:hover:bg-slate-600"}`,children:h.jsxs("div",{className:"flex justify-between items-center",children:[h.jsxs("div",{className:"flex-1 overflow-hidden",children:[h.jsx("h3",{className:`font-semibold truncate ${x.id===e&&p==="editor"?"text-indigo-900 dark:text-indigo-100":"text-slate-800 dark:text-slate-200"}`,children:v}),h.jsx("p",{className:`text-xs truncate ${x.id===e&&p==="editor"?"text-indigo-700 dark:text-indigo-300":"text-slate-500 dark:text-slate-400"}`,children:g})]}),w?h.jsx("div",{className:"ml-2 p-1 flex items-center justify-center",children:h.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 dark:border-slate-500 border-t-transparent rounded-full animate-spin"})}):h.jsx("div",{onClick:T=>{T.stopPropagation(),r(x.id)},className:`ml-2 p-1 rounded-full opacity-0 group-hover:opacity-100 transition-opacity ${x.id===e&&p==="editor"?"text-indigo-500 dark:text-indigo-400 hover:bg-indigo-200/50 dark:hover:bg-indigo-800/50":"text-slate-500 hover:bg-red-100 hover:text-red-600 dark:text-slate-400 dark:hover:bg-red-900/50 dark:hover:text-red-400"}`,children:h.jsx(sC,{className:"w-4 h-4"})})]})})},x.id)})})})]})},dC=({note:t,onUpdateNote:e,wikis:n,onViewWikiInStudio:o})=>{const[r,i]=F.useState(""),[s,u]=F.useState(""),c=F.useRef(null);F.useEffect(()=>{t?(i(t.title),u(t.content)):(i(""),u(""))},[t]),F.useEffect(()=>{c.current&&(c.current.style.height="auto",c.current.style.height=`${c.current.scrollHeight}px`)},[s]);const d=()=>{t&&(t.title!==r||t.content!==s)&&e(t.id,r,s)};if(!t)return h.jsx("div",{className:"flex items-center justify-center h-full text-slate-500 dark:text-slate-400",children:h.jsxs("div",{className:"text-center",children:[h.jsx("h2",{className:"text-2xl font-semibold",children:"Select a note"}),h.jsx("p",{children:"Or create a new one to get started."})]})});const f=n.filter(p=>p.sourceNoteId===t.id&&p.parentId===null);return h.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-slate-800/50",children:[h.jsx("div",{className:"px-6 md:px-8 pt-6 md:pt-8 pb-4 border-b border-slate-200 dark:border-slate-700",children:h.jsx("input",{type:"text",value:r,onChange:p=>i(p.target.value),onBlur:d,placeholder:"Note Title",className:"w-full text-3xl font-bold bg-transparent focus:outline-none text-slate-900 dark:text-white placeholder-slate-400 dark:placeholder-slate-500"})}),h.jsxs("div",{className:"flex-1 overflow-y-auto px-6 md:px-8 pt-6 pb-6 md:pb-8",children:[h.jsx("textarea",{ref:c,value:s,onChange:p=>u(p.target.value),onBlur:d,placeholder:"Start writing...",className:"w-full bg-transparent text-lg text-slate-700 dark:text-slate-300 placeholder-slate-400 dark:placeholder-slate-500 resize-none focus:outline-none leading-relaxed",rows:1}),f.length>0&&h.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200 dark:border-slate-700",children:[h.jsxs("h3",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 mb-3 flex items-center gap-2",children:[h.jsx(Go,{className:"w-5 h-5"}),"Explorations from this note"]}),h.jsx("div",{className:"space-y-2",children:f.map(p=>h.jsxs("button",{onClick:()=>o(p.id),className:"w-full text-left p-2 rounded-md hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[h.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-100",children:p.term}),h.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Started on ",new Date(p.createdAt).toLocaleDateString()]})]},p.id))})]})]})]})},Dd=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M4.5 12.75l6 6 9-13.5"})}),cC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 18v-5.25m0 0a6.01 6.01 0 0 0 1.5-.189m-1.5.189a6.01 6.01 0 0 1-1.5-.189m3.75 7.478a12.06 12.06 0 0 1-4.5 0m3.75 2.311a14.994 14.994 0 0 1-5.25 0M9.75 11.25c0-1.036.256-2.017.75-2.828A6.023 6.023 0 0 1 12 6.002c1.393 0 2.68.56 3.622 1.48A5.996 5.996 0 0 1 16.5 11.25m-6.75 0H12m4.5 0H12"})}),fC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v6m3-3H9m12 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),bt=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M9.813 15.904 9 18.75l-.813-2.846a4.5 4.5 0 0 0-3.09-3.09L2.25 12l2.846-.813a4.5 4.5 0 0 0 3.09-3.09L9 5.25l.813 2.846a4.5 4.5 0 0 0 3.09 3.09L15.75 12l-2.846.813a4.5 4.5 0 0 0-3.09 3.09ZM18.259 8.715 18 9.75l-.259-1.035a3.375 3.375 0 0 0-2.455-2.456L14.25 6l1.036-.259a3.375 3.375 0 0 0 2.455-2.456L18 2.25l.259 1.035a3.375 3.375 0 0 0 2.456 2.456L21.75 6l-1.035.259a3.375 3.375 0 0 0-2.456 2.456Z"})}),pC=t=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.25 3v1.5M4.5 8.25H3m18 0h-1.5M4.5 12H3m18 0h-1.5m-15 3.75H3m18 0h-1.5M8.25 21v-1.5m7.5-18v1.5m0 16.5v-1.5M12 5.25v13.5m-3.75-13.5v13.5m7.5-13.5v13.5M9 5.25h6M9 18.75h6"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M21 8.25V15.75a2.25 2.25 0 0 1-2.25 2.25H5.25A2.25 2.25 0 0 1 3 15.75V8.25a2.25 2.25 0 0 1 2.25-2.25h13.5A2.25 2.25 0 0 1 21 8.25Z"})]}),mC=t=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M5.25 8.25h13.5m-13.5 0a2.25 2.25 0 0 1-2.25-2.25V5.25c0-1.242 1.008-2.25 2.25-2.25h13.5c1.242 0 2.25 1.008 2.25 2.25v.75a2.25 2.25 0 0 1-2.25 2.25m-13.5 0V21a2.25 2.25 0 0 0 2.25 2.25h9a2.25 2.25 0 0 0 2.25-2.25V8.25"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M7.5 12.75h9"})]}),hC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M3.75 12h3l2.25 9L15 3l2.25 9h3"})}),Ld={encyclopedia:{icon:Go,color:"bg-sky-50 dark:bg-sky-900/50",iconColor:"text-sky-600 dark:text-sky-400"},creative_story:{icon:bt,color:"bg-purple-50 dark:bg-purple-900/50",iconColor:"text-purple-600 dark:text-purple-400"},note_synthesis:{icon:pC,color:"bg-amber-50 dark:bg-amber-900/50",iconColor:"text-amber-600 dark:text-amber-400"},new_theory:{icon:mC,color:"bg-rose-50 dark:bg-rose-900/50",iconColor:"text-rose-600 dark:text-rose-400"},idea:{icon:cC,color:"bg-green-50 dark:bg-green-900/50",iconColor:"text-green-600 dark:text-green-400"}},gC=({suggestedTodos:t,myTodos:e,knowledgeCards:n,pulseReports:o,onToggleTodo:r,onAdoptTodo:i,onCardToNote:s,isLoadingPulse:u,onGeneratePulse:c,onViewPulseReport:d})=>{const f=t.length>0||e.length>0||n.length>0,p=[...o].sort((m,y)=>y.createdAt-m.createdAt);return h.jsx("div",{className:"h-full flex flex-col p-6 md:p-8 overflow-y-auto",children:h.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white mb-2",children:"Studio"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mb-8",children:"Your notes, synthesized. Ideas, tasks, and new perspectives."}),h.jsx("div",{className:"space-y-12",children:!f&&!u&&o.length===0?h.jsxs("div",{className:"text-center py-10",children:[h.jsx("h2",{className:"text-xl font-semibold text-slate-600 dark:text-slate-300",children:"Start by creating some notes"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"When you're ready, visit the Studio again to see what the AI finds."})]}):h.jsxs(h.Fragment,{children:[h.jsxs("section",{children:[h.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-3 text-slate-800 dark:text-slate-100 mb-4",children:[h.jsx(Dd,{className:"w-6 h-6"}),"To-Do List"]}),e.length===0&&t.length===0&&h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No actionable tasks found in your notes."}),e.length>0&&h.jsxs("div",{className:"mb-6",children:[h.jsx("h3",{className:"text-lg font-medium text-slate-600 dark:text-slate-300 mb-3",children:"My Tasks"}),h.jsx("ul",{className:"space-y-2",children:e.map(m=>h.jsxs("li",{className:"flex items-center bg-white dark:bg-slate-700/50 p-3 rounded-lg shadow-sm",children:[h.jsx("button",{onClick:()=>r(m.id),className:`w-6 h-6 flex-shrink-0 rounded-full border-2 flex items-center justify-center mr-3 ${m.completed?"bg-green-500 border-green-500":"border-slate-300 dark:border-slate-500"}`,children:m.completed&&h.jsx(Dd,{className:"w-4 h-4 text-white"})}),h.jsx("span",{className:`flex-1 ${m.completed?"line-through text-slate-400 dark:text-slate-500":"text-slate-800 dark:text-slate-200"}`,children:m.text})]},m.id))})]}),t.length>0&&h.jsxs("div",{children:[h.jsx("h3",{className:"text-lg font-medium text-slate-600 dark:text-slate-300 mb-3",children:"Suggestions"}),h.jsx("ul",{className:"space-y-2",children:t.map(m=>h.jsxs("li",{className:"flex items-center bg-white dark:bg-slate-700/50 p-3 rounded-lg shadow-sm hover:bg-slate-50 dark:hover:bg-slate-700 transition-colors",children:[h.jsx("span",{className:"flex-1 text-slate-800 dark:text-slate-200",children:m.text}),h.jsx("button",{onClick:()=>i(m),className:"ml-4 p-1.5 rounded-full text-slate-500 hover:bg-blue-100 hover:text-blue-600 dark:hover:bg-blue-900/50 dark:text-slate-400 dark:hover:text-blue-400 transition-colors",title:"Add to my tasks",children:h.jsx(fC,{className:"w-6 h-6"})})]},m.id))})]})]}),h.jsxs("section",{children:[h.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-3 text-slate-800 dark:text-slate-100 mb-4",children:[h.jsx(bt,{className:"w-6 h-6"}),"Knowledge Cards"]}),n.length>0?h.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:n.map(m=>{const y=Ld[m.type]||Ld.idea,x=y.icon;return h.jsxs("div",{className:`p-4 rounded-lg shadow-sm flex flex-col ${y.color} border border-black/5 dark:border-white/5`,children:[h.jsxs("div",{className:"flex items-center mb-2",children:[h.jsx(x,{className:`w-6 h-6 mr-3 flex-shrink-0 ${y.iconColor}`}),h.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100 flex-1",children:m.title})]}),h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-4 flex-1 leading-relaxed",children:m.content}),m.sources&&m.sources.length>0&&h.jsxs("div",{className:"mt-auto pt-3 border-t border-black/10 dark:border-white/10",children:[h.jsx("h4",{className:"text-xs font-semibold text-slate-500 dark:text-slate-400 mb-2",children:"Sources"}),h.jsx("ul",{className:"space-y-1",children:m.sources.map((S,w)=>h.jsx("li",{className:"text-xs",children:h.jsx("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 dark:text-blue-400 hover:underline truncate block",children:S})},w))})]}),h.jsx("div",{className:"text-right mt-4",children:h.jsxs("button",{onClick:()=>s(m),className:"inline-flex items-center text-xs font-semibold text-slate-600 dark:text-slate-300 bg-black/5 dark:bg-white/10 px-2.5 py-1.5 rounded-md hover:bg-black/10 dark:hover:bg-white/20 transition-colors",children:[h.jsx(Xl,{className:"w-4 h-4 mr-1.5"}),"Create Note"]})})]},m.id)})}):h.jsx("p",{className:"text-slate-500 dark:text-slate-400",children:"No special insights or ideas found in your notes this time."})]}),h.jsxs("section",{children:[h.jsxs("h2",{className:"text-2xl font-semibold flex items-center gap-3 text-slate-800 dark:text-slate-100 mb-4",children:[h.jsx(hC,{className:"w-6 h-6"}),"The Pulse"]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-4 rounded-lg shadow-sm",children:[h.jsx("p",{className:"text-sm text-slate-600 dark:text-slate-300 mb-4",children:"Get a periodic, narrative report of your thought evolution, new connections, and forgotten threads."}),h.jsx("button",{onClick:c,disabled:u,className:"w-full flex items-center justify-center px-4 py-2 text-sm font-medium text-white bg-indigo-600 rounded-lg hover:bg-indigo-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-indigo-500 disabled:bg-indigo-400 dark:disabled:bg-indigo-800 transition-colors",children:u?h.jsxs(h.Fragment,{children:[h.jsx("div",{className:"w-4 h-4 border-2 border-white border-t-transparent rounded-full animate-spin mr-2"}),"Generating..."]}):"Generate New Pulse Report"}),p.length>0&&h.jsxs("div",{className:"mt-4 pt-4 border-t border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"text-sm font-semibold text-slate-600 dark:text-slate-300 mb-2",children:"Recent Reports"}),h.jsx("ul",{className:"space-y-2",children:p.map(m=>h.jsx("li",{children:h.jsxs("button",{onClick:()=>d(m),className:"w-full text-left p-2 rounded-md hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:[h.jsx("p",{className:"font-medium text-sm text-slate-800 dark:text-slate-100",children:m.title}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:new Date(m.createdAt).toLocaleString()})]})},m.id))})]})]})]})]})})]})})},yC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 12 3.269 3.125A59.769 59.769 0 0 1 21.485 12 59.768 59.768 0 0 1 3.27 20.875L5.999 12Zm0 0h7.5"})}),vC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 6a3.75 3.75 0 1 1-7.5 0 3.75 3.75 0 0 1 7.5 0ZM4.501 20.118a7.5 7.5 0 0 1 14.998 0A17.933 17.933 0 0 1 12 21.75c-2.676 0-5.216-.584-7.499-1.632Z"})}),TC=({chatHistory:t,isChatting:e,onSendMessage:n})=>{const[o,r]=F.useState(""),i=F.useRef(null);F.useEffect(()=>{var u;(u=i.current)==null||u.scrollIntoView({behavior:"smooth"})},[t,e]);const s=u=>{u.preventDefault(),o.trim()&&!e&&(n(o),r(""))};return h.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-slate-800/50",children:[h.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[h.jsx("h1",{className:"text-2xl font-bold text-slate-800 dark:text-slate-100",children:"AI Companion"}),h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Ask anything about your notes"})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[t.length===0&&!e&&h.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-center text-slate-500 dark:text-slate-400",children:[h.jsx(bt,{className:"w-16 h-16 mb-4 text-slate-400 dark:text-slate-500"}),h.jsx("h2",{className:"text-xl font-semibold",children:"Start the Conversation"}),h.jsx("p",{className:"max-w-sm mt-2",children:'Ask a question about your notes to get started. For example: "What were my main takeaways about the Q3 project?" or "Summarize my ideas for the new marketing campaign."'})]}),t.map(u=>h.jsxs("div",{className:`flex items-start gap-3 max-w-4xl mx-auto ${u.role==="user"?"justify-end":""}`,children:[u.role==="model"&&h.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center flex-shrink-0",children:h.jsx(bt,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"})}),h.jsx("div",{className:`p-3 rounded-lg max-w-lg ${u.role==="user"?"bg-indigo-600 text-white rounded-br-none":"bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 rounded-bl-none"}`,children:h.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap",children:u.content})}),u.role==="user"&&h.jsx("div",{className:"w-8 h-8 rounded-full bg-slate-200 dark:bg-slate-600 flex items-center justify-center flex-shrink-0",children:h.jsx(vC,{className:"w-5 h-5 text-slate-600 dark:text-slate-300"})})]},u.id)),e&&h.jsxs("div",{className:"flex items-start gap-3 max-w-4xl mx-auto",children:[h.jsx("div",{className:"w-8 h-8 rounded-full bg-indigo-100 dark:bg-indigo-900/50 flex items-center justify-center flex-shrink-0",children:h.jsx(bt,{className:"w-5 h-5 text-indigo-500 dark:text-indigo-400"})}),h.jsx("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-700 rounded-bl-none",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-pulse",style:{animationDelay:"0s"}}),h.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),h.jsx("span",{className:"w-2 h-2 bg-indigo-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]})})]}),h.jsx("div",{ref:i})]}),h.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:h.jsxs("form",{onSubmit:s,className:"max-w-4xl mx-auto flex gap-2",children:[h.jsx("input",{type:"text",value:o,onChange:u=>r(u.target.value),placeholder:"Ask anything about your notes...",disabled:e,className:"flex-1 w-full bg-slate-100 dark:bg-slate-700 text-slate-800 dark:text-slate-200 placeholder-slate-400 dark:placeholder-slate-500 rounded-lg px-4 focus:outline-none focus:ring-2 focus:ring-indigo-500"}),h.jsx("button",{type:"submit",disabled:e||!o.trim(),className:"p-2.5 bg-indigo-600 text-white rounded-lg hover:bg-indigo-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:h.jsx(yC,{className:"w-5 h-5"})})]})})]})},xC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18L18 6M6 6l12 12"})}),Ip=({isOpen:t,onClose:e,children:n})=>{const o=F.useCallback(r=>{r.key==="Escape"&&e()},[e]);return F.useEffect(()=>(t?(document.addEventListener("keydown",o),document.body.style.overflow="hidden"):(document.removeEventListener("keydown",o),document.body.style.overflow=""),()=>{document.removeEventListener("keydown",o),document.body.style.overflow=""}),[t,o]),t?h.jsx("div",{className:"fixed inset-0 bg-black/60 z-50 flex items-center justify-center p-4 animate-in fade-in",onClick:e,"aria-modal":"true",role:"dialog",children:h.jsx("div",{className:"animate-in fade-in zoom-in-95 duration-300",onClick:r=>r.stopPropagation(),children:n})}):null},SC=({report:t,onClose:e})=>h.jsx(Ip,{isOpen:!!t,onClose:e,children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-xl shadow-2xl w-full max-w-2xl max-h-[90vh] flex flex-col overflow-hidden",children:[h.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-200 dark:border-slate-700 flex-shrink-0",children:[h.jsxs("div",{children:[h.jsx("h2",{className:"text-xl font-bold text-slate-900 dark:text-white",children:t==null?void 0:t.title}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:["Generated on ",t&&new Date(t.createdAt).toLocaleDateString()]})]}),h.jsx("button",{onClick:e,className:"p-2 rounded-full text-slate-500 dark:text-slate-400 hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:h.jsx(xC,{className:"w-6 h-6"})})]}),h.jsx("div",{className:"p-6 overflow-y-auto",children:t&&h.jsx("div",{className:"prose prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:window.marked.parse(t.content)}})})]})}),CC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m8.25 4.5 7.5 7.5-7.5 7.5"})}),Np=({trigger:t,content:e,showDelay:n=50,hideDelay:o=200,className:r="relative",popupClassName:i="absolute top-full right-0 mt-2"})=>{const[s,u]=F.useState(!1),c=F.useRef(null),d=F.useRef(null),f=()=>{d.current&&(clearTimeout(d.current),d.current=null),s||(c.current=window.setTimeout(()=>{u(!0)},n))},p=()=>{c.current&&(clearTimeout(c.current),c.current=null),d.current=window.setTimeout(()=>{u(!1)},o)};return h.jsxs("div",{className:r,onMouseEnter:f,onMouseLeave:p,children:[t,s&&h.jsx("div",{className:i,children:e})]})},EC=({history:t,wikis:e,setHistory:n})=>{const o=({item:r,isLast:i})=>{const s="id"in r?e.filter(p=>p.parentId===r.id):[],u="term"in r?r.term:r.title||"Untitled Note",c=()=>{const p=t.findIndex(m=>m.id===r.id);p!==-1&&n(m=>m.slice(0,p+1))},d=h.jsx("button",{onClick:c,className:`text-sm font-medium ${i?"text-slate-900 dark:text-white":"text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200"}`,children:u});if(s.length===0)return d;const f=h.jsxs("div",{className:"w-64 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 z-20 p-2 animate-in fade-in zoom-in-95",children:[h.jsx("button",{onClick:c,className:"w-full text-left block px-3 py-2 text-sm font-semibold rounded-md text-slate-800 dark:text-slate-100 bg-slate-100 dark:bg-slate-700/50 mb-1",children:u}),h.jsx("div",{className:"border-t border-slate-200 dark:border-slate-700 my-1 -mx-2"}),s.map(p=>h.jsx("button",{onClick:()=>n(m=>[...m.slice(0,m.findIndex(y=>y.id===r.id)+1),p]),className:"w-full text-left block px-3 py-2 text-sm rounded-md text-slate-600 dark:text-slate-300 hover:bg-slate-100 dark:hover:bg-slate-700",children:p.term},p.id))]});return h.jsx(Np,{trigger:d,content:f,popupClassName:"absolute top-full left-0 mt-2 z-20",className:"relative"})};return h.jsx("div",{className:"flex items-center flex-wrap gap-2 p-2 bg-slate-100 dark:bg-slate-800 rounded-md",children:t.map((r,i)=>h.jsxs(Or.Fragment,{children:[h.jsx(o,{item:r,isLast:i===t.length-1}),i<t.length-1&&h.jsx(CC,{className:"w-4 h-4 text-slate-400 dark:text-slate-500"})]},r.id))})},wC=({notes:t,wikis:e,aiTopics:n,isLoadingTopics:o,onSelectNote:r,onStartWithTopic:i,onSelectWiki:s,loadingState:u})=>{const c=e.filter(d=>d.parentId===it).sort((d,f)=>f.createdAt-d.createdAt);return h.jsx("div",{className:"h-full flex flex-col p-6 md:p-8 overflow-y-auto",children:h.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[h.jsxs("div",{className:"text-center mb-12",children:[h.jsx(Go,{className:"w-16 h-16 mx-auto mb-4 text-indigo-500"}),h.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"Infinite Wiki"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:"Start a journey of discovery. Begin with one of your notes or an AI-suggested topic."})]}),h.jsxs("div",{className:"space-y-8",children:[c.length>0&&h.jsxs("section",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-lg shadow-sm",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Continue Exploring"}),h.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-3",children:c.map(d=>h.jsxs("button",{onClick:()=>s(d),className:"w-full text-left p-3 rounded-md bg-slate-100 dark:bg-slate-700/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:[h.jsx("p",{className:"font-semibold truncate",children:d.term}),h.jsxs("p",{className:"text-xs text-slate-500 dark:text-slate-400",children:["Created: ",new Date(d.createdAt).toLocaleDateString()]})]},d.id))})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-lg shadow-sm flex flex-col",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Start from a Note"}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-2",children:t.length>0?t.map(d=>{const f=(u==null?void 0:u.type)==="explore"&&u.id===d.id;return h.jsxs("button",{onClick:()=>r(d),disabled:!!u,className:"w-full text-left p-3 rounded-md bg-slate-100 dark:bg-slate-700/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors flex items-center justify-between disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsxs("div",{className:"flex-1 overflow-hidden",children:[h.jsx("p",{className:"font-semibold truncate",children:d.title||"Untitled Note"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:d.content||"No content"})]}),f&&h.jsx("div",{className:"ml-2 w-4 h-4 border-2 border-slate-400 dark:border-slate-500 border-t-transparent rounded-full animate-spin"})]},d.id)}):h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"You don't have any notes yet. Create one to start an exploration."})})]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-lg shadow-sm",children:[h.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-slate-800 dark:text-slate-100",children:[h.jsx(bt,{className:"w-5 h-5 text-purple-500"}),"Start a New Topic"]}),o?h.jsx("div",{className:"flex items-center justify-center h-40",children:h.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-transparent rounded-full animate-spin"})}):n.length>0?h.jsx("div",{className:"space-y-2",children:n.map((d,f)=>{const p=(u==null?void 0:u.type)==="explore"&&u.id===d;return h.jsxs("button",{onClick:()=>i(d),disabled:!!u,className:"w-full text-left p-3 rounded-md bg-slate-100 dark:bg-slate-700/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors flex items-center justify-between disabled:opacity-50 disabled:cursor-not-allowed",children:[h.jsx("p",{className:"font-semibold",children:d}),p&&h.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 dark:border-slate-500 border-t-transparent rounded-full animate-spin"})]},f)})}):h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Create some notes, and we'll suggest topics for you here!"})]})]})]})]})})},_C=({children:t,renderPopupContent:e,isDisabled:n=!1})=>{const[o,r]=F.useState(null),i=F.useRef(null),s=F.useRef(null),u=F.useCallback(()=>{n||setTimeout(()=>{const f=window.getSelection(),p=f==null?void 0:f.toString().trim();if(f&&p&&p.length>2&&p.length<100){const m=f.getRangeAt(0),y=m.startContainer.parentElement;if(i.current&&y&&i.current.contains(y)){const x=m.getBoundingClientRect();r({top:x.bottom+window.scrollY+8,left:x.left+window.scrollX+x.width/2,text:p})}else r(null)}else r(null)},10)},[n]),c=F.useCallback(f=>{if(s.current&&!s.current.contains(f.target)){const p=window.getSelection();(!p||p.toString().trim().length===0)&&r(null)}},[]);F.useEffect(()=>(document.addEventListener("mouseup",u),document.addEventListener("mousedown",c),()=>{document.removeEventListener("mouseup",u),document.removeEventListener("mousedown",c)}),[u,c]);const d=()=>r(null);return h.jsxs("div",{ref:i,children:[t,o&&h.jsx("div",{ref:s,onMouseUp:f=>f.stopPropagation(),style:{top:`${o.top}px`,left:`${o.left}px`,transform:"translateX(-50%)"},className:"fixed z-10",children:e({text:o.text,close:d})})]})},kC=({subTopics:t,onClose:e,onSelectTopic:n})=>h.jsx(Ip,{isOpen:!!t,onClose:e,children:h.jsxs("div",{className:"bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-md p-5",children:[h.jsxs("h3",{className:"font-semibold text-slate-800 dark:text-slate-100",children:['Explore topics related to "',t==null?void 0:t.title,'"']}),h.jsx("div",{className:"mt-4 space-y-2",children:t==null?void 0:t.topics.map(o=>h.jsx("button",{onClick:()=>n(o),className:"w-full text-left p-3 rounded-md bg-slate-100 dark:bg-slate-700/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:o},o))})]})}),IC=t=>h.jsxs("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:[h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M20.25 8.511c.884.284 1.5 1.128 1.5 2.097v4.286c0 1.136-.847 2.1-1.98 2.193l-3.72.372a11.25 11.25 0 0 1-5.58 0l-3.72-.372A2.25 2.25 0 0 1 3.75 15.118V10.608c0-.97.616-1.813 1.5-2.097m14.25-1.125a2.25 2.25 0 0 0-2.25-2.25H7.5a2.25 2.25 0 0 0-2.25 2.25v.442c.884-.285 1.83-.442 2.813-.442h7.037a3.375 3.375 0 0 1 2.813.442v-.442Z"}),h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 8.25l.66 1.625 1.625.66-1.625.66L12 12.83l-.66-1.625-1.625-.66 1.625-.66L12 8.25Z"})]}),NC=({notes:t,wikis:e,history:n,setHistory:o,onGenerateWiki:r,onRegenerateWiki:i,onGenerateSubTopics:s,onUpdateWiki:u,aiTopics:c,isLoadingTopics:d})=>{const[f,p]=F.useState(null),[m,y]=F.useState(null),x=n.length>0?n[n.length-1]:null;F.useEffect(()=>{p(null),x&&"term"in x&&(!x.suggestedTopics||x.suggestedTopics.length===0)&&x.id!==it&&u(x.id)},[x,u]);const S=async C=>{var _;if(!x||m)return;y({type:"explore",id:C});const E="sourceNoteId"in x?x.sourceNoteId:((_=t[0])==null?void 0:_.id)||"no-source",k=x.id;try{const N=await r(C,E,k,x.content);o(A=>[...A,N])}catch(N){console.error("Failed to generate next wiki",N)}finally{p(null),y(null)}},w=async C=>{if(!m&&x){y({type:"subtopics"});try{const E=await s(C,x.content);p({title:C,topics:E})}catch(E){console.error("Failed to suggest topics",E)}finally{y(null)}}},v=async C=>{if(x&&"term"in x){y({type:"regenerate"});try{await i(x.id,C)}finally{y(null)}}},g=async C=>{if(m)return;y({type:"explore",id:C});const E=t.length>0?t[0].id:"no-source",k=t.map(_=>`${_.title} ${_.content}`).join(`
`);try{const _=await r(C,E,it,k);o(N=>[...N,_])}catch(_){console.error("Failed to start with topic",_)}finally{y(null)}},T=async C=>{if(m)return;const E=e.find(_=>_.sourceNoteId===C.id&&_.parentId===it);if(E){o(_=>[..._,E]);return}y({type:"explore",id:C.id});const k=C.title||"Exploration from Note";try{const _=await r(k,C.id,it,C.content);o(N=>[...N,_])}catch(_){console.error("Failed to generate wiki from note",_)}finally{y(null)}};return x?h.jsxs("div",{className:"h-full flex flex-col",children:[h.jsx(kC,{subTopics:f,onClose:()=>p(null),onSelectTopic:S}),h.jsx("div",{className:"px-6 md:px-8 pt-6 md:pt-8 pb-4 border-b border-slate-200 dark:border-slate-700",children:h.jsx("div",{className:"max-w-4xl mx-auto w-full",children:h.jsx(EC,{history:n,wikis:e,setHistory:o})})}),x.id===it?h.jsx(wC,{notes:t,wikis:e,aiTopics:c,isLoadingTopics:d,onSelectNote:T,onStartWithTopic:g,onSelectWiki:C=>o(E=>[...E,C]),loadingState:m}):h.jsx("div",{className:"flex-1 overflow-y-auto p-6 md:p-8",children:h.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[h.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[h.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:x.term}),h.jsx("div",{className:"flex-shrink-0",children:h.jsx(Np,{trigger:h.jsxs("button",{disabled:!!m,className:"text-sm font-semibold text-slate-500 dark:text-slate-400 hover:text-slate-700 dark:hover:text-slate-200 px-3 py-1.5 rounded-md bg-slate-100 dark:bg-slate-700/50 disabled:opacity-50 flex items-center gap-2",children:[(m==null?void 0:m.type)==="regenerate"&&h.jsx("div",{className:"w-4 h-4 border-2 border-slate-400 dark:border-slate-500 border-t-transparent rounded-full animate-spin"}),"Regenerate"]}),content:h.jsxs("div",{className:"w-64 bg-white dark:bg-slate-800 rounded-lg shadow-lg border border-slate-200 dark:border-slate-700 p-2 animate-in fade-in zoom-in-95",children:[h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 px-2 pb-2",children:"Choose an option:"}),h.jsxs("button",{onClick:()=>v(!1),className:"w-full text-left block px-3 py-2 text-sm rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:[h.jsx("span",{className:"font-semibold block",children:"Update This Entry"}),h.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Regenerate content for this topic only."})]}),h.jsxs("button",{onClick:()=>v(!0),className:"w-full text-left block px-3 py-2 text-sm rounded-md hover:bg-slate-100 dark:hover:bg-slate-700",children:[h.jsx("span",{className:"font-semibold block",children:"Update & Clear Branch"}),h.jsx("span",{className:"text-xs text-slate-500 dark:text-slate-400",children:"Regenerate and delete all sub-topics created from this entry."})]})]}),popupClassName:"absolute top-full right-0 mt-2 z-20",className:"relative"})})]}),h.jsx(_C,{renderPopupContent:({text:C,close:E})=>h.jsxs("div",{className:"animate-in fade-in zoom-in-95 duration-150 flex items-center bg-slate-800 rounded-lg shadow-lg",children:[h.jsxs("button",{onClick:()=>{S(C),E()},disabled:!!m,className:"flex items-center gap-2 text-sm px-3 py-1.5 text-white hover:bg-slate-700 rounded-l-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(m==null?void 0:m.type)==="explore"?h.jsx("div",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):h.jsx(Go,{className:"w-4 h-4"}),"Explore"]}),h.jsx("div",{className:"w-px h-4 bg-slate-600"}),h.jsxs("button",{onClick:()=>{w(C),E()},disabled:!!m,className:"flex items-center gap-2 text-sm px-3 py-1.5 text-white hover:bg-slate-700 rounded-r-lg disabled:opacity-50 disabled:cursor-not-allowed",children:[(m==null?void 0:m.type)==="subtopics"?h.jsx("div",{className:"w-4 h-4 border-2 border-white/50 border-t-white rounded-full animate-spin"}):h.jsx(IC,{className:"w-4 h-4"}),"Suggest Topics"]})]}),isDisabled:!!m||x.id===it,children:h.jsx("div",{className:"prose prose-lg prose-slate dark:prose-invert max-w-none",dangerouslySetInnerHTML:{__html:window.marked.parse(x.content)}})}),e.filter(C=>C.parentId===x.id).length>0&&h.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Branches from this topic"}),h.jsx("div",{className:"flex flex-wrap gap-3",children:e.filter(C=>C.parentId===x.id).map(C=>h.jsx("button",{onClick:()=>o(E=>[...E,C]),className:"px-4 py-2 bg-slate-100 text-slate-700 dark:bg-slate-700/50 dark:text-slate-300 rounded-full font-medium text-sm hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:C.term},C.id))})]}),x.suggestedTopics&&x.suggestedTopics.length>0&&h.jsxs("div",{className:"mt-12 pt-8 border-t border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Further Exploration"}),h.jsx("div",{className:"flex flex-wrap gap-3",children:x.suggestedTopics.map(C=>{const E=(m==null?void 0:m.type)==="explore"&&m.id===C;return h.jsxs("button",{onClick:()=>S(C),disabled:!!m,className:"px-4 py-2 bg-indigo-100 text-indigo-700 dark:bg-indigo-900/50 dark:text-indigo-300 rounded-full font-medium text-sm hover:bg-indigo-200 dark:hover:bg-indigo-900 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center gap-2",children:[E&&h.jsx("div",{className:"w-4 h-4 border-2 border-indigo-400/50 border-t-indigo-400 rounded-full animate-spin"}),C]},C)})})]})]})})]}):null},bi={id:it,term:"Wiki Home",content:"Welcome to your personal wiki. Explore topics, connect ideas, and build your knowledge base.",createdAt:0,sourceNoteId:"",parentId:null,suggestedTopics:[]},AC=t=>{const{initialHistory:e}=t,[n,o]=F.useState([bi]);return F.useEffect(()=>{e&&e.length>0?o([bi,...e]):o([bi])},[e]),h.jsx(NC,{...t,history:n,setHistory:o})},PC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M8.625 12a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H8.25m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0H12m4.125 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Zm0 0h-.375M21 12c0 4.556-4.03 8.25-9 8.25a9.76 9.76 0 0 1-2.555-.337A5.972 5.972 0 0 1 5.41 20.97a5.969 5.969 0 0 1-.474-.065 4.48 4.48 0 0 0 .978-2.025c.09-.455.09-.934.09-1.425v-2.125c0-4.556 4.03-8.25 9-8.25 4.97 0 9 3.694 9 8.25Z"})}),RC=({onSelect:t})=>h.jsxs("div",{className:"grid md:grid-cols-2 gap-8",children:[h.jsxs("button",{onClick:()=>t("debate"),className:"text-left p-6 bg-white dark:bg-slate-800/50 rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all transform border border-transparent hover:border-indigo-500",children:[h.jsx(Zl,{className:"w-10 h-10 mb-3 text-indigo-500"}),h.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Debate Chamber"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"A pragmatist and a visionary AI debate a topic from opposing viewpoints."})]}),h.jsxs("button",{onClick:()=>t("podcast"),className:"text-left p-6 bg-white dark:bg-slate-800/50 rounded-lg shadow-sm hover:shadow-lg hover:-translate-y-1 transition-all transform border border-transparent hover:border-purple-500",children:[h.jsx(PC,{className:"w-10 h-10 mb-3 text-purple-500"}),h.jsx("h3",{className:"text-xl font-bold text-slate-900 dark:text-white",children:"Podcast Studio"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-1",children:"A host and an expert AI discuss a topic in an engaging, conversational format."})]})]}),MC=({notes:t,topics:e,isLoadingTopics:n,onStartDebate:o,onStartPodcast:r,mode:i})=>{const[s,u]=F.useState(null),c=(p,m)=>{i==="debate"?o(p,m):r(p,m)},d=()=>{if(s){const p=`A discussion inspired by the note: "${s.title||"Untitled"}"`;c(p,s.id)}},f=i==="debate"?"Start a Debate":"Start a Podcast";return h.jsxs("div",{className:"grid md:grid-cols-2 gap-8 animate-in fade-in-50",children:[h.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-lg shadow-sm flex flex-col",children:[h.jsx("h2",{className:"text-xl font-semibold mb-4 text-slate-800 dark:text-slate-100",children:"Start from a Note"}),h.jsx("div",{className:"flex-1 overflow-y-auto pr-2 -mr-2 space-y-2 mb-4",children:t.length>0?t.map(p=>h.jsxs("button",{onClick:()=>u(p),className:`w-full text-left p-3 rounded-md transition-colors border-2 ${(s==null?void 0:s.id)===p.id?"bg-indigo-50 dark:bg-indigo-900/30 border-indigo-500":"bg-slate-100 dark:bg-slate-700/50 border-transparent hover:bg-slate-200 dark:hover:bg-slate-700"}`,children:[h.jsx("p",{className:"font-semibold truncate",children:p.title||"Untitled Note"}),h.jsx("p",{className:"text-xs text-slate-500 dark:text-slate-400 truncate",children:p.content||"No content"})]},p.id)):h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Create a note to start a session from it."})}),h.jsx("button",{onClick:d,disabled:!s,className:"w-full mt-auto bg-indigo-600 text-white font-semibold py-2.5 rounded-lg hover:bg-indigo-700 disabled:bg-slate-300 dark:disabled:bg-slate-600 disabled:cursor-not-allowed transition-colors",children:f})]}),h.jsxs("div",{className:"bg-white dark:bg-slate-800/50 p-6 rounded-lg shadow-sm",children:[h.jsxs("h2",{className:"text-xl font-semibold mb-4 flex items-center gap-2 text-slate-800 dark:text-slate-100",children:[h.jsx(bt,{className:"w-5 h-5 text-purple-500"}),"Start with a Suggested Topic"]}),n?h.jsx("div",{className:"flex items-center justify-center h-40",children:h.jsx("div",{className:"w-6 h-6 border-2 border-slate-300 border-t-transparent rounded-full animate-spin"})}):e.length>0?h.jsx("div",{className:"space-y-2",children:e.map((p,m)=>h.jsx("button",{onClick:()=>c(p),className:"w-full text-left p-3 rounded-md bg-slate-100 dark:bg-slate-700/50 hover:bg-slate-200 dark:hover:bg-slate-700 transition-colors",children:h.jsx("p",{className:"font-semibold",children:p})},m))}):h.jsx("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:"Create some notes, and we'll suggest topics here!"})]})]})},DC=t=>{const[e,n]=F.useState(null);return h.jsx("div",{className:"h-full flex flex-col p-6 md:p-8 overflow-y-auto",children:h.jsxs("div",{className:"max-w-4xl mx-auto w-full",children:[h.jsxs("div",{className:"text-center mb-12",children:[e&&h.jsx("button",{onClick:()=>n(null),className:"text-sm text-slate-500 dark:text-slate-400 hover:text-slate-800 dark:hover:text-slate-200 mb-2",children:" Back to modes"}),h.jsx(Zl,{className:"w-16 h-16 mx-auto mb-4 text-indigo-500"}),h.jsx("h1",{className:"text-3xl font-bold text-slate-900 dark:text-white",children:"AI Parliament"}),h.jsx("p",{className:"text-slate-500 dark:text-slate-400 mt-2",children:e?`Choose a starting point for your ${e}.`:"Explore your ideas from multiple perspectives through automated AI conversations."})]}),h.jsx("div",{className:"space-y-8",children:e?h.jsx(MC,{...t,mode:e}):h.jsx(RC,{onSelect:n})})]})})},LC=t=>h.jsx("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...t,children:h.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M10.5 19.5 3 12m0 0 7.5-7.5M3 12h18"})}),Ks={"The Pragmatist":{color:"text-sky-700 dark:text-sky-300",bgColor:"bg-sky-50 dark:bg-sky-900/50"},"The Visionary":{color:"text-purple-700 dark:text-purple-300",bgColor:"bg-purple-50 dark:bg-purple-900/50"},Moderator:{color:"text-slate-600 dark:text-slate-400",bgColor:"bg-slate-100 dark:bg-slate-700/50"},Host:{color:"text-amber-700 dark:text-amber-300",bgColor:"bg-amber-50 dark:bg-amber-900/50"},"Guest Expert":{color:"text-teal-700 dark:text-teal-300",bgColor:"bg-teal-50 dark:bg-teal-900/50"}},UC=({synthesis:t,topic:e,onSave:n})=>h.jsxs("div",{className:"my-6 border border-slate-200 dark:border-slate-700 rounded-lg bg-white dark:bg-slate-800 shadow-md",children:[h.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700",children:[h.jsx("h3",{className:"font-bold text-lg text-slate-800 dark:text-slate-100",children:"Moderator's Synthesis"}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400",children:['A summary of the debate on "',e,'"']})]}),h.jsxs("div",{className:"p-4 space-y-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-sm text-slate-600 dark:text-slate-300 mb-2",children:"Core Tension"}),h.jsx("p",{className:"text-sm text-slate-800 dark:text-slate-200",children:t.coreTension})]}),h.jsxs("div",{className:"grid md:grid-cols-2 gap-4",children:[h.jsxs("div",{children:[h.jsx("h4",{className:`font-semibold text-sm mb-2 ${Ks["The Pragmatist"].color}`,children:"The Pragmatist's Points"}),h.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-700 dark:text-slate-300",children:t.keyPointsPragmatist.map((o,r)=>h.jsx("li",{children:o},r))})]}),h.jsxs("div",{children:[h.jsx("h4",{className:`font-semibold text-sm mb-2 ${Ks["The Visionary"].color}`,children:"The Visionary's Points"}),h.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-700 dark:text-slate-300",children:t.keyPointsVisionary.map((o,r)=>h.jsx("li",{children:o},r))})]})]}),h.jsxs("div",{children:[h.jsx("h4",{className:"font-semibold text-sm text-slate-600 dark:text-slate-300 mb-2",children:"Next Steps"}),h.jsx("ul",{className:"list-disc list-inside space-y-1 text-sm text-slate-700 dark:text-slate-300",children:t.nextSteps.map((o,r)=>h.jsx("li",{children:o},r))})]})]}),h.jsx("div",{className:"p-4 bg-slate-50 dark:bg-slate-800/50 border-t border-slate-200 dark:border-slate-700 rounded-b-lg text-right",children:h.jsxs("button",{onClick:n,className:"inline-flex items-center text-sm font-semibold text-slate-600 dark:text-slate-200 bg-white dark:bg-slate-700 px-3 py-2 rounded-md shadow-sm border border-slate-300 dark:border-slate-600 hover:bg-slate-100 dark:hover:bg-slate-600 transition-colors",children:[h.jsx(Xl,{className:"w-4 h-4 mr-2"}),"Save as Note"]})})]}),FC=({sessionHistory:t,isSessionActive:e,currentSession:n,onResetSession:o,onSaveSynthesis:r})=>{const i=F.useRef(null);F.useEffect(()=>{var u;(u=i.current)==null||u.scrollIntoView({behavior:"smooth"})},[t,e]);const s=(n==null?void 0:n.mode)==="debate"?"Debate":"Podcast";return h.jsxs("div",{className:"h-full flex flex-col bg-white dark:bg-slate-800/50",children:[h.jsxs("div",{className:"p-4 border-b border-slate-200 dark:border-slate-700 flex items-center gap-4",children:[h.jsx("button",{onClick:o,className:"p-2 rounded-full hover:bg-slate-100 dark:hover:bg-slate-700 transition-colors",children:h.jsx(LC,{className:"w-5 h-5"})}),h.jsxs("div",{children:[h.jsxs("h1",{className:"text-xl font-bold text-slate-800 dark:text-slate-100",children:["AI Parliament / ",s]}),h.jsxs("p",{className:"text-sm text-slate-500 dark:text-slate-400 truncate max-w-md",children:["Topic: ",n==null?void 0:n.topic]})]})]}),h.jsxs("div",{className:"flex-1 overflow-y-auto p-4 space-y-4",children:[h.jsxs("div",{className:"max-w-4xl mx-auto w-full space-y-4",children:[t.map(u=>{if(u.synthesisContent&&n)return h.jsx(UC,{synthesis:u.synthesisContent,topic:n.topic,onSave:()=>r(n.topic,u.synthesisContent)},u.id);const c=Ks[u.persona||"Moderator"],d=u.persona==="The Visionary"||u.persona==="Guest Expert";return h.jsx("div",{className:`flex items-start gap-3 ${d?"flex-row-reverse":"flex-row"}`,children:h.jsxs("div",{className:`p-3 rounded-lg max-w-lg ${c.bgColor} ${d?"rounded-br-none":"rounded-bl-none"}`,children:[h.jsx("p",{className:`font-bold text-sm mb-1 ${c.color}`,children:u.persona}),h.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap text-slate-800 dark:text-slate-200",children:u.content})]})},u.id)}),e&&h.jsx("div",{className:"flex items-start gap-3 max-w-4xl justify-start",children:h.jsx("div",{className:"p-3 rounded-lg bg-slate-100 dark:bg-slate-700 rounded-bl-none",children:h.jsxs("div",{className:"flex items-center gap-2",children:[h.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0s"}}),h.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.1s"}}),h.jsx("span",{className:"w-2 h-2 bg-slate-400 rounded-full animate-pulse",style:{animationDelay:"0.2s"}})]})})})]}),h.jsx("div",{ref:i})]}),!e&&t.length>0&&h.jsx("div",{className:"p-4 border-t border-slate-200 dark:border-slate-700",children:h.jsx("div",{className:"max-w-4xl mx-auto flex gap-2",children:h.jsx("button",{onClick:o,className:"w-full bg-indigo-600 text-white font-semibold py-2.5 rounded-lg hover:bg-indigo-700 transition-colors",children:"Start a New Session"})})})]})},VC=t=>{const{currentSession:e}=t;return e?h.jsx(FC,{...t}):h.jsx(DC,{...t})};class HC extends Or.Component{constructor(e){super(e),this.state={hasError:!1,error:null,errorInfo:null}}static getDerivedStateFromError(e){return{hasError:!0,error:e,errorInfo:null}}componentDidCatch(e,n){console.error("Uncaught error:",e,n),this.setState({error:e,errorInfo:n})}render(){return this.state.hasError?h.jsx("div",{className:"h-screen w-screen flex items-center justify-center p-4 bg-slate-100 dark:bg-slate-900",children:h.jsxs("div",{className:"max-w-2xl w-full bg-white dark:bg-slate-800 p-8 rounded-lg shadow-lg border border-red-500/30",children:[h.jsx("h1",{className:"text-2xl font-bold text-red-600 dark:text-red-400",children:"Something went wrong."}),h.jsx("p",{className:"mt-2 text-slate-600 dark:text-slate-400",children:"An unexpected error occurred in the application. Please try refreshing the page."}),this.state.error&&h.jsxs("details",{className:"mt-4 p-3 bg-slate-50 dark:bg-slate-700/50 rounded-md",children:[h.jsx("summary",{className:"font-semibold cursor-pointer text-slate-700 dark:text-slate-200",children:"Error Details"}),h.jsx("pre",{className:"mt-2 text-sm text-red-500 dark:text-red-400 whitespace-pre-wrap break-words",children:this.state.error.toString()}),this.state.errorInfo&&h.jsx("pre",{className:"mt-2 text-xs text-slate-500 dark:text-slate-400 whitespace-pre-wrap break-words",children:this.state.errorInfo.componentStack})]})]})}):this.props.children}}function GC(){const t=iC(),{viewMode:e,activeNoteId:n,initialWikiHistory:o,viewingPulseReport:r}=yn(),{notes:i,generatingTitleIds:s}=he(),{chatHistory:u,isChatting:c}=on(),{aiSummary:d,myTodos:f,isLoadingAI:p,isLoadingPulse:m,pulseReports:y}=Je(),{wikis:x,wikiTopics:S,isLoadingWikiTopics:w}=Ne(),{topics:v,isLoadingTopics:g,sessionHistory:T,isSessionActive:C,currentSession:E}=ie(),k=i.find(N=>N.id===n)||null,_=()=>{switch(e){case"studio":return h.jsx(gC,{suggestedTodos:(d==null?void 0:d.todos)||[],myTodos:f,knowledgeCards:(d==null?void 0:d.knowledgeCards)||[],pulseReports:y,onToggleTodo:t.studioManager.toggleTodo,onAdoptTodo:t.studioManager.adoptTodo,onCardToNote:t.handleCardToNote,isLoadingPulse:m,onGeneratePulse:()=>t.studioManager.generateNewPulseReport(),onViewPulseReport:t.appManager.setViewingPulseReport});case"chat":return h.jsx(TC,{chatHistory:u,isChatting:c,onSendMessage:t.chatManager.sendChatMessage});case"wiki_studio":return h.jsx(AC,{notes:i,wikis:x,onGenerateWiki:t.wikiManager.generateWiki,onRegenerateWiki:t.wikiManager.regenerateWiki,onGenerateSubTopics:t.wikiManager.generateSubTopics,aiTopics:S,isLoadingTopics:w,initialHistory:o,onUpdateWiki:t.wikiManager.updateWikiWithTopics});case"parliament":return h.jsx(VC,{notes:i,topics:v,isLoadingTopics:g,sessionHistory:T,isSessionActive:C,currentSession:E,onStartDebate:t.parliamentManager.startDebate,onStartPodcast:t.parliamentManager.startPodcast,onResetSession:t.parliamentManager.resetSession,onSaveSynthesis:t.handleSaveDebateSynthesisAsNote});case"editor":default:return h.jsx(dC,{note:k,onUpdateNote:(N,A,R)=>t.notesManager.updateNote(N,{title:A,content:R}),wikis:x,onViewWikiInStudio:t.handleViewWikiInStudio})}};return h.jsxs("div",{className:"h-screen w-screen flex antialiased text-slate-800 dark:text-slate-200",children:[h.jsx("div",{className:"w-full max-w-xs md:w-1/3 md:max-w-sm lg:w-1/4 border-r border-slate-200 dark:border-slate-700",children:h.jsx(uC,{notes:i,activeNoteId:n,onSelectNote:t.handleSelectNote,onNewTextNote:t.handleNewTextNote,onDeleteNote:t.handleDeleteNote,onShowStudio:t.handleShowStudio,onShowChat:t.handleShowChat,onShowWikiStudio:t.handleShowWikiStudio,onShowParliament:t.handleShowParliament,isLoadingAI:p,generatingTitleIds:s,viewMode:e})}),h.jsx("main",{className:"flex-1",children:_()}),h.jsx(SC,{report:r,onClose:()=>t.appManager.setViewingPulseReport(null)})]})}function BC(){return h.jsx(rC,{children:h.jsx(HC,{children:h.jsx(GC,{})})})}const Ap=document.getElementById("root");if(!Ap)throw new Error("Could not find root element to mount to");const qC=Yi.createRoot(Ap);qC.render(h.jsx(Or.StrictMode,{children:h.jsx(BC,{})}));
